import{r as a,j as e}from"./index-BVGtFoCz.js";import{g as ae,a as le,s as ne,f as re,c as ie}from"./geminiService-vZ0S3hm1.js";import{M as K}from"./MagicWandIcon-DZl6AqdX.js";import{C as oe}from"./ClipboardIcon-CmhZJ1MY.js";import{C as ce,V as de}from"./VideoCameraIcon-B_XrvjJ5.js";const J=({title:n,prompt:o,isLoading:c,isMarkdown:M=!1})=>{const[p,y]=a.useState(!1),N=()=>{navigator.clipboard.writeText(o),y(!0),setTimeout(()=>y(!1),2e3)},k=S=>S.split(`
`).map((b,f)=>{const d=`line-${f}`;if(b.trim()==="")return e.jsx("div",{className:"h-2"},d);const u=v=>v.split(/(\*\*.*?\*\*)/g).map((m,D)=>m.startsWith("**")&&m.endsWith("**")?e.jsx("strong",{children:m.slice(2,-2)},`${d}-b-${D}`):m);if(b.trim().startsWith("* ")){const v=b.trim().substring(2);return e.jsxs("div",{className:"flex items-start pl-4",children:[e.jsx("span",{className:"mr-2 mt-1",children:" •"}),e.jsx("span",{children:u(v)})]},d)}return e.jsx("p",{className:"mb-1",children:u(b)},d)});return e.jsxs("div",{className:"bg-slate-900/70 rounded-lg border border-slate-700",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-slate-700",children:[e.jsx("h4",{className:"text-lg font-semibold text-white",children:n}),o&&!c&&e.jsxs("button",{onClick:N,className:"flex items-center gap-2 text-sm text-slate-300 hover:text-cyan-400 transition-colors","aria-label":`Copy ${n}`,children:[e.jsx(oe,{className:"w-5 h-5"}),e.jsx("span",{children:p?"Disalin!":"Salin"})]})]}),e.jsx("div",{className:"p-4 min-h-[150px]",children:c?e.jsxs("div",{className:"space-y-3 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-slate-700 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-slate-700 rounded w-full"}),e.jsx("div",{className:"h-4 bg-slate-700 rounded w-5/6"}),e.jsx("div",{className:"h-4 bg-slate-700 rounded w-1/2"})]}):o?M?e.jsx("div",{className:"text-slate-300 font-sans text-sm",children:k(o)}):e.jsx("p",{className:"text-slate-300 whitespace-pre-wrap break-words font-sans text-sm",children:o}):e.jsx("p",{className:"text-slate-500 italic",children:"Prompt yang dihasilkan akan muncul di sini."})})]})},W=["Chibi Style Cartoon","Photorealistic","Digital Painting","Concept Art","3D Render","Anime / Manga","Pixel Art","Watercolor","Vector Art","Low Poly","Cyberpunk","Steampunk","Fantasy Art","Synthwave","Minimalist","Custom"],pe=()=>{const[n,o]=a.useState("text"),[c,M]=a.useState("A chibi-style girl walking happily with headphones on a sunny street."),[p,y]=a.useState(null),[N,k]=a.useState(null),[S,b]=a.useState(W[0]),[f,d]=a.useState(W[0]),[u,v]=a.useState("1:1"),[m,D]=a.useState("15"),[C,T]=a.useState(""),[I,H]=a.useState(""),[r,$]=a.useState(!1),[z,i]=a.useState(null),[j,R]=a.useState(null),[F,B]=a.useState(!1),[w,P]=a.useState(null),[L,V]=a.useState(!1),[Q,G]=a.useState(""),[X,E]=a.useState(!1),A=a.useRef(null);a.useEffect(()=>()=>{w&&URL.revokeObjectURL(w)},[w]);const Y=t=>{const s=t.target.value;b(s),d(s==="Custom"?"":s)},O=t=>{if(t&&t[0]){const s=t[0];y(s);const l=new FileReader;l.onloadend=()=>{k(l.result)},l.readAsDataURL(s)}},Z=()=>{y(null),k(null),A.current&&(A.current.value="")},_=a.useCallback(async()=>{if(n==="text"&&!c.trim()){i("Harap masukkan konsep untuk menghasilkan prompt.");return}if(n==="image"&&!p){i("Silakan unggah file gambar.");return}if(!f.trim()){i("Harap tentukan Gaya Seni kustom atau pilih salah satu dari daftar.");return}$(!0),i(null),T(""),H(""),R(null),P(null);const t={concept:n==="text"?c:"",file:n==="image"?p:void 0,style:f,aspectRatio:u,duration:m};try{const s=await ae(t);T(s.imagePrompt),H(s.videoPrompt)}catch(s){const l=s instanceof Error?s.message:"Terjadi kesalahan yang tidak diketahui.";i(l),console.error(s)}finally{$(!1)}},[c,p,n,f,u,m]),ee=async()=>{if(C){B(!0),R(null),P(null),i(null);try{const t=await le(C,u);R(t)}catch(t){const s=t instanceof Error?t.message:"Terjadi kesalahan yang tidak diketahui.";i(s)}finally{B(!1)}}},te=async()=>{if(!I||!j)return;V(!0),P(null),i(null);const t=["Warming up the video engine...","Conceptualizing the motion...","Compositing scenes, this can take a few minutes...","Applying digital cinematography...","Adding special effects and filters...","Rendering the final frames...","Finalizing render, almost there!"];let s=0;G(t[s]);try{let l=await ne(I,j);const x=async()=>{try{if(l.done){const h=l.response?.generatedVideos?.[0]?.video?.uri;if(h){G("Video generated! Downloading...");const g=await re(h),se=URL.createObjectURL(g);P(se),G(""),V(!1)}else throw new Error("Video generation completed, but no URI was found.");return}l=await ie(l),l.done?x():(s=(s+1)%t.length,G(t[s]),setTimeout(x,1e4))}catch(h){const g=h instanceof Error?h.message:"An error occurred during video polling.";i(g),V(!1)}};setTimeout(x,1e4)}catch(l){const x=l instanceof Error?l.message:"Failed to start video generation.";i(x),V(!1)}},U=(t,s,l,x,h)=>e.jsxs("div",{children:[e.jsx("label",{htmlFor:t,className:"block text-sm font-medium text-slate-300 mb-2",children:s}),e.jsx("select",{id:t,value:l,onChange:x,disabled:r,className:"w-full p-2 bg-slate-900 border border-slate-600 rounded-md text-slate-200 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-all duration-300",children:h.map(g=>e.jsx("option",{value:g,children:g},g))})]}),q=()=>e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsxs("svg",{className:"animate-spin h-8 w-8 text-cyan-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})});return e.jsx("div",{className:"container mx-auto py-12 px-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("div",{className:"inline-flex items-center justify-center bg-slate-800 p-3 rounded-full mb-4 border border-slate-700",children:e.jsx(K,{className:"w-8 h-8 text-cyan-400"})}),e.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-white",children:"AI Prompt Generator"}),e.jsx("p",{className:"mt-4 text-lg text-slate-400 max-w-3xl mx-auto",children:"Ubah ide sederhana atau gambar Anda menjadi prompt yang sangat detail untuk model AI generatif."})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-xl border border-slate-700 shadow-2xl shadow-slate-900/50",children:[e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"1. Pilih Sumber Anda"}),e.jsx("div",{className:"flex justify-center mb-6",children:e.jsxs("div",{className:"bg-slate-900 p-1 rounded-lg flex gap-1",children:[e.jsx("button",{onClick:()=>o("text"),disabled:r,className:`px-6 py-2 rounded-md text-sm font-semibold transition-colors ${n==="text"?"bg-cyan-500 text-white":"text-slate-300 hover:bg-slate-700"}`,children:"Dari Teks"}),e.jsx("button",{onClick:()=>o("image"),disabled:r,className:`px-6 py-2 rounded-md text-sm font-semibold transition-colors ${n==="image"?"bg-cyan-500 text-white":"text-slate-300 hover:bg-slate-700"}`,children:"Dari Gambar"})]})}),n==="text"?e.jsxs("div",{children:[e.jsx("label",{htmlFor:"concept-input",className:"block text-sm font-medium text-slate-300 mb-2",children:"Jelaskan Konsep Anda"}),e.jsx("textarea",{id:"concept-input",value:c,onChange:t=>M(t.target.value),placeholder:"Contoh: Seekor naga emas terbang di atas pegunungan yang tertutup salju saat matahari terbenam",className:"w-full h-28 p-4 bg-slate-900 border border-slate-600 rounded-md text-slate-200 font-sans focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-all duration-300 resize-y",disabled:r,"aria-label":"Deskripsi konsep"})]}):e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Unggah Gambar"}),e.jsxs("div",{className:`flex flex-col items-center justify-center p-6 border-2 border-dashed rounded-lg transition-colors ${X?"border-cyan-400 bg-slate-700/50":"border-slate-600"}`,onDragEnter:()=>E(!0),onDragLeave:()=>E(!1),onDragOver:t=>t.preventDefault(),onDrop:t=>{t.preventDefault(),E(!1),O(t.dataTransfer.files)},children:[e.jsx("input",{ref:A,type:"file",accept:"image/*",className:"hidden",onChange:t=>O(t.target.files)}),N?e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:N,alt:"Image preview",className:"max-h-40 rounded-lg"}),e.jsx("button",{onClick:Z,className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full h-6 w-6 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity","aria-label":"Remove image",children:"×"})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-slate-500 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l-1.586-1.586a2 2 0 010-2.828L14 8"})}),e.jsx("p",{className:"text-slate-400 mb-2",children:"Letakkan atau Pilih File"}),e.jsx("button",{onClick:()=>A.current?.click(),className:"bg-cyan-500 text-white font-semibold py-2 px-4 rounded-md hover:bg-cyan-600 transition-colors",children:"Telusuri File"})]})]})]}),e.jsx("h3",{className:"text-xl font-bold text-white mt-6 mb-4",children:"2. Sesuaikan Opsi Anda"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"md:col-span-1",children:U("styleSelect","Gaya Seni",S,Y,W)}),U("aspectRatioSelect","Rasio Aspek Gambar",u,t=>v(t.target.value),["1:1","16:9","9:16","4:3","3:4"]),U("durationSelect","Durasi Video (detik)",m,t=>D(t.target.value),["5","10","15","30","60"])]}),S==="Custom"&&e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{htmlFor:"customStyleInput",className:"block text-sm font-medium text-slate-300 mb-2",children:"Gaya Seni Kustom"}),e.jsx("input",{type:"text",id:"customStyleInput",value:f,onChange:t=>d(t.target.value),disabled:r,className:"w-full p-2 bg-slate-900 border border-slate-600 rounded-md text-slate-200 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-all duration-300",placeholder:"misalnya: Psychedelic, Vaporwave, dll."})]})]}),e.jsx("div",{className:"p-6 border-t border-slate-700",children:e.jsx("button",{onClick:_,disabled:r||n==="text"&&!c.trim()||n==="image"&&!p,className:"w-full flex items-center justify-center gap-3 bg-cyan-500 text-white font-semibold py-3 px-6 rounded-md hover:bg-cyan-600 transition-colors duration-300 disabled:bg-slate-600 disabled:cursor-not-allowed shadow-lg shadow-cyan-500/20 disabled:shadow-none text-lg",children:r?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{children:"Menghasilkan..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"w-6 h-6"}),e.jsx("span",{children:"Hasilkan Prompt"})]})})})]}),e.jsxs("div",{className:"mt-8",children:[z&&!r&&e.jsx("div",{role:"alert",className:"bg-red-500/20 border border-red-500 text-red-300 p-4 rounded-md mb-6",children:z}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsx(J,{title:"Prompt Gambar",prompt:C,isLoading:r}),e.jsx(J,{title:"Prompt Video",prompt:I,isLoading:r,isMarkdown:!0})]})]}),C&&I&&!r&&e.jsx("div",{className:"mt-8 bg-slate-800/50 rounded-xl border border-slate-700 shadow-2xl shadow-slate-900/50",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"3. Hasilkan Media"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 items-start",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-lg font-semibold text-white",children:"Gambar"}),!j&&!F&&e.jsxs("button",{onClick:ee,disabled:F,className:"w-full flex items-center justify-center gap-2 bg-indigo-500 text-white font-semibold py-2 px-4 rounded-md hover:bg-indigo-600 transition-colors disabled:bg-slate-600",children:[e.jsx(ce,{className:"w-5 h-5"}),"Hasilkan Gambar"]}),e.jsx("div",{className:"aspect-square bg-slate-900/70 rounded-lg flex items-center justify-center border border-slate-700",children:F?e.jsx(q,{}):j?e.jsx("img",{src:`data:image/jpeg;base64,${j}`,alt:"Generated by AI",className:"rounded-lg w-full h-full object-contain"}):e.jsx("p",{className:"text-slate-500 italic",children:"Gambar yang dihasilkan akan muncul di sini."})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-lg font-semibold text-white",children:"Video"}),j&&!L&&e.jsxs("button",{onClick:te,disabled:L,className:"w-full flex items-center justify-center gap-2 bg-rose-500 text-white font-semibold py-2 px-4 rounded-md hover:bg-rose-600 transition-colors disabled:bg-slate-600",children:[e.jsx(de,{className:"w-5 h-5"}),"Hasilkan Video"]}),e.jsx("div",{className:"aspect-square bg-slate-900/70 rounded-lg flex items-center justify-center border border-slate-700",children:L?e.jsxs("div",{className:"text-center p-4",children:[e.jsx(q,{}),e.jsx("p",{className:"text-slate-300 mt-4 text-sm",children:Q})]}):w?e.jsx("video",{src:w,controls:!0,className:"rounded-lg w-full h-full object-contain"}):e.jsx("p",{className:"text-slate-500 italic",children:"Video yang dihasilkan akan muncul di sini."})})]})]})]})})]})})};export{pe as default};
