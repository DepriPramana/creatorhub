import{r as a,j as e}from"./index-BJwgowP_.js";import{g as le,a as re,s as ne,c as ie,f as oe}from"./geminiService-CCzdtClk.js";import{M as K}from"./MagicWandIcon-BG8FXgcL.js";import{C as ce}from"./ClipboardIcon-iWJzIE1k.js";import{C as de,V as me}from"./VideoCameraIcon-B09VSxbw.js";const Q=({title:l,prompt:c,isLoading:d,isMarkdown:M=!1})=>{const[g,y]=a.useState(!1),k=()=>{navigator.clipboard.writeText(c),y(!0),setTimeout(()=>y(!1),2e3)},S=C=>C.split(`
`).map((p,b)=>{const m=`line-${b}`;if(p.trim()==="")return e.jsx("div",{className:"h-2"},m);const h=v=>v.split(/(\*\*.*?\*\*)/g).map((u,D)=>u.startsWith("**")&&u.endsWith("**")?e.jsx("strong",{children:u.slice(2,-2)},`${m}-b-${D}`):u);if(p.trim().startsWith("* ")){const v=p.trim().substring(2);return e.jsxs("div",{className:"flex items-start pl-4",children:[e.jsx("span",{className:"mr-2 mt-1",children:" •"}),e.jsx("span",{children:h(v)})]},m)}return e.jsx("p",{className:"mb-1",children:h(p)},m)});return e.jsxs("div",{className:"bg-slate-900/70 rounded-lg border border-slate-700",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-slate-700",children:[e.jsx("h4",{className:"text-lg font-semibold text-white",children:l}),c&&!d&&e.jsxs("button",{onClick:k,className:"flex items-center gap-2 text-sm text-slate-300 hover:text-cyan-400 transition-colors","aria-label":`Copy ${l}`,children:[e.jsx(ce,{className:"w-5 h-5"}),e.jsx("span",{children:g?"Disalin!":"Salin"})]})]}),e.jsx("div",{className:"p-4 min-h-[150px]",children:d?e.jsxs("div",{className:"space-y-3 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-slate-700 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-slate-700 rounded w-full"}),e.jsx("div",{className:"h-4 bg-slate-700 rounded w-5/6"}),e.jsx("div",{className:"h-4 bg-slate-700 rounded w-1/2"})]}):c?M?e.jsx("div",{className:"text-slate-300 font-sans text-sm",children:S(c)}):e.jsx("p",{className:"text-slate-300 whitespace-pre-wrap break-words font-sans text-sm",children:c}):e.jsx("p",{className:"text-slate-500 italic",children:"Prompt yang dihasilkan akan muncul di sini."})})]})},$=["Chibi Style Cartoon","Photorealistic","Digital Painting","Concept Art","3D Render","Anime / Manga","Pixel Art","Watercolor","Vector Art","Low Poly","Cyberpunk","Steampunk","Fantasy Art","Synthwave","Minimalist","Custom"],be=()=>{const[l,c]=a.useState("text"),[d,M]=a.useState("A chibi-style girl walking happily with headphones on a sunny street."),[g,y]=a.useState(null),[k,S]=a.useState(null),[C,p]=a.useState($[0]),[b,m]=a.useState($[0]),[h,v]=a.useState("1:1"),[u,D]=a.useState("15"),[I,T]=a.useState(""),[P,H]=a.useState(""),[n,O]=a.useState(!1),[z,i]=a.useState(null),[f,R]=a.useState(null),[F,B]=a.useState(!1),[w,V]=a.useState(null),[L,G]=a.useState(!1),[X,N]=a.useState(""),[Y,E]=a.useState(!1),A=a.useRef(null);a.useEffect(()=>()=>{w&&URL.revokeObjectURL(w)},[w]);const Z=t=>{const s=t.target.value;p(s),m(s==="Custom"?"":s)},q=t=>{if(t&&t[0]){const s=t[0];y(s);const r=new FileReader;r.onloadend=()=>{S(r.result)},r.readAsDataURL(s)}},_=()=>{y(null),S(null),A.current&&(A.current.value="")},ee=a.useCallback(async()=>{if(l==="text"&&!d.trim()){i("Harap masukkan konsep untuk menghasilkan prompt.");return}if(l==="image"&&!g){i("Silakan unggah file gambar.");return}if(!b.trim()){i("Harap tentukan Gaya Seni kustom atau pilih salah satu dari daftar.");return}O(!0),i(null),T(""),H(""),R(null),V(null);const t={concept:l==="text"?d:"",file:l==="image"?g:void 0,style:b,aspectRatio:h,duration:u};try{const s=await le(t);T(s.imagePrompt),H(s.videoPrompt)}catch(s){const r=s instanceof Error?s.message:"Terjadi kesalahan yang tidak diketahui.";i(r),console.error(s)}finally{O(!1)}},[d,g,l,b,h,u]),te=async()=>{if(I){B(!0),R(null),V(null),i(null);try{const t=await re(I,h);R(t)}catch(t){const s=t instanceof Error?t.message:"Terjadi kesalahan yang tidak diketahui.";i(s)}finally{B(!1)}}},se=async()=>{if(!P||!f)return;G(!0),V(null),i(null);const t=["Warming up the video engine...","Conceptualizing the motion...","Compositing scenes, this can take a few minutes...","Applying digital cinematography...","Adding special effects and filters...","Rendering the final frames...","Finalizing render, almost there!"];let s=0;N(t[s]);try{let r=await ne(P,f);const j=async()=>{try{const o=await ie(r);if(r=o,o.done){const x=o.response?.generatedVideos?.[0]?.video?.uri;if(x){N("Video generated! Downloading...");const W=await oe(x),ae=URL.createObjectURL(W);V(ae),N(""),G(!1)}else{const W=o.error?`API Error: ${JSON.stringify(o.error)}`:"No URI found in the final response.";throw new Error(`Video generation completed but failed. ${W}`)}}else s=(s+1)%t.length,N(t[s]),setTimeout(j,1e4)}catch(o){const x=o instanceof Error?o.message:"An error occurred while checking video status.";i(x),G(!1),N("")}};setTimeout(j,1e4)}catch(r){const j=r instanceof Error?r.message:"Failed to start video generation.";i(j),G(!1)}},U=(t,s,r,j,o)=>e.jsxs("div",{children:[e.jsx("label",{htmlFor:t,className:"block text-sm font-medium text-slate-300 mb-2",children:s}),e.jsx("select",{id:t,value:r,onChange:j,disabled:n,className:"w-full p-2 bg-slate-900 border border-slate-600 rounded-md text-slate-200 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-all duration-300",children:o.map(x=>e.jsx("option",{value:x,children:x},x))})]}),J=()=>e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsxs("svg",{className:"animate-spin h-8 w-8 text-cyan-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})});return e.jsx("div",{className:"container mx-auto py-12 px-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("div",{className:"inline-flex items-center justify-center bg-slate-800 p-3 rounded-full mb-4 border border-slate-700",children:e.jsx(K,{className:"w-8 h-8 text-cyan-400"})}),e.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-white",children:"AI Prompt Generator"}),e.jsx("p",{className:"mt-4 text-lg text-slate-400 max-w-3xl mx-auto",children:"Ubah ide sederhana atau gambar Anda menjadi prompt yang sangat detail untuk model AI generatif."})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-xl border border-slate-700 shadow-2xl shadow-slate-900/50",children:[e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"1. Pilih Sumber Anda"}),e.jsx("div",{className:"flex justify-center mb-6",children:e.jsxs("div",{className:"bg-slate-900 p-1 rounded-lg flex gap-1",children:[e.jsx("button",{onClick:()=>c("text"),disabled:n,className:`px-6 py-2 rounded-md text-sm font-semibold transition-colors ${l==="text"?"bg-cyan-500 text-white":"text-slate-300 hover:bg-slate-700"}`,children:"Dari Teks"}),e.jsx("button",{onClick:()=>c("image"),disabled:n,className:`px-6 py-2 rounded-md text-sm font-semibold transition-colors ${l==="image"?"bg-cyan-500 text-white":"text-slate-300 hover:bg-slate-700"}`,children:"Dari Gambar"})]})}),l==="text"?e.jsxs("div",{children:[e.jsx("label",{htmlFor:"concept-input",className:"block text-sm font-medium text-slate-300 mb-2",children:"Jelaskan Konsep Anda"}),e.jsx("textarea",{id:"concept-input",value:d,onChange:t=>M(t.target.value),placeholder:"Contoh: Seekor naga emas terbang di atas pegunungan yang tertutup salju saat matahari terbenam",className:"w-full h-28 p-4 bg-slate-900 border border-slate-600 rounded-md text-slate-200 font-sans focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-all duration-300 resize-y",disabled:n,"aria-label":"Deskripsi konsep"})]}):e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Unggah Gambar"}),e.jsxs("div",{className:`flex flex-col items-center justify-center p-6 border-2 border-dashed rounded-lg transition-colors ${Y?"border-cyan-400 bg-slate-700/50":"border-slate-600"}`,onDragEnter:()=>E(!0),onDragLeave:()=>E(!1),onDragOver:t=>t.preventDefault(),onDrop:t=>{t.preventDefault(),E(!1),q(t.dataTransfer.files)},children:[e.jsx("input",{ref:A,type:"file",accept:"image/*",className:"hidden",onChange:t=>q(t.target.files)}),k?e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:k,alt:"Image preview",className:"max-h-40 rounded-lg"}),e.jsx("button",{onClick:_,className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full h-6 w-6 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity","aria-label":"Remove image",children:"×"})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-slate-500 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l-1.586-1.586a2 2 0 010-2.828L14 8"})}),e.jsx("p",{className:"text-slate-400 mb-2",children:"Letakkan atau Pilih File"}),e.jsx("button",{onClick:()=>A.current?.click(),className:"bg-cyan-500 text-white font-semibold py-2 px-4 rounded-md hover:bg-cyan-600 transition-colors",children:"Telusuri File"})]})]})]}),e.jsx("h3",{className:"text-xl font-bold text-white mt-6 mb-4",children:"2. Sesuaikan Opsi Anda"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"md:col-span-1",children:U("styleSelect","Gaya Seni",C,Z,$)}),U("aspectRatioSelect","Rasio Aspek Gambar",h,t=>v(t.target.value),["1:1","16:9","9:16","4:3","3:4"]),U("durationSelect","Durasi Video (detik)",u,t=>D(t.target.value),["5","10","15","30","60"])]}),C==="Custom"&&e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{htmlFor:"customStyleInput",className:"block text-sm font-medium text-slate-300 mb-2",children:"Gaya Seni Kustom"}),e.jsx("input",{type:"text",id:"customStyleInput",value:b,onChange:t=>m(t.target.value),disabled:n,className:"w-full p-2 bg-slate-900 border border-slate-600 rounded-md text-slate-200 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-all duration-300",placeholder:"misalnya: Psychedelic, Vaporwave, dll."})]})]}),e.jsx("div",{className:"p-6 border-t border-slate-700",children:e.jsx("button",{onClick:ee,disabled:n||l==="text"&&!d.trim()||l==="image"&&!g,className:"w-full flex items-center justify-center gap-3 bg-cyan-500 text-white font-semibold py-3 px-6 rounded-md hover:bg-cyan-600 transition-colors duration-300 disabled:bg-slate-600 disabled:cursor-not-allowed shadow-lg shadow-cyan-500/20 disabled:shadow-none text-lg",children:n?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{children:"Menghasilkan..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(K,{className:"w-6 h-6"}),e.jsx("span",{children:"Hasilkan Prompt"})]})})})]}),e.jsxs("div",{className:"mt-8",children:[z&&!n&&e.jsx("div",{role:"alert",className:"bg-red-500/20 border border-red-500 text-red-300 p-4 rounded-md mb-6",children:z}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsx(Q,{title:"Prompt Gambar",prompt:I,isLoading:n}),e.jsx(Q,{title:"Prompt Video",prompt:P,isLoading:n,isMarkdown:!0})]})]}),I&&P&&!n&&e.jsx("div",{className:"mt-8 bg-slate-800/50 rounded-xl border border-slate-700 shadow-2xl shadow-slate-900/50",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"3. Hasilkan Media"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 items-start",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-lg font-semibold text-white",children:"Gambar"}),!f&&!F&&e.jsxs("button",{onClick:te,disabled:F,className:"w-full flex items-center justify-center gap-2 bg-indigo-500 text-white font-semibold py-2 px-4 rounded-md hover:bg-indigo-600 transition-colors disabled:bg-slate-600",children:[e.jsx(de,{className:"w-5 h-5"}),"Hasilkan Gambar"]}),e.jsx("div",{className:"aspect-square bg-slate-900/70 rounded-lg flex items-center justify-center border border-slate-700",children:F?e.jsx(J,{}):f?e.jsx("img",{src:`data:image/jpeg;base64,${f}`,alt:"Generated by AI",className:"rounded-lg w-full h-full object-contain"}):e.jsx("p",{className:"text-slate-500 italic",children:"Gambar yang dihasilkan akan muncul di sini."})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-lg font-semibold text-white",children:"Video"}),f&&!L&&e.jsxs("button",{onClick:se,disabled:L,className:"w-full flex items-center justify-center gap-2 bg-rose-500 text-white font-semibold py-2 px-4 rounded-md hover:bg-rose-600 transition-colors disabled:bg-slate-600",children:[e.jsx(me,{className:"w-5 h-5"}),"Hasilkan Video"]}),e.jsx("div",{className:"aspect-square bg-slate-900/70 rounded-lg flex items-center justify-center border border-slate-700",children:L?e.jsxs("div",{className:"text-center p-4",children:[e.jsx(J,{}),e.jsx("p",{className:"text-slate-300 mt-4 text-sm",children:X})]}):w?e.jsx("video",{src:w,controls:!0,className:"rounded-lg w-full h-full object-contain"}):e.jsx("p",{className:"text-slate-500 italic",children:"Video yang dihasilkan akan muncul di sini."})})]})]})]})})]})})};export{be as default};
