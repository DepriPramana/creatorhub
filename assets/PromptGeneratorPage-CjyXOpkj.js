import{r as s,j as e}from"./index-CEOJ-Vmk.js";import{g as ue,a as ge,s as xe,c as he,f as pe}from"./geminiService-C_KpCTSa.js";import{M as U}from"./MagicWandIcon-CbonRXVH.js";import{C as be}from"./ClipboardIcon-9FM9U_wy.js";import{C as fe,V as je}from"./VideoCameraIcon-DeXbU0pp.js";import{D as ve}from"./DownloadIcon-Bo3H4JFL.js";const Q=({title:n,prompt:g,isLoading:d,onPromptChange:f})=>{const[x,h]=s.useState(!1),j=()=>{navigator.clipboard.writeText(g),h(!0),setTimeout(()=>h(!1),2e3)};return e.jsxs("div",{className:"bg-slate-900/70 rounded-lg border border-slate-700 flex flex-col",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-slate-700",children:[e.jsx("h4",{className:"text-lg font-semibold text-white",children:n}),g&&!d&&e.jsxs("button",{onClick:j,className:"flex items-center gap-2 text-sm text-slate-300 hover:text-cyan-400 transition-colors","aria-label":`Copy ${n}`,children:[e.jsx(be,{className:"w-5 h-5"}),e.jsx("span",{children:x?"Disalin!":"Salin"})]})]}),e.jsx("div",{className:"p-4 flex-grow",children:d?e.jsxs("div",{className:"space-y-3 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-slate-700 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-slate-700 rounded w-full"}),e.jsx("div",{className:"h-4 bg-slate-700 rounded w-5/6"}),e.jsx("div",{className:"h-4 bg-slate-700 rounded w-1/2"})]}):g?e.jsx("textarea",{value:g,onChange:v=>f?.(v.target.value),readOnly:!f,className:"w-full h-full min-h-[200px] p-3 bg-slate-800 border border-slate-600 rounded-md text-slate-200 font-sans text-sm focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-all duration-300 resize-y","aria-label":`${n} prompt text`}):e.jsx("div",{className:"flex items-center justify-center min-h-[200px]",children:e.jsx("p",{className:"text-slate-500 italic",children:"Prompt yang dihasilkan akan muncul di sini."})})})]})},O=["Chibi Style Cartoon","Photorealistic","Digital Painting","Concept Art","3D Render","Anime / Manga","Pixel Art","Watercolor","Vector Art","Low Poly","Cyberpunk","Steampunk","Fantasy Art","Synthwave","Minimalist","Custom"],X=[{id:"imagen-4.0-generate-preview-06-06",name:"Imagen 4 (Preview)"},{id:"imagen-4.0-ultra-generate-preview-06-06",name:"Imagen 4 Ultra (Preview)"},{id:"imagen-3.0-generate-002",name:"Imagen 3.0 002 model"}],Y=[{id:"veo-3.0-generate-preview",name:"VEO 3.0 (Preview)"},{id:"veo-2.0-generate-001",name:"VEO 2.0"}],Ie=()=>{const[n,g]=s.useState("text"),[d,f]=s.useState("A chibi-style girl walking happily with headphones on a sunny street."),[x,h]=s.useState(null),[j,v]=s.useState(null),[$,Z]=s.useState(O[0]),[y,M]=s.useState(O[0]),[w,ee]=s.useState("1:1"),[V,te]=s.useState("15"),[z,ae]=s.useState(Y[0].id),[H,se]=s.useState(X[2].id),[N,G]=s.useState(""),[k,A]=s.useState(""),[r,T]=s.useState(!1),[B,c]=s.useState(null),[m,D]=s.useState(null),[S,W]=s.useState(!1),[p,C]=s.useState(null),[F,I]=s.useState(!1),[le,b]=s.useState(""),[ne,R]=s.useState(!1),P=s.useRef(null);s.useEffect(()=>()=>{p&&URL.revokeObjectURL(p)},[p]);const re=t=>{const a=t.target.value;Z(a),M(a==="Custom"?"":a)},_=t=>{if(t&&t[0]){const a=t[0];h(a);const l=new FileReader;l.onloadend=()=>{v(l.result)},l.readAsDataURL(a)}},ie=()=>{h(null),v(null),P.current&&(P.current.value="")},oe=s.useCallback(async()=>{if(n==="text"&&!d.trim()){c("Harap masukkan konsep untuk menghasilkan prompt.");return}if(n==="image"&&!x){c("Silakan unggah file gambar.");return}if(!y.trim()){c("Harap tentukan Gaya Seni kustom atau pilih salah satu dari daftar.");return}T(!0),c(null),G(""),A(""),D(null),C(null);const t={concept:n==="text"?d:"",file:n==="image"?x:void 0,style:y,aspectRatio:w,duration:V};try{const a=await ue(t);G(a.imagePrompt),A(a.videoPrompt)}catch(a){const l=a instanceof Error?a.message:"Terjadi kesalahan yang tidak diketahui.";c(l),console.error(a)}finally{T(!1)}},[d,x,n,y,w,V]),q=async()=>{if(N){W(!0),D(null),C(null),c(null);try{const t=await ge(N,w,H);D(t)}catch(t){const a=t instanceof Error?t.message:"Terjadi kesalahan yang tidak diketahui.";c(a)}finally{W(!1)}}},de=s.useCallback(()=>{if(!m)return;const t=document.createElement("a");t.href=`data:image/jpeg;base64,${m}`;const l=d.replace(/[^a-z0-9\s]/gi,"").substring(0,30).trim().replace(/\s+/g,"_")||"ai_generated_image";t.download=`${l}.jpeg`,document.body.appendChild(t),t.click(),document.body.removeChild(t)},[m,d]),ce=async()=>{if(!k||!m)return;I(!0),C(null),c(null);const t=["Warming up the video engine...","Conceptualizing the motion...","Compositing scenes, this can take a few minutes...","Applying digital cinematography...","Adding special effects and filters...","Rendering the final frames...","Finalizing render, almost there!"];let a=0;b(t[a]);try{let l=await xe(k,m,z);const u=async()=>{try{const i=await he(l);if(l=i,i.done){const o=i.response?.generatedVideos?.[0]?.video?.uri;if(o){b("Video generated! Downloading...");const L=await pe(o),me=URL.createObjectURL(L);C(me),b(""),I(!1)}else{const L=i.error?`API Error: ${JSON.stringify(i.error)}`:"No URI found in the final response.";throw new Error(`Video generation completed but failed. ${L}`)}}else a=(a+1)%t.length,b(t[a]),setTimeout(u,1e4)}catch(i){const o=i instanceof Error?i.message:"An error occurred while checking video status.";c(o),I(!1),b("")}};setTimeout(u,1e4)}catch(l){const u=l instanceof Error?l.message:"Failed to start video generation.";c(u),I(!1)}},E=(t,a,l,u,i)=>e.jsxs("div",{children:[e.jsx("label",{htmlFor:t,className:"block text-sm font-medium text-slate-300 mb-2",children:a}),e.jsx("select",{id:t,value:l,onChange:u,disabled:r,className:"w-full p-2 bg-slate-900 border border-slate-600 rounded-md text-slate-200 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-all duration-300",children:i.map(o=>e.jsx("option",{value:o,children:o},o))})]}),J=(t,a,l,u,i)=>e.jsxs("div",{children:[e.jsx("label",{htmlFor:t,className:"block text-sm font-medium text-slate-300 mb-2",children:a}),e.jsx("select",{id:t,value:l,onChange:u,disabled:r,className:"w-full p-2 bg-slate-900 border border-slate-600 rounded-md text-slate-200 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-all duration-300",children:i.map(o=>e.jsx("option",{value:o.id,children:o.name},o.id))})]}),K=()=>e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsxs("svg",{className:"animate-spin h-8 w-8 text-cyan-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})});return e.jsx("div",{className:"container mx-auto py-12 px-4",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("div",{className:"inline-flex items-center justify-center bg-slate-800 p-3 rounded-full mb-4 border border-slate-700",children:e.jsx(U,{className:"w-8 h-8 text-cyan-400"})}),e.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-white",children:"AI Prompt Generator"}),e.jsx("p",{className:"mt-4 text-lg text-slate-400 max-w-3xl mx-auto",children:"Ubah ide sederhana atau gambar Anda menjadi prompt yang sangat detail untuk model AI generatif."})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-xl border border-slate-700 shadow-2xl shadow-slate-900/50",children:[e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"1. Pilih Sumber Anda"}),e.jsx("div",{className:"flex justify-center mb-6",children:e.jsxs("div",{className:"bg-slate-900 p-1 rounded-lg flex gap-1",children:[e.jsx("button",{onClick:()=>g("text"),disabled:r,className:`px-6 py-2 rounded-md text-sm font-semibold transition-colors ${n==="text"?"bg-cyan-500 text-white":"text-slate-300 hover:bg-slate-700"}`,children:"Dari Teks"}),e.jsx("button",{onClick:()=>g("image"),disabled:r,className:`px-6 py-2 rounded-md text-sm font-semibold transition-colors ${n==="image"?"bg-cyan-500 text-white":"text-slate-300 hover:bg-slate-700"}`,children:"Dari Gambar"})]})}),n==="text"?e.jsxs("div",{children:[e.jsx("label",{htmlFor:"concept-input",className:"block text-sm font-medium text-slate-300 mb-2",children:"Jelaskan Konsep Anda"}),e.jsx("textarea",{id:"concept-input",value:d,onChange:t=>f(t.target.value),placeholder:"Contoh: Seekor naga emas terbang di atas pegunungan yang tertutup salju saat matahari terbenam",className:"w-full h-28 p-4 bg-slate-900 border border-slate-600 rounded-md text-slate-200 font-sans focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-all duration-300 resize-y",disabled:r,"aria-label":"Deskripsi konsep"})]}):e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Unggah Gambar"}),e.jsxs("div",{className:`flex flex-col items-center justify-center p-6 border-2 border-dashed rounded-lg transition-colors ${ne?"border-cyan-400 bg-slate-700/50":"border-slate-600"}`,onDragEnter:()=>R(!0),onDragLeave:()=>R(!1),onDragOver:t=>t.preventDefault(),onDrop:t=>{t.preventDefault(),R(!1),_(t.dataTransfer.files)},children:[e.jsx("input",{ref:P,type:"file",accept:"image/*",className:"hidden",onChange:t=>_(t.target.files)}),j?e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:j,alt:"Image preview",className:"max-h-40 rounded-lg"}),e.jsx("button",{onClick:ie,className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full h-6 w-6 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity","aria-label":"Remove image",children:"Ã—"})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-slate-500 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l-1.586-1.586a2 2 0 010-2.828L14 8"})}),e.jsx("p",{className:"text-slate-400 mb-2",children:"Letakkan atau Pilih File"}),e.jsx("button",{onClick:()=>P.current?.click(),className:"bg-cyan-500 text-white font-semibold py-2 px-4 rounded-md hover:bg-cyan-600 transition-colors",children:"Telusuri File"})]})]})]}),e.jsx("h3",{className:"text-xl font-bold text-white mt-6 mb-4",children:"2. Sesuaikan Opsi Anda"}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[E("styleSelect","Gaya Seni",$,re,O),E("aspectRatioSelect","Rasio Aspek Gambar",w,t=>ee(t.target.value),["1:1","16:9","9:16","4:3","3:4"]),J("imageModelSelect","Model Gambar",H,t=>se(t.target.value),X),E("durationSelect","Durasi Video (detik)",V,t=>te(t.target.value),["5","10","15","30","60"]),J("veoModelSelect","Model Video",z,t=>ae(t.target.value),Y)]}),$==="Custom"&&e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{htmlFor:"customStyleInput",className:"block text-sm font-medium text-slate-300 mb-2",children:"Gaya Seni Kustom"}),e.jsx("input",{type:"text",id:"customStyleInput",value:y,onChange:t=>M(t.target.value),disabled:r,className:"w-full p-2 bg-slate-900 border border-slate-600 rounded-md text-slate-200 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-all duration-300",placeholder:"misalnya: Psychedelic, Vaporwave, dll."})]})]}),e.jsx("div",{className:"p-6 border-t border-slate-700",children:e.jsx("button",{onClick:oe,disabled:r||n==="text"&&!d.trim()||n==="image"&&!x,className:"w-full flex items-center justify-center gap-3 bg-cyan-500 text-white font-semibold py-3 px-6 rounded-md hover:bg-cyan-600 transition-colors duration-300 disabled:bg-slate-600 disabled:cursor-not-allowed shadow-lg shadow-cyan-500/20 disabled:shadow-none text-lg",children:r?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{children:"Menghasilkan..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(U,{className:"w-6 h-6"}),e.jsx("span",{children:"Hasilkan Prompt"})]})})})]}),e.jsxs("div",{className:"mt-8",children:[B&&!r&&e.jsx("div",{role:"alert",className:"bg-red-500/20 border border-red-500 text-red-300 p-4 rounded-md mb-6",children:B}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsx(Q,{title:"Prompt Gambar",prompt:N,isLoading:r,onPromptChange:G}),e.jsx(Q,{title:"Prompt Video",prompt:k,isLoading:r,onPromptChange:A})]})]}),N&&k&&!r&&e.jsx("div",{className:"mt-8 bg-slate-800/50 rounded-xl border border-slate-700 shadow-2xl shadow-slate-900/50",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"3. Hasilkan Media"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 items-start",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-lg font-semibold text-white",children:"Gambar"}),!m&&!S&&e.jsxs("button",{onClick:q,disabled:S,className:"w-full flex items-center justify-center gap-2 bg-indigo-500 text-white font-semibold py-2 px-4 rounded-md hover:bg-indigo-600 transition-colors disabled:bg-slate-600",children:[e.jsx(fe,{className:"w-5 h-5"}),"Hasilkan Gambar"]}),e.jsx("div",{className:"aspect-square bg-slate-900/70 rounded-lg flex items-center justify-center border border-slate-700",children:S?e.jsx(K,{}):m?e.jsx("img",{src:`data:image/jpeg;base64,${m}`,alt:"Generated by AI",className:"rounded-lg w-full h-full object-contain"}):e.jsx("p",{className:"text-slate-500 italic",children:"Gambar yang dihasilkan akan muncul di sini."})}),m&&!S&&e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("button",{onClick:q,className:"w-full flex items-center justify-center gap-2 bg-indigo-500 text-white font-semibold py-2 px-4 rounded-md hover:bg-indigo-600 transition-colors",children:[e.jsx(U,{className:"w-5 h-5"}),e.jsx("span",{children:"Hasilkan Ulang"})]}),e.jsxs("button",{onClick:de,className:"w-full flex items-center justify-center gap-2 bg-green-600 text-white font-semibold py-2 px-4 rounded-md hover:bg-green-700 transition-colors",children:[e.jsx(ve,{className:"w-5 h-5"}),e.jsx("span",{children:"Unduh Gambar"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-lg font-semibold text-white",children:"Video"}),m&&!F&&e.jsxs("button",{onClick:ce,disabled:F,className:"w-full flex items-center justify-center gap-2 bg-rose-500 text-white font-semibold py-2 px-4 rounded-md hover:bg-rose-600 transition-colors disabled:bg-slate-600",children:[e.jsx(je,{className:"w-5 h-5"}),"Hasilkan Video"]}),e.jsx("div",{className:"aspect-square bg-slate-900/70 rounded-lg flex items-center justify-center border border-slate-700",children:F?e.jsxs("div",{className:"text-center p-4",children:[e.jsx(K,{}),e.jsx("p",{className:"text-slate-300 mt-4 text-sm",children:le})]}):p?e.jsx("video",{src:p,controls:!0,className:"rounded-lg w-full h-full object-contain"}):e.jsx("p",{className:"text-slate-500 italic",children:"Video yang dihasilkan akan muncul di sini."})})]})]})]})})]})})};export{Ie as default};
