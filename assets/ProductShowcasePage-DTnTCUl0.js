import{j as e,r}from"./index-kSgl2PGI.js";import{m as Q,n as X,o as ee,p as M,s as te,c as se,f as ae}from"./geminiService-C_KpCTSa.js";import{D as oe}from"./DownloadIcon-B_b5zEdU.js";import{V as re}from"./VideoCameraIcon-C4-9DxUJ.js";import{S as le}from"./SparklesIcon-DordnRQr.js";const ie=o=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...o,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"})}),ne=o=>e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...o,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.625 12a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H8.25m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H12m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0h-.375M21 12c0 4.556-4.03 8.25-9 8.25a9.76 9.76 0 0 1-2.555-.337A5.972 5.972 0 0 1 5.41 20.97a5.969 5.969 0 0 1-.474-.065 4.48 4.48 0 0 0 .978-2.025c.09-.455.09-.934.09-1.425 0-4.556 4.03-8.25 9-8.25 4.97 0 9 3.694 9 8.25Z"})}),de=["Lookbook","B-roll","Outfit Builder"],U=["Studio Professional","Outdoor Urban","Cozy Cafe","Beachside","Futuristic Neon"],$=["Studio Lighting","Golden Hour","Dramatic Shadows","Soft Natural Light","High Key"],V=({title:o,description:L,files:u,onFilesChange:j,disabled:l=!1})=>{const[f,g]=r.useState(!1),h=r.useRef(null),m=r.useMemo(()=>u.length>0?URL.createObjectURL(u[0]):null,[u]);r.useEffect(()=>()=>{m&&URL.revokeObjectURL(m)},[m]);const v=n=>{n&&n.length>0&&j([n[0]])},i=n=>{n.stopPropagation(),j([]),h.current&&(h.current.value="")},y=n=>{n.preventDefault(),g(!1),l||v(n.dataTransfer.files)};return e.jsxs("div",{className:`relative flex flex-col items-center justify-center p-2 border-2 border-dashed rounded-lg transition-colors duration-200 h-48
        ${f?"border-cyan-400 bg-slate-700/50":"border-slate-600"}
        ${l?"opacity-50 cursor-not-allowed":"cursor-pointer hover:border-cyan-500"}`,onDragEnter:()=>!l&&g(!0),onDragLeave:()=>g(!1),onDragOver:n=>n.preventDefault(),onDrop:y,onClick:()=>!l&&!m&&h.current?.click(),children:[e.jsx("input",{ref:h,type:"file",accept:"image/png, image/jpeg, image/webp",className:"hidden",disabled:l,onChange:n=>v(n.target.files)}),m?e.jsxs("div",{className:"relative group w-auto h-full p-2",children:[e.jsx("img",{src:m,alt:"preview",className:"h-full w-auto object-contain rounded-md"}),e.jsx("button",{onClick:i,disabled:l,className:"absolute top-0 right-0 bg-black/60 text-white rounded-full h-6 w-6 flex items-center justify-center text-lg opacity-0 group-hover:opacity-100 transition-opacity disabled:opacity-50","aria-label":"Remove image",children:"×"})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center text-center p-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-8 h-8 text-slate-500 mb-2",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"})}),e.jsx("p",{className:"text-slate-300 font-semibold text-sm",children:o}),e.jsx("p",{className:"text-slate-500 text-xs mt-1",children:L})]})]})},he=()=>{const[o,L]=r.useState("B-roll"),[u,j]=r.useState([]),[l,f]=r.useState([]),[g,h]=r.useState(U[0]),[m,v]=r.useState($[0]),[i,y]=r.useState(!1),[n,x]=r.useState(null),[E,N]=r.useState(""),[P,k]=r.useState([]),[F,B]=r.useState(null),G=r.useRef(null),[A,R]=r.useState(!1),D=r.useMemo(()=>l.map(t=>URL.createObjectURL(t)),[l]);r.useEffect(()=>()=>{D.forEach(t=>URL.revokeObjectURL(t)),P.forEach(t=>{t.type==="video"&&URL.revokeObjectURL(t.data)})},[D,P]);const d=r.useCallback((t,s)=>{k(a=>a.map(c=>c.id===t?{...c,...s}:c))},[]),T=(t,s)=>{const a=document.createElement("a");a.href=t,a.download=`product-showcase-${s.replace("res-","")}.jpeg`,document.body.appendChild(a),a.click(),document.body.removeChild(a)},z=async t=>{d(t.id,{promptStatus:"generating"});try{const s=await ee(t.data);navigator.clipboard.writeText(s),d(t.id,{promptStatus:"copied"})}catch(s){x(s instanceof Error?s.message:"Failed to generate prompt."),d(t.id,{promptStatus:"idle"})}finally{setTimeout(()=>d(t.id,{promptStatus:"idle"}),2e3)}},W=async t=>{d(t.id,{promptStatus:"generating"});try{const s=await M(t.data);navigator.clipboard.writeText(s),d(t.id,{promptStatus:"copied"})}catch(s){x(s instanceof Error?s.message:"Failed to generate prompt."),d(t.id,{promptStatus:"idle"})}finally{setTimeout(()=>d(t.id,{promptStatus:"idle"}),2e3)}},Z=async t=>{if(t.type==="image")try{d(t.id,{videoStatus:"Generating video prompt..."});const s=await M(t.data);d(t.id,{videoStatus:"Starting video generation..."});const a=t.data.split(",")[1];let c=await te(s,a,"veo-2.0-generate-001");const I=["Compositing scenes...","Applying digital cinematography...","Rendering final frames...","Finalizing render, almost there!"];let b=0;const C=async()=>{try{const p=await se(c);if(c=p,p.done){const w=p.response?.generatedVideos?.[0]?.video?.uri;if(w){d(t.id,{videoStatus:"Downloading video..."});const K=await ae(w),Y=URL.createObjectURL(K);d(t.id,{type:"video",data:Y,videoStatus:null})}else throw new Error("Video generation failed to return a valid URI.")}else d(t.id,{videoStatus:I[b%I.length]}),b++,setTimeout(C,1e4)}catch(p){x(p instanceof Error?p.message:"Failed while polling video status."),d(t.id,{videoStatus:null})}};setTimeout(C,1e4)}catch(s){x(s instanceof Error?s.message:"Failed to generate video."),d(t.id,{videoStatus:null})}},O=t=>{if(t){const s=Array.from(t);f(a=>[...a,...s].filter((b,C,p)=>C===p.findIndex(w=>w.name===b.name&&w.size===b.size)).slice(0,5))}},H=t=>{f(s=>s.filter((a,c)=>c!==t))},q=t=>{t.preventDefault(),R(!1),i||O(t.dataTransfer.files)},J=async()=>{y(!0),x(null),N("Starting generation..."),k([]);try{const t=[];if(o==="B-roll"){if(l.length===0)throw new Error("Please upload a product.");for(let s=0;s<6;s++){N(`Generating lookbook image (${s+1} of 6)...`);const a=await Q({productFile:l[0],theme:g,lighting:m});t.push({id:`res-model-${s}`,type:"image",data:`data:image/jpeg;base64,${a}`,promptStatus:"idle"}),k([...t])}}else{if(u.length===0||l.length===0)throw new Error("Please upload a model and at least one product.");for(let s=0;s<6;s++){N(`Generating image (${s+1} of 6)...`);const a=await X({modelFile:u[0],productFiles:l,theme:g,lighting:m});t.push({id:`res-${s+1}`,type:"image",data:`data:image/jpeg;base64,${a}`,promptStatus:"idle"}),k([...t])}}}catch(t){x(t instanceof Error?t.message:"An unknown error occurred.")}finally{y(!1),N("")}},_=r.useMemo(()=>i?!0:o==="B-roll"?l.length===0:u.length===0||l.length===0,[i,o,u,l]),S=({number:t,title:s,children:a})=>e.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-xl border border-slate-700",children:[e.jsxs("h3",{className:"font-bold text-white mb-3",children:[e.jsx("span",{className:"bg-cyan-500 text-white rounded-full h-6 w-6 inline-flex items-center justify-center text-sm mr-2",children:t}),s]}),a]});return e.jsxs("div",{className:"container mx-auto py-12 px-4",children:[e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-white",children:"AI Product Showcase"}),e.jsx("p",{className:"mt-4 text-lg text-slate-400 max-w-3xl mx-auto",children:"Create stunning, AI-generated lookbooks or product B-rolls for your affiliate campaigns in seconds."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[e.jsxs("aside",{className:"md:col-span-1 flex flex-col gap-6",children:[e.jsx(S,{number:1,title:"Select Generation Mode",children:e.jsx("div",{className:"flex flex-col gap-2",children:de.map(t=>e.jsx("button",{onClick:()=>L(t),disabled:i,className:`w-full py-2 rounded-md font-semibold transition-colors ${o===t?"bg-cyan-500 text-white":"bg-slate-700 hover:bg-slate-600"}`,children:t},t))})}),(o==="Lookbook"||o==="Outfit Builder"||o==="B-roll")&&e.jsxs(S,{number:2,title:"Upload Model",children:[e.jsx("p",{className:"text-sm text-slate-400 -mt-2 mb-3",children:"A clear photo of a person."}),e.jsx(V,{title:"Click to upload or drag and drop",description:"PNG, JPG, or WEBP",files:u,onFilesChange:j,disabled:i||o==="B-roll"})]}),e.jsx(S,{number:o==="Lookbook"||o==="Outfit Builder"||o==="B-roll"?3:2,title:o==="Outfit Builder"?"Upload Product(s)":"Upload Product",children:o==="Outfit Builder"?e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-400 text-sm mb-2",children:"Add up to 5 items for the outfit."}),e.jsxs("div",{className:"grid grid-cols-3 sm:grid-cols-4 gap-2",children:[D.map((t,s)=>e.jsxs("div",{className:"relative aspect-square group",children:[e.jsx("img",{src:t,alt:`product ${s+1}`,className:"w-full h-full object-cover rounded-md border border-slate-700"}),e.jsx("button",{onClick:()=>H(s),disabled:i,className:"absolute top-1 right-1 bg-black/60 text-white rounded-full h-5 w-5 flex items-center justify-center text-xs opacity-0 group-hover:opacity-100 transition-opacity disabled:opacity-50","aria-label":`Remove product ${s+1}`,children:"×"})]},s)),l.length<5&&e.jsxs("div",{onClick:()=>!i&&G.current?.click(),onDragEnter:()=>!i&&R(!0),onDragLeave:()=>R(!1),onDragOver:t=>t.preventDefault(),onDrop:q,className:`flex flex-col items-center justify-center p-2 text-center border-2 border-dashed rounded-md aspect-square transition-colors
                                                    ${A?"border-cyan-400 bg-slate-700/50":"border-slate-600"}
                                                    ${i?"cursor-not-allowed opacity-50":"cursor-pointer hover:border-cyan-500"}`,children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6 text-slate-500 mb-1",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"})}),e.jsx("p",{className:"text-xs text-slate-300 font-semibold",children:"Click to upload or drag and drop"}),e.jsx("p",{className:"text-[10px] text-slate-500 mt-1",children:"PNG, JPG, or WEBP"})]})]}),e.jsx("input",{ref:G,type:"file",multiple:!0,accept:"image/png, image/jpeg, image/webp",className:"hidden",disabled:i,onChange:t=>O(t.target.files)})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-sm text-slate-400 -mt-2 mb-3",children:"Clothing, bags, shoes, etc."}),e.jsx(V,{title:"Click to upload or drag and drop",description:"PNG, JPG, or WEBP",files:l,onFilesChange:t=>f(t.slice(0,1)),disabled:i})]})}),e.jsx(S,{number:o==="Lookbook"||o==="Outfit Builder"||o==="B-roll"?4:3,title:"Customize Look",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-medium text-slate-300",children:"Photoshoot Theme"}),e.jsx("select",{value:g,onChange:t=>h(t.target.value),disabled:i,className:"mt-1 w-full p-2 bg-slate-900 border border-slate-600 rounded-md",children:U.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsxs("label",{className:"block",children:[e.jsx("span",{className:"text-sm font-medium text-slate-300",children:"Lighting Style"}),e.jsx("select",{value:m,onChange:t=>v(t.target.value),disabled:i,className:"mt-1 w-full p-2 bg-slate-900 border border-slate-600 rounded-md",children:$.map(t=>e.jsx("option",{value:t,children:t},t))})]})]})}),e.jsx("button",{onClick:J,disabled:_,className:"w-full text-lg font-bold py-3 px-4 bg-cyan-500 text-white rounded-lg hover:bg-cyan-600 transition-colors disabled:bg-slate-600 disabled:cursor-not-allowed",children:i?"Creating...":`Create ${o}`}),i&&E&&e.jsx("p",{className:"text-center text-slate-400 mt-2 text-sm",children:E}),n&&e.jsx("div",{className:"text-sm text-red-400 bg-red-500/10 p-3 rounded-md mt-2",children:n})]}),e.jsxs("main",{className:"md:col-span-2 bg-slate-800/50 p-6 rounded-xl border border-slate-700",children:[e.jsxs("h2",{className:"text-2xl font-bold text-white mb-4",children:["Your Fashion ",o==="B-roll"?"B-roll":"Lookbook"]}),e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-4",children:Array.from({length:6}).map((t,s)=>{const a=P[s];if(a&&!a.isPlaceholder){const c=a.promptStatus==="generating"||a.promptStatus==="copied";return e.jsxs("div",{className:"group relative aspect-[2/3] bg-slate-900 rounded-lg overflow-hidden",children:[a.videoStatus?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-2",children:[e.jsxs("svg",{className:"animate-spin h-8 w-8 text-cyan-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("p",{className:"text-slate-300 mt-2 text-xs",children:a.videoStatus})]}):a.type==="image"?e.jsx("img",{src:a.data,alt:`Generated result ${s+1}`,className:"w-full h-full object-cover"}):e.jsx("video",{src:a.data,controls:!0,className:"w-full h-full object-cover"}),a.type==="image"&&!a.videoStatus&&e.jsx("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex flex-col justify-center items-center p-2",children:e.jsxs("div",{className:"w-full flex flex-col items-center gap-2",children:[e.jsxs("button",{onClick:()=>B(a.data),className:"w-full max-w-[150px] text-white text-sm font-bold bg-white/10 backdrop-blur-md hover:bg-white/20 border border-white/20 rounded-xl py-2 px-3 flex items-center justify-center gap-2 transition-all",children:[e.jsx(ie,{className:"w-4 h-4"})," Zoom"]}),e.jsxs("button",{onClick:()=>T(a.data,a.id),className:"w-full max-w-[150px] text-white text-sm font-bold bg-white/10 backdrop-blur-md hover:bg-white/20 border border-white/20 rounded-xl py-2 px-3 flex items-center justify-center gap-2 transition-all",children:[e.jsx(oe,{className:"w-4 h-4"})," Download"]}),e.jsxs("button",{onClick:()=>z(a),disabled:c,className:"w-full max-w-[150px] text-white text-sm font-bold bg-white/10 backdrop-blur-md hover:bg-white/20 border border-white/20 rounded-xl py-2 px-3 flex items-center justify-center gap-2 transition-all disabled:opacity-50",children:[e.jsx(le,{className:"w-4 h-4"})," ",a.promptStatus==="generating"?"...":a.promptStatus==="copied"?"Copied!":"Gen Img Prompt"]}),e.jsxs("button",{onClick:()=>W(a),disabled:c,className:"w-full max-w-[150px] text-white text-sm font-bold bg-white/10 backdrop-blur-md hover:bg-white/20 border border-white/20 rounded-xl py-2 px-3 flex items-center justify-center gap-2 transition-all disabled:opacity-50",children:[e.jsx(ne,{className:"w-4 h-4"})," ",a.promptStatus==="generating"?"...":a.promptStatus==="copied"?"Copied!":"Gen Vid Prompt"]}),e.jsxs("button",{onClick:()=>Z(a),disabled:!!a.videoStatus,className:"w-full max-w-[150px] text-white text-sm font-bold bg-white/10 backdrop-blur-md hover:bg-white/20 border border-white/20 rounded-xl py-2 px-3 flex items-center justify-center gap-2 transition-all disabled:opacity-50",children:[e.jsx(re,{className:"w-4 h-4"})," Generate Video"]})]})})]},a.id)}else return i?e.jsx("div",{className:"aspect-[2/3] rounded-lg shimmer-bg"},`loader-${s}`):e.jsx("div",{className:"aspect-[2/3] rounded-lg bg-slate-900"},`placeholder-${s}`)})})]})]})]}),F&&e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>B(null),children:e.jsxs("div",{className:"relative max-w-4xl max-h-[90vh]",children:[e.jsx("img",{src:F,alt:"Zoomed result",className:"object-contain max-w-full max-h-full rounded-lg",onClick:t=>t.stopPropagation()}),e.jsx("button",{onClick:()=>B(null),className:"absolute -top-2 -right-2 bg-slate-700 text-white rounded-full h-8 w-8 flex items-center justify-center text-lg",children:"×"})]})})]})};export{he as default};
