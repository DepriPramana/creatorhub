/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Pt,xt;function wt(){return{geminiUrl:Pt,vertexUrl:xt}}function Nt(n,e,t,o){var r,l;if(!n?.baseUrl){const a=wt();return e?(r=a.vertexUrl)!==null&&r!==void 0?r:t:(l=a.geminiUrl)!==null&&l!==void 0?l:o}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class J{}function C(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(o,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const l=e[r];return l!=null?String(l):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function s(n,e,t){for(let l=0;l<e.length-1;l++){const a=e[l];if(a.endsWith("[]")){const f=a.slice(0,-2);if(!(f in n))if(Array.isArray(t))n[f]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${a}`);if(Array.isArray(n[f])){const c=n[f];if(Array.isArray(t))for(let u=0;u<c.length;u++){const d=c[u];s(d,e.slice(l+1),t[u])}else for(const u of c)s(u,e.slice(l+1),t)}return}else if(a.endsWith("[0]")){const f=a.slice(0,-3);f in n||(n[f]=[{}]);const c=n[f];s(c[0],e.slice(l+1),t);return}(!n[a]||typeof n[a]!="object")&&(n[a]={}),n=n[a]}const o=e[e.length-1],r=n[o];if(r!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===r)return;if(typeof r=="object"&&typeof t=="object"&&r!==null&&t!==null)Object.assign(r,t);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else n[o]=t}function i(n,e){try{if(e.length===1&&e[0]==="_self")return n;for(let t=0;t<e.length;t++){if(typeof n!="object"||n===null)return;const o=e[t];if(o.endsWith("[]")){const r=o.slice(0,-2);if(r in n){const l=n[r];return Array.isArray(l)?l.map(a=>i(a,e.slice(t+1))):void 0}else return}else n=n[o]}return n}catch(t){if(t instanceof TypeError)return;throw t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function me(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var De;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(De||(De={}));var ke;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(ke||(ke={}));var _;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(_||(_={}));var Ue;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(Ue||(Ue={}));var Fe;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(Fe||(Fe={}));var Le;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(Le||(Le={}));var Ve;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Ve||(Ve={}));var Ge;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(Ge||(Ge={}));var qe;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(qe||(qe={}));var He;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(He||(He={}));var Be;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Be||(Be={}));var Je;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(Je||(Je={}));var $e;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})($e||($e={}));var Ye;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Ye||(Ye={}));var Ke;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY"})(Ke||(Ke={}));var We;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(We||(We={}));var H;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(H||(H={}));var ze;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(ze||(ze={}));var ge;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(ge||(ge={}));var be;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(be||(be={}));var Xe;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(Xe||(Xe={}));var Qe;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(Qe||(Qe={}));var Ze;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Ze||(Ze={}));var Oe;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE"})(Oe||(Oe={}));var je;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(je||(je={}));var en;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(en||(en={}));var nn;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(nn||(nn={}));var tn;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(tn||(tn={}));var on;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(on||(on={}));var sn;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(sn||(sn={}));var rn;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(rn||(rn={}));var ln;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(ln||(ln={}));var an;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(an||(an={}));var un;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(un||(un={}));var fn;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(fn||(fn={}));var cn;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(cn||(cn={}));var dn;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(dn||(dn={}));var pn;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(pn||(pn={}));var mn;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(mn||(mn={}));var gn;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(gn||(gn={}));var hn;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(hn||(hn={}));var yn;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(yn||(yn={}));var Y;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(Y||(Y={}));class he{constructor(e){const t={};for(const o of e.headers.entries())t[o[0]]=o[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class j{get text(){var e,t,o,r,l,a,f,c;if(((r=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let u="",d=!1;const p=[];for(const m of(c=(f=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||f===void 0?void 0:f.parts)!==null&&c!==void 0?c:[]){for(const[g,h]of Object.entries(m))g!=="text"&&g!=="thought"&&(h!==null||h!==void 0)&&p.push(g);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;d=!0,u+=m.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),d?u:void 0}get data(){var e,t,o,r,l,a,f,c;if(((r=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let u="";const d=[];for(const p of(c=(f=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||f===void 0?void 0:f.parts)!==null&&c!==void 0?c:[]){for(const[m,g]of Object.entries(p))m!=="inlineData"&&(g!==null||g!==void 0)&&d.push(m);p.inlineData&&typeof p.inlineData.data=="string"&&(u+=atob(p.inlineData.data))}return d.length>0&&console.warn(`there are non-data parts ${d} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),u.length>0?btoa(u):void 0}get functionCalls(){var e,t,o,r,l,a,f,c;if(((r=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const u=(c=(f=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||f===void 0?void 0:f.parts)===null||c===void 0?void 0:c.filter(d=>d.functionCall).map(d=>d.functionCall).filter(d=>d!==void 0);if(u?.length!==0)return u}get executableCode(){var e,t,o,r,l,a,f,c,u;if(((r=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const d=(c=(f=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||f===void 0?void 0:f.parts)===null||c===void 0?void 0:c.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if(d?.length!==0)return(u=d?.[0])===null||u===void 0?void 0:u.code}get codeExecutionResult(){var e,t,o,r,l,a,f,c,u;if(((r=(o=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const d=(c=(f=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||f===void 0?void 0:f.parts)===null||c===void 0?void 0:c.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if(d?.length!==0)return(u=d?.[0])===null||u===void 0?void 0:u.output}}class Tn{}class Cn{}class Dt{}class kt{}class Ut{}class vn{}class Sn{}class En{}class Ft{}class _n{}class In{}class An{}class Mn{}class Lt{}class Vt{}class Gt{}class Rn{}class qt{get text(){var e,t,o;let r="",l=!1;const a=[];for(const f of(o=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&o!==void 0?o:[]){for(const[c,u]of Object.entries(f))c!=="text"&&c!=="thought"&&u!==null&&a.push(c);if(typeof f.text=="string"){if(typeof f.thought=="boolean"&&f.thought)continue;l=!0,r+=f.text}}return a.length>0&&console.warn(`there are non-text parts ${a} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?r:void 0}get data(){var e,t,o;let r="";const l=[];for(const a of(o=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&o!==void 0?o:[]){for(const[f,c]of Object.entries(a))f!=="inlineData"&&c!==null&&l.push(f);a.inlineData&&typeof a.inlineData.data=="string"&&(r+=atob(a.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class le{_fromAPIResponse({apiResponse:e,isVertexAI:t}){const o=new le;if(o.name=e.name,o.metadata=e.metadata,o.done=e.done,o.error=e.error,t){const r=e.response;if(r){const l=new _n,a=r.videos;l.generatedVideos=a?.map(f=>({video:{uri:f.gcsUri,videoBytes:f.bytesBase64Encoded?me(f.bytesBase64Encoded):void 0,mimeType:f.mimeType}})),l.raiMediaFilteredCount=r.raiMediaFilteredCount,l.raiMediaFilteredReasons=r.raiMediaFilteredReasons,o.response=l}}else{const r=e.response;if(r){const l=new _n,a=r.generateVideoResponse,f=a?.generatedSamples;l.generatedVideos=f?.map(c=>{const u=c.video;return{video:{uri:u?.uri,videoBytes:u?.encodedVideo?me(u?.encodedVideo):void 0,mimeType:c.encoding}}}),l.raiMediaFilteredCount=a?.raiMediaFilteredCount,l.raiMediaFilteredReasons=a?.raiMediaFilteredReasons,o.response=l}}return o}}class Ht{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function x(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Qn(n,e){const t=x(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function Zn(n){return Array.isArray(n)?n.map(e=>ae(e)):[ae(n)]}function ae(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function On(n){const e=ae(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function jn(n){const e=ae(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Pn(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function et(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>Pn(e)):[Pn(n)]}function ye(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function xn(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function wn(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function U(n){if(n==null)throw new Error("ContentUnion is required");return ye(n)?n:{role:"user",parts:et(n)}}function nt(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const o=U(t);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(n.isVertexAI()){const t=U(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>U(t)):[U(e)]}function L(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(xn(n)||wn(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[U(n)]}const e=[],t=[],o=ye(n[0]);for(const r of n){const l=ye(r);if(l!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(r);else{if(xn(r)||wn(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(r)}}return o||e.push({role:"user",parts:et(t)}),e}function Bt(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(o=>o!=="null");if(t.length===1)e.type=Object.values(_).includes(t[0].toUpperCase())?t[0].toUpperCase():_.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const o of t)e.anyOf.push({type:Object.values(_).includes(o.toUpperCase())?o.toUpperCase():_.TYPE_UNSPECIFIED})}}function K(n){const e={},t=["items"],o=["anyOf"],r=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,n=l[1]):l[1].type==="null"&&(e.nullable=!0,n=l[0])),n.type instanceof Array&&Bt(n.type,e);for(const[a,f]of Object.entries(n))if(f!=null)if(a=="type"){if(f==="null")throw new Error("type: null can not be the only possible type for the field.");if(f instanceof Array)continue;e.type=Object.values(_).includes(f.toUpperCase())?f.toUpperCase():_.TYPE_UNSPECIFIED}else if(t.includes(a))e[a]=K(f);else if(o.includes(a)){const c=[];for(const u of f){if(u.type=="null"){e.nullable=!0;continue}c.push(K(u))}e[a]=c}else if(r.includes(a)){const c={};for(const[u,d]of Object.entries(f))c[u]=K(d);e[a]=c}else{if(a==="additionalProperties")continue;e[a]=f}return e}function Me(n){return K(n)}function Re(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Pe(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function b(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=K(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=K(e.response));return n}function X(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function Jt(n,e,t,o=1){const r=!e.startsWith(`${t}/`)&&e.split("/").length===o;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:r?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:r?`${t}/${e}`:e}function q(n,e){if(typeof e!="string")throw new Error("name must be a string");return Jt(n,e,"cachedContents")}function tt(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function $(n){return me(n)}function $t(n){return n!=null&&typeof n=="object"&&"name"in n}function Yt(n){return n!=null&&typeof n=="object"&&"video"in n}function Kt(n){return n!=null&&typeof n=="object"&&"uri"in n}function ot(n){var e;let t;if($t(n)&&(t=n.name),!(Kt(n)&&(t=n.uri,t===void 0))&&!(Yt(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const r=t.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${t}`);t=r[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function it(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function st(n){for(const e of["models","tunedModels","publisherModels"])if(Wt(n,e))return n[e];return[]}function Wt(n,e){return n!==null&&typeof n=="object"&&e in n}function zt(n,e={}){const t=n,o={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function bt(n,e={}){const t=[],o=new Set;for(const r of n){const l=r.name;if(o.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);o.add(l);const a=zt(r,e);a.functionDeclarations&&t.push(...a.functionDeclarations)}return{functionDeclarations:t}}function rt(n,e){if(typeof e!="string"&&!Array.isArray(e)){if(n&&n.isVertexAI()){if(e.gcsUri&&e.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!e.gcsUri&&!e.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(e.inlinedRequests&&e.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!e.inlinedRequests&&!e.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return e}else{if(Array.isArray(e))return{inlinedRequests:e};if(typeof e=="string"){if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:[e]};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};if(e.startsWith("files/"))return{fileName:e}}}throw new Error(`Unsupported source: ${e}`)}function Xt(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function Q(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function lt(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Qt(n){const e={},t=i(n,["fps"]);t!=null&&s(e,["fps"],t);const o=i(n,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function Zt(n){const e={};if(i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=i(n,["data"]);t!=null&&s(e,["data"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Ot(n){const e={};if(i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=i(n,["fileUri"]);t!=null&&s(e,["fileUri"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function jt(n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],Qt(t));const o=i(n,["thought"]);o!=null&&s(e,["thought"],o);const r=i(n,["inlineData"]);r!=null&&s(e,["inlineData"],Zt(r));const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],Ot(l));const a=i(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const f=i(n,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);const c=i(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const u=i(n,["functionCall"]);u!=null&&s(e,["functionCall"],u);const d=i(n,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=i(n,["text"]);return p!=null&&s(e,["text"],p),e}function at(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>jt(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function eo(n){const e={},t=i(n,["anyOf"]);t!=null&&s(e,["anyOf"],t);const o=i(n,["default"]);o!=null&&s(e,["default"],o);const r=i(n,["description"]);r!=null&&s(e,["description"],r);const l=i(n,["enum"]);l!=null&&s(e,["enum"],l);const a=i(n,["example"]);a!=null&&s(e,["example"],a);const f=i(n,["format"]);f!=null&&s(e,["format"],f);const c=i(n,["items"]);c!=null&&s(e,["items"],c);const u=i(n,["maxItems"]);u!=null&&s(e,["maxItems"],u);const d=i(n,["maxLength"]);d!=null&&s(e,["maxLength"],d);const p=i(n,["maxProperties"]);p!=null&&s(e,["maxProperties"],p);const m=i(n,["maximum"]);m!=null&&s(e,["maximum"],m);const g=i(n,["minItems"]);g!=null&&s(e,["minItems"],g);const h=i(n,["minLength"]);h!=null&&s(e,["minLength"],h);const y=i(n,["minProperties"]);y!=null&&s(e,["minProperties"],y);const T=i(n,["minimum"]);T!=null&&s(e,["minimum"],T);const E=i(n,["nullable"]);E!=null&&s(e,["nullable"],E);const v=i(n,["pattern"]);v!=null&&s(e,["pattern"],v);const S=i(n,["properties"]);S!=null&&s(e,["properties"],S);const A=i(n,["propertyOrdering"]);A!=null&&s(e,["propertyOrdering"],A);const I=i(n,["required"]);I!=null&&s(e,["required"],I);const R=i(n,["title"]);R!=null&&s(e,["title"],R);const P=i(n,["type"]);return P!=null&&s(e,["type"],P),e}function no(n){const e={};if(i(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=i(n,["category"]);t!=null&&s(e,["category"],t);const o=i(n,["threshold"]);return o!=null&&s(e,["threshold"],o),e}function to(n){const e={},t=i(n,["behavior"]);t!=null&&s(e,["behavior"],t);const o=i(n,["description"]);o!=null&&s(e,["description"],o);const r=i(n,["name"]);r!=null&&s(e,["name"],r);const l=i(n,["parameters"]);l!=null&&s(e,["parameters"],l);const a=i(n,["parametersJsonSchema"]);a!=null&&s(e,["parametersJsonSchema"],a);const f=i(n,["response"]);f!=null&&s(e,["response"],f);const c=i(n,["responseJsonSchema"]);return c!=null&&s(e,["responseJsonSchema"],c),e}function oo(n){const e={},t=i(n,["startTime"]);t!=null&&s(e,["startTime"],t);const o=i(n,["endTime"]);return o!=null&&s(e,["endTime"],o),e}function io(n){const e={},t=i(n,["timeRangeFilter"]);return t!=null&&s(e,["timeRangeFilter"],oo(t)),e}function so(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["dynamicThreshold"]);return o!=null&&s(e,["dynamicThreshold"],o),e}function ro(n){const e={},t=i(n,["dynamicRetrievalConfig"]);return t!=null&&s(e,["dynamicRetrievalConfig"],so(t)),e}function lo(){return{}}function ao(n){const e={},t=i(n,["functionDeclarations"]);if(t!=null){let c=t;Array.isArray(c)&&(c=c.map(u=>to(u))),s(e,["functionDeclarations"],c)}if(i(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(n,["googleSearch"]);o!=null&&s(e,["googleSearch"],io(o));const r=i(n,["googleSearchRetrieval"]);if(r!=null&&s(e,["googleSearchRetrieval"],ro(r)),i(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(i(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");i(n,["urlContext"])!=null&&s(e,["urlContext"],lo());const a=i(n,["codeExecution"]);a!=null&&s(e,["codeExecution"],a);const f=i(n,["computerUse"]);return f!=null&&s(e,["computerUse"],f),e}function uo(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["allowedFunctionNames"]);return o!=null&&s(e,["allowedFunctionNames"],o),e}function fo(n){const e={},t=i(n,["latitude"]);t!=null&&s(e,["latitude"],t);const o=i(n,["longitude"]);return o!=null&&s(e,["longitude"],o),e}function co(n){const e={},t=i(n,["latLng"]);t!=null&&s(e,["latLng"],fo(t));const o=i(n,["languageCode"]);return o!=null&&s(e,["languageCode"],o),e}function po(n){const e={},t=i(n,["functionCallingConfig"]);t!=null&&s(e,["functionCallingConfig"],uo(t));const o=i(n,["retrievalConfig"]);return o!=null&&s(e,["retrievalConfig"],co(o)),e}function mo(n){const e={},t=i(n,["voiceName"]);return t!=null&&s(e,["voiceName"],t),e}function ut(n){const e={},t=i(n,["prebuiltVoiceConfig"]);return t!=null&&s(e,["prebuiltVoiceConfig"],mo(t)),e}function go(n){const e={},t=i(n,["speaker"]);t!=null&&s(e,["speaker"],t);const o=i(n,["voiceConfig"]);return o!=null&&s(e,["voiceConfig"],ut(o)),e}function ho(n){const e={},t=i(n,["speakerVoiceConfigs"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>go(r))),s(e,["speakerVoiceConfigs"],o)}return e}function yo(n){const e={},t=i(n,["voiceConfig"]);t!=null&&s(e,["voiceConfig"],ut(t));const o=i(n,["multiSpeakerVoiceConfig"]);o!=null&&s(e,["multiSpeakerVoiceConfig"],ho(o));const r=i(n,["languageCode"]);return r!=null&&s(e,["languageCode"],r),e}function To(n){const e={},t=i(n,["includeThoughts"]);t!=null&&s(e,["includeThoughts"],t);const o=i(n,["thinkingBudget"]);return o!=null&&s(e,["thinkingBudget"],o),e}function Co(n,e,t){const o={},r=i(e,["systemInstruction"]);t!==void 0&&r!=null&&s(t,["systemInstruction"],at(U(r)));const l=i(e,["temperature"]);l!=null&&s(o,["temperature"],l);const a=i(e,["topP"]);a!=null&&s(o,["topP"],a);const f=i(e,["topK"]);f!=null&&s(o,["topK"],f);const c=i(e,["candidateCount"]);c!=null&&s(o,["candidateCount"],c);const u=i(e,["maxOutputTokens"]);u!=null&&s(o,["maxOutputTokens"],u);const d=i(e,["stopSequences"]);d!=null&&s(o,["stopSequences"],d);const p=i(e,["responseLogprobs"]);p!=null&&s(o,["responseLogprobs"],p);const m=i(e,["logprobs"]);m!=null&&s(o,["logprobs"],m);const g=i(e,["presencePenalty"]);g!=null&&s(o,["presencePenalty"],g);const h=i(e,["frequencyPenalty"]);h!=null&&s(o,["frequencyPenalty"],h);const y=i(e,["seed"]);y!=null&&s(o,["seed"],y);const T=i(e,["responseMimeType"]);T!=null&&s(o,["responseMimeType"],T);const E=i(e,["responseSchema"]);E!=null&&s(o,["responseSchema"],eo(Me(E)));const v=i(e,["responseJsonSchema"]);if(v!=null&&s(o,["responseJsonSchema"],v),i(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(i(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const S=i(e,["safetySettings"]);if(t!==void 0&&S!=null){let w=S;Array.isArray(w)&&(w=w.map(V=>no(V))),s(t,["safetySettings"],w)}const A=i(e,["tools"]);if(t!==void 0&&A!=null){let w=X(A);Array.isArray(w)&&(w=w.map(V=>ao(b(V)))),s(t,["tools"],w)}const I=i(e,["toolConfig"]);if(t!==void 0&&I!=null&&s(t,["toolConfig"],po(I)),i(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const R=i(e,["cachedContent"]);t!==void 0&&R!=null&&s(t,["cachedContent"],q(n,R));const P=i(e,["responseModalities"]);P!=null&&s(o,["responseModalities"],P);const k=i(e,["mediaResolution"]);k!=null&&s(o,["mediaResolution"],k);const M=i(e,["speechConfig"]);if(M!=null&&s(o,["speechConfig"],yo(Re(M))),i(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const N=i(e,["thinkingConfig"]);return N!=null&&s(o,["thinkingConfig"],To(N)),o}function vo(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["request","model"],x(n,o));const r=i(e,["contents"]);if(r!=null){let a=L(r);Array.isArray(a)&&(a=a.map(f=>at(f))),s(t,["request","contents"],a)}const l=i(e,["config"]);return l!=null&&s(t,["request","generationConfig"],Co(n,l,t)),t}function So(n,e){const t={};if(i(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(i(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(i(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=i(e,["fileName"]);o!=null&&s(t,["fileName"],o);const r=i(e,["inlinedRequests"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>vo(n,a))),s(t,["requests","requests"],l)}return t}function Eo(n,e){const t={},o=i(n,["displayName"]);if(e!==void 0&&o!=null&&s(e,["batch","displayName"],o),i(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function _o(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],x(n,o));const r=i(e,["src"]);r!=null&&s(t,["batch","inputConfig"],So(n,rt(n,r)));const l=i(e,["config"]);return l!=null&&s(t,["config"],Eo(l,t)),t}function Io(n,e){const t={},o=i(e,["name"]);o!=null&&s(t,["_url","name"],Q(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],r),t}function Ao(n,e){const t={},o=i(e,["name"]);o!=null&&s(t,["_url","name"],Q(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],r),t}function Mo(n,e){const t={},o=i(n,["pageSize"]);e!==void 0&&o!=null&&s(e,["_query","pageSize"],o);const r=i(n,["pageToken"]);if(e!==void 0&&r!=null&&s(e,["_query","pageToken"],r),i(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function Ro(n){const e={},t=i(n,["config"]);return t!=null&&s(e,["config"],Mo(t,e)),e}function Po(n,e){const t={},o=i(e,["name"]);o!=null&&s(t,["_url","name"],Q(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],r),t}function xo(n){const e={},t=i(n,["format"]);t!=null&&s(e,["instancesFormat"],t);const o=i(n,["gcsUri"]);o!=null&&s(e,["gcsSource","uris"],o);const r=i(n,["bigqueryUri"]);if(r!=null&&s(e,["bigquerySource","inputUri"],r),i(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(i(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function wo(n){const e={},t=i(n,["format"]);t!=null&&s(e,["predictionsFormat"],t);const o=i(n,["gcsUri"]);o!=null&&s(e,["gcsDestination","outputUriPrefix"],o);const r=i(n,["bigqueryUri"]);if(r!=null&&s(e,["bigqueryDestination","outputUri"],r),i(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(i(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return e}function No(n,e){const t={},o=i(n,["displayName"]);e!==void 0&&o!=null&&s(e,["displayName"],o);const r=i(n,["dest"]);return e!==void 0&&r!=null&&s(e,["outputConfig"],wo(Xt(r))),t}function Do(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["model"],x(n,o));const r=i(e,["src"]);r!=null&&s(t,["inputConfig"],xo(rt(n,r)));const l=i(e,["config"]);return l!=null&&s(t,["config"],No(l,t)),t}function ko(n,e){const t={},o=i(e,["name"]);o!=null&&s(t,["_url","name"],Q(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],r),t}function Uo(n,e){const t={},o=i(e,["name"]);o!=null&&s(t,["_url","name"],Q(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],r),t}function Fo(n,e){const t={},o=i(n,["pageSize"]);e!==void 0&&o!=null&&s(e,["_query","pageSize"],o);const r=i(n,["pageToken"]);e!==void 0&&r!=null&&s(e,["_query","pageToken"],r);const l=i(n,["filter"]);return e!==void 0&&l!=null&&s(e,["_query","filter"],l),t}function Lo(n){const e={},t=i(n,["config"]);return t!=null&&s(e,["config"],Fo(t,e)),e}function Vo(n,e){const t={},o=i(e,["name"]);o!=null&&s(t,["_url","name"],Q(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],r),t}function Go(n){const e={},t=i(n,["fps"]);t!=null&&s(e,["fps"],t);const o=i(n,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function qo(n){const e={},t=i(n,["data"]);t!=null&&s(e,["data"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Ho(n){const e={},t=i(n,["fileUri"]);t!=null&&s(e,["fileUri"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Bo(n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],Go(t));const o=i(n,["thought"]);o!=null&&s(e,["thought"],o);const r=i(n,["inlineData"]);r!=null&&s(e,["inlineData"],qo(r));const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],Ho(l));const a=i(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const f=i(n,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);const c=i(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const u=i(n,["functionCall"]);u!=null&&s(e,["functionCall"],u);const d=i(n,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=i(n,["text"]);return p!=null&&s(e,["text"],p),e}function Jo(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>Bo(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function $o(n){const e={},t=i(n,["citationSources"]);return t!=null&&s(e,["citations"],t),e}function Yo(n){const e={},t=i(n,["retrievedUrl"]);t!=null&&s(e,["retrievedUrl"],t);const o=i(n,["urlRetrievalStatus"]);return o!=null&&s(e,["urlRetrievalStatus"],o),e}function Ko(n){const e={},t=i(n,["urlMetadata"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>Yo(r))),s(e,["urlMetadata"],o)}return e}function Wo(n){const e={},t=i(n,["content"]);t!=null&&s(e,["content"],Jo(t));const o=i(n,["citationMetadata"]);o!=null&&s(e,["citationMetadata"],$o(o));const r=i(n,["tokenCount"]);r!=null&&s(e,["tokenCount"],r);const l=i(n,["finishReason"]);l!=null&&s(e,["finishReason"],l);const a=i(n,["urlContextMetadata"]);a!=null&&s(e,["urlContextMetadata"],Ko(a));const f=i(n,["avgLogprobs"]);f!=null&&s(e,["avgLogprobs"],f);const c=i(n,["groundingMetadata"]);c!=null&&s(e,["groundingMetadata"],c);const u=i(n,["index"]);u!=null&&s(e,["index"],u);const d=i(n,["logprobsResult"]);d!=null&&s(e,["logprobsResult"],d);const p=i(n,["safetyRatings"]);return p!=null&&s(e,["safetyRatings"],p),e}function zo(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["candidates"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(u=>Wo(u))),s(e,["candidates"],c)}const r=i(n,["modelVersion"]);r!=null&&s(e,["modelVersion"],r);const l=i(n,["promptFeedback"]);l!=null&&s(e,["promptFeedback"],l);const a=i(n,["responseId"]);a!=null&&s(e,["responseId"],a);const f=i(n,["usageMetadata"]);return f!=null&&s(e,["usageMetadata"],f),e}function ft(n){const e={},t=i(n,["details"]);t!=null&&s(e,["details"],t);const o=i(n,["code"]);o!=null&&s(e,["code"],o);const r=i(n,["message"]);return r!=null&&s(e,["message"],r),e}function bo(n){const e={},t=i(n,["response"]);t!=null&&s(e,["response"],zo(t));const o=i(n,["error"]);return o!=null&&s(e,["error"],ft(o)),e}function Xo(n){const e={},t=i(n,["responsesFile"]);t!=null&&s(e,["fileName"],t);const o=i(n,["inlinedResponses","inlinedResponses"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>bo(l))),s(e,["inlinedResponses"],r)}return e}function Te(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["metadata","displayName"]);o!=null&&s(e,["displayName"],o);const r=i(n,["metadata","state"]);r!=null&&s(e,["state"],lt(r));const l=i(n,["metadata","createTime"]);l!=null&&s(e,["createTime"],l);const a=i(n,["metadata","endTime"]);a!=null&&s(e,["endTime"],a);const f=i(n,["metadata","updateTime"]);f!=null&&s(e,["updateTime"],f);const c=i(n,["metadata","model"]);c!=null&&s(e,["model"],c);const u=i(n,["metadata","output"]);return u!=null&&s(e,["dest"],Xo(u)),e}function Qo(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(n,["operations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>Te(a))),s(e,["batchJobs"],l)}return e}function Zo(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["name"]);o!=null&&s(e,["name"],o);const r=i(n,["done"]);r!=null&&s(e,["done"],r);const l=i(n,["error"]);return l!=null&&s(e,["error"],ft(l)),e}function ct(n){const e={},t=i(n,["details"]);t!=null&&s(e,["details"],t);const o=i(n,["code"]);o!=null&&s(e,["code"],o);const r=i(n,["message"]);return r!=null&&s(e,["message"],r),e}function Oo(n){const e={},t=i(n,["instancesFormat"]);t!=null&&s(e,["format"],t);const o=i(n,["gcsSource","uris"]);o!=null&&s(e,["gcsUri"],o);const r=i(n,["bigquerySource","inputUri"]);return r!=null&&s(e,["bigqueryUri"],r),e}function jo(n){const e={},t=i(n,["predictionsFormat"]);t!=null&&s(e,["format"],t);const o=i(n,["gcsDestination","outputUriPrefix"]);o!=null&&s(e,["gcsUri"],o);const r=i(n,["bigqueryDestination","outputUri"]);return r!=null&&s(e,["bigqueryUri"],r),e}function Ce(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["displayName"]);o!=null&&s(e,["displayName"],o);const r=i(n,["state"]);r!=null&&s(e,["state"],lt(r));const l=i(n,["error"]);l!=null&&s(e,["error"],ct(l));const a=i(n,["createTime"]);a!=null&&s(e,["createTime"],a);const f=i(n,["startTime"]);f!=null&&s(e,["startTime"],f);const c=i(n,["endTime"]);c!=null&&s(e,["endTime"],c);const u=i(n,["updateTime"]);u!=null&&s(e,["updateTime"],u);const d=i(n,["model"]);d!=null&&s(e,["model"],d);const p=i(n,["inputConfig"]);p!=null&&s(e,["src"],Oo(p));const m=i(n,["outputConfig"]);return m!=null&&s(e,["dest"],jo(m)),e}function ei(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(n,["batchPredictionJobs"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>Ce(a))),s(e,["batchJobs"],l)}return e}function ni(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["name"]);o!=null&&s(e,["name"],o);const r=i(n,["done"]);r!=null&&s(e,["done"],r);const l=i(n,["error"]);return l!=null&&s(e,["error"],ct(l)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var B;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(B||(B={}));class te{constructor(e,t,o,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,o,r)}init(e,t,o){var r,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t?.sdkHttpResponse,this.idxInternal=0;let a={config:{}};!o||Object.keys(o).length===0?a={config:{}}:typeof o=="object"?a=Object.assign({},o):a=o,a.config&&(a.config.pageToken=t.nextPageToken),this.paramsInternal=a,this.pageInternalSize=(l=(r=a.config)===null||r===void 0?void 0:r.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ti extends J{constructor(e){super(),this.apiClient=e,this.create=async t=>{if(this.apiClient.isVertexAI()){const r=Date.now().toString();if(Array.isArray(t.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(t.config=t.config||{},t.config.displayName===void 0&&(t.config.displayName="genaiBatchJob_${timestampStr}"),t.config.dest===void 0&&typeof t.src=="string")if(t.src.startsWith("gs://")&&t.src.endsWith(".jsonl"))t.config.dest=`${t.src.slice(0,-6)}/dest`;else if(t.src.startsWith("bq://"))t.config.dest=`${t.src}_dest_${r}`;else throw new Error("Unsupported source:"+t.src)}return await this.createInternal(t)},this.list=async(t={})=>new te(B.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(t),t)}async createInternal(e){var t,o,r,l;let a,f="",c={};if(this.apiClient.isVertexAI()){const u=Do(this.apiClient,e);return f=C("batchPredictionJobs",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),a.then(d=>Ce(d))}else{const u=_o(this.apiClient,e);return f=C("{model}:batchGenerateContent",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(d=>Te(d))}}async get(e){var t,o,r,l;let a,f="",c={};if(this.apiClient.isVertexAI()){const u=ko(this.apiClient,e);return f=C("batchPredictionJobs/{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),a.then(d=>Ce(d))}else{const u=Io(this.apiClient,e);return f=C("batches/{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(d=>Te(d))}}async cancel(e){var t,o,r,l;let a="",f={};if(this.apiClient.isVertexAI()){const c=Uo(this.apiClient,e);a=C("batchPredictionJobs/{name}:cancel",c._url),f=c._query,delete c.config,delete c._url,delete c._query,await this.apiClient.request({path:a,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const c=Ao(this.apiClient,e);a=C("batches/{name}:cancel",c._url),f=c._query,delete c.config,delete c._url,delete c._query,await this.apiClient.request({path:a,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var t,o,r,l;let a,f="",c={};if(this.apiClient.isVertexAI()){const u=Lo(e);return f=C("batchPredictionJobs",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=ei(d),m=new Rn;return Object.assign(m,p),m})}else{const u=Ro(e);return f=C("batches",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=Qo(d),m=new Rn;return Object.assign(m,p),m})}}async delete(e){var t,o,r,l;let a,f="",c={};if(this.apiClient.isVertexAI()){const u=Vo(this.apiClient,e);return f=C("batchPredictionJobs/{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>ni(d))}else{const u=Po(this.apiClient,e);return f=C("batches/{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>Zo(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function oi(n){const e={},t=i(n,["fps"]);t!=null&&s(e,["fps"],t);const o=i(n,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function ii(n){const e={};if(i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=i(n,["data"]);t!=null&&s(e,["data"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function si(n){const e={};if(i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=i(n,["fileUri"]);t!=null&&s(e,["fileUri"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function ri(n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],oi(t));const o=i(n,["thought"]);o!=null&&s(e,["thought"],o);const r=i(n,["inlineData"]);r!=null&&s(e,["inlineData"],ii(r));const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],si(l));const a=i(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const f=i(n,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);const c=i(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const u=i(n,["functionCall"]);u!=null&&s(e,["functionCall"],u);const d=i(n,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=i(n,["text"]);return p!=null&&s(e,["text"],p),e}function Nn(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>ri(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function li(n){const e={},t=i(n,["behavior"]);t!=null&&s(e,["behavior"],t);const o=i(n,["description"]);o!=null&&s(e,["description"],o);const r=i(n,["name"]);r!=null&&s(e,["name"],r);const l=i(n,["parameters"]);l!=null&&s(e,["parameters"],l);const a=i(n,["parametersJsonSchema"]);a!=null&&s(e,["parametersJsonSchema"],a);const f=i(n,["response"]);f!=null&&s(e,["response"],f);const c=i(n,["responseJsonSchema"]);return c!=null&&s(e,["responseJsonSchema"],c),e}function ai(n){const e={},t=i(n,["startTime"]);t!=null&&s(e,["startTime"],t);const o=i(n,["endTime"]);return o!=null&&s(e,["endTime"],o),e}function ui(n){const e={},t=i(n,["timeRangeFilter"]);return t!=null&&s(e,["timeRangeFilter"],ai(t)),e}function fi(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["dynamicThreshold"]);return o!=null&&s(e,["dynamicThreshold"],o),e}function ci(n){const e={},t=i(n,["dynamicRetrievalConfig"]);return t!=null&&s(e,["dynamicRetrievalConfig"],fi(t)),e}function di(){return{}}function pi(n){const e={},t=i(n,["functionDeclarations"]);if(t!=null){let c=t;Array.isArray(c)&&(c=c.map(u=>li(u))),s(e,["functionDeclarations"],c)}if(i(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(n,["googleSearch"]);o!=null&&s(e,["googleSearch"],ui(o));const r=i(n,["googleSearchRetrieval"]);if(r!=null&&s(e,["googleSearchRetrieval"],ci(r)),i(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(i(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");i(n,["urlContext"])!=null&&s(e,["urlContext"],di());const a=i(n,["codeExecution"]);a!=null&&s(e,["codeExecution"],a);const f=i(n,["computerUse"]);return f!=null&&s(e,["computerUse"],f),e}function mi(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["allowedFunctionNames"]);return o!=null&&s(e,["allowedFunctionNames"],o),e}function gi(n){const e={},t=i(n,["latitude"]);t!=null&&s(e,["latitude"],t);const o=i(n,["longitude"]);return o!=null&&s(e,["longitude"],o),e}function hi(n){const e={},t=i(n,["latLng"]);t!=null&&s(e,["latLng"],gi(t));const o=i(n,["languageCode"]);return o!=null&&s(e,["languageCode"],o),e}function yi(n){const e={},t=i(n,["functionCallingConfig"]);t!=null&&s(e,["functionCallingConfig"],mi(t));const o=i(n,["retrievalConfig"]);return o!=null&&s(e,["retrievalConfig"],hi(o)),e}function Ti(n,e){const t={},o=i(n,["ttl"]);e!==void 0&&o!=null&&s(e,["ttl"],o);const r=i(n,["expireTime"]);e!==void 0&&r!=null&&s(e,["expireTime"],r);const l=i(n,["displayName"]);e!==void 0&&l!=null&&s(e,["displayName"],l);const a=i(n,["contents"]);if(e!==void 0&&a!=null){let d=L(a);Array.isArray(d)&&(d=d.map(p=>Nn(p))),s(e,["contents"],d)}const f=i(n,["systemInstruction"]);e!==void 0&&f!=null&&s(e,["systemInstruction"],Nn(U(f)));const c=i(n,["tools"]);if(e!==void 0&&c!=null){let d=c;Array.isArray(d)&&(d=d.map(p=>pi(p))),s(e,["tools"],d)}const u=i(n,["toolConfig"]);if(e!==void 0&&u!=null&&s(e,["toolConfig"],yi(u)),i(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function Ci(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["model"],Qn(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],Ti(r,t)),t}function vi(n,e){const t={},o=i(e,["name"]);o!=null&&s(t,["_url","name"],q(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],r),t}function Si(n,e){const t={},o=i(e,["name"]);o!=null&&s(t,["_url","name"],q(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],r),t}function Ei(n,e){const t={},o=i(n,["ttl"]);e!==void 0&&o!=null&&s(e,["ttl"],o);const r=i(n,["expireTime"]);return e!==void 0&&r!=null&&s(e,["expireTime"],r),t}function _i(n,e){const t={},o=i(e,["name"]);o!=null&&s(t,["_url","name"],q(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],Ei(r,t)),t}function Ii(n,e){const t={},o=i(n,["pageSize"]);e!==void 0&&o!=null&&s(e,["_query","pageSize"],o);const r=i(n,["pageToken"]);return e!==void 0&&r!=null&&s(e,["_query","pageToken"],r),t}function Ai(n){const e={},t=i(n,["config"]);return t!=null&&s(e,["config"],Ii(t,e)),e}function Mi(n){const e={},t=i(n,["fps"]);t!=null&&s(e,["fps"],t);const o=i(n,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function Ri(n){const e={},t=i(n,["displayName"]);t!=null&&s(e,["displayName"],t);const o=i(n,["data"]);o!=null&&s(e,["data"],o);const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function Pi(n){const e={},t=i(n,["displayName"]);t!=null&&s(e,["displayName"],t);const o=i(n,["fileUri"]);o!=null&&s(e,["fileUri"],o);const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function xi(n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],Mi(t));const o=i(n,["thought"]);o!=null&&s(e,["thought"],o);const r=i(n,["inlineData"]);r!=null&&s(e,["inlineData"],Ri(r));const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],Pi(l));const a=i(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const f=i(n,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);const c=i(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const u=i(n,["functionCall"]);u!=null&&s(e,["functionCall"],u);const d=i(n,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=i(n,["text"]);return p!=null&&s(e,["text"],p),e}function Dn(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>xi(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function wi(n){const e={};if(i(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=i(n,["description"]);t!=null&&s(e,["description"],t);const o=i(n,["name"]);o!=null&&s(e,["name"],o);const r=i(n,["parameters"]);r!=null&&s(e,["parameters"],r);const l=i(n,["parametersJsonSchema"]);l!=null&&s(e,["parametersJsonSchema"],l);const a=i(n,["response"]);a!=null&&s(e,["response"],a);const f=i(n,["responseJsonSchema"]);return f!=null&&s(e,["responseJsonSchema"],f),e}function Ni(n){const e={},t=i(n,["startTime"]);t!=null&&s(e,["startTime"],t);const o=i(n,["endTime"]);return o!=null&&s(e,["endTime"],o),e}function Di(n){const e={},t=i(n,["timeRangeFilter"]);return t!=null&&s(e,["timeRangeFilter"],Ni(t)),e}function ki(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["dynamicThreshold"]);return o!=null&&s(e,["dynamicThreshold"],o),e}function Ui(n){const e={},t=i(n,["dynamicRetrievalConfig"]);return t!=null&&s(e,["dynamicRetrievalConfig"],ki(t)),e}function Fi(){return{}}function Li(n){const e={},t=i(n,["apiKeyString"]);return t!=null&&s(e,["apiKeyString"],t),e}function Vi(n){const e={},t=i(n,["apiKeyConfig"]);t!=null&&s(e,["apiKeyConfig"],Li(t));const o=i(n,["authType"]);o!=null&&s(e,["authType"],o);const r=i(n,["googleServiceAccountConfig"]);r!=null&&s(e,["googleServiceAccountConfig"],r);const l=i(n,["httpBasicAuthConfig"]);l!=null&&s(e,["httpBasicAuthConfig"],l);const a=i(n,["oauthConfig"]);a!=null&&s(e,["oauthConfig"],a);const f=i(n,["oidcConfig"]);return f!=null&&s(e,["oidcConfig"],f),e}function Gi(n){const e={},t=i(n,["authConfig"]);return t!=null&&s(e,["authConfig"],Vi(t)),e}function qi(){return{}}function Hi(n){const e={},t=i(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(m=>wi(m))),s(e,["functionDeclarations"],p)}const o=i(n,["retrieval"]);o!=null&&s(e,["retrieval"],o);const r=i(n,["googleSearch"]);r!=null&&s(e,["googleSearch"],Di(r));const l=i(n,["googleSearchRetrieval"]);l!=null&&s(e,["googleSearchRetrieval"],Ui(l)),i(n,["enterpriseWebSearch"])!=null&&s(e,["enterpriseWebSearch"],Fi());const f=i(n,["googleMaps"]);f!=null&&s(e,["googleMaps"],Gi(f)),i(n,["urlContext"])!=null&&s(e,["urlContext"],qi());const u=i(n,["codeExecution"]);u!=null&&s(e,["codeExecution"],u);const d=i(n,["computerUse"]);return d!=null&&s(e,["computerUse"],d),e}function Bi(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["allowedFunctionNames"]);return o!=null&&s(e,["allowedFunctionNames"],o),e}function Ji(n){const e={},t=i(n,["latitude"]);t!=null&&s(e,["latitude"],t);const o=i(n,["longitude"]);return o!=null&&s(e,["longitude"],o),e}function $i(n){const e={},t=i(n,["latLng"]);t!=null&&s(e,["latLng"],Ji(t));const o=i(n,["languageCode"]);return o!=null&&s(e,["languageCode"],o),e}function Yi(n){const e={},t=i(n,["functionCallingConfig"]);t!=null&&s(e,["functionCallingConfig"],Bi(t));const o=i(n,["retrievalConfig"]);return o!=null&&s(e,["retrievalConfig"],$i(o)),e}function Ki(n,e){const t={},o=i(n,["ttl"]);e!==void 0&&o!=null&&s(e,["ttl"],o);const r=i(n,["expireTime"]);e!==void 0&&r!=null&&s(e,["expireTime"],r);const l=i(n,["displayName"]);e!==void 0&&l!=null&&s(e,["displayName"],l);const a=i(n,["contents"]);if(e!==void 0&&a!=null){let p=L(a);Array.isArray(p)&&(p=p.map(m=>Dn(m))),s(e,["contents"],p)}const f=i(n,["systemInstruction"]);e!==void 0&&f!=null&&s(e,["systemInstruction"],Dn(U(f)));const c=i(n,["tools"]);if(e!==void 0&&c!=null){let p=c;Array.isArray(p)&&(p=p.map(m=>Hi(m))),s(e,["tools"],p)}const u=i(n,["toolConfig"]);e!==void 0&&u!=null&&s(e,["toolConfig"],Yi(u));const d=i(n,["kmsKeyName"]);return e!==void 0&&d!=null&&s(e,["encryption_spec","kmsKeyName"],d),t}function Wi(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["model"],Qn(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],Ki(r,t)),t}function zi(n,e){const t={},o=i(e,["name"]);o!=null&&s(t,["_url","name"],q(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],r),t}function bi(n,e){const t={},o=i(e,["name"]);o!=null&&s(t,["_url","name"],q(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],r),t}function Xi(n,e){const t={},o=i(n,["ttl"]);e!==void 0&&o!=null&&s(e,["ttl"],o);const r=i(n,["expireTime"]);return e!==void 0&&r!=null&&s(e,["expireTime"],r),t}function Qi(n,e){const t={},o=i(e,["name"]);o!=null&&s(t,["_url","name"],q(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],Xi(r,t)),t}function Zi(n,e){const t={},o=i(n,["pageSize"]);e!==void 0&&o!=null&&s(e,["_query","pageSize"],o);const r=i(n,["pageToken"]);return e!==void 0&&r!=null&&s(e,["_query","pageToken"],r),t}function Oi(n){const e={},t=i(n,["config"]);return t!=null&&s(e,["config"],Zi(t,e)),e}function se(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["displayName"]);o!=null&&s(e,["displayName"],o);const r=i(n,["model"]);r!=null&&s(e,["model"],r);const l=i(n,["createTime"]);l!=null&&s(e,["createTime"],l);const a=i(n,["updateTime"]);a!=null&&s(e,["updateTime"],a);const f=i(n,["expireTime"]);f!=null&&s(e,["expireTime"],f);const c=i(n,["usageMetadata"]);return c!=null&&s(e,["usageMetadata"],c),e}function ji(){return{}}function es(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(n,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>se(a))),s(e,["cachedContents"],l)}return e}function re(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["displayName"]);o!=null&&s(e,["displayName"],o);const r=i(n,["model"]);r!=null&&s(e,["model"],r);const l=i(n,["createTime"]);l!=null&&s(e,["createTime"],l);const a=i(n,["updateTime"]);a!=null&&s(e,["updateTime"],a);const f=i(n,["expireTime"]);f!=null&&s(e,["expireTime"],f);const c=i(n,["usageMetadata"]);return c!=null&&s(e,["usageMetadata"],c),e}function ns(){return{}}function ts(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(n,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>re(a))),s(e,["cachedContents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class os extends J{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new te(B.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(t),t)}async create(e){var t,o,r,l;let a,f="",c={};if(this.apiClient.isVertexAI()){const u=Wi(this.apiClient,e);return f=C("cachedContents",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),a.then(d=>re(d))}else{const u=Ci(this.apiClient,e);return f=C("cachedContents",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(d=>se(d))}}async get(e){var t,o,r,l;let a,f="",c={};if(this.apiClient.isVertexAI()){const u=zi(this.apiClient,e);return f=C("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),a.then(d=>re(d))}else{const u=vi(this.apiClient,e);return f=C("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(d=>se(d))}}async delete(e){var t,o,r,l;let a,f="",c={};if(this.apiClient.isVertexAI()){const u=bi(this.apiClient,e);return f=C("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),a.then(()=>{const d=ns(),p=new An;return Object.assign(p,d),p})}else{const u=Si(this.apiClient,e);return f=C("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(()=>{const d=ji(),p=new An;return Object.assign(p,d),p})}}async update(e){var t,o,r,l;let a,f="",c={};if(this.apiClient.isVertexAI()){const u=Qi(this.apiClient,e);return f=C("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),a.then(d=>re(d))}else{const u=_i(this.apiClient,e);return f=C("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(d=>se(d))}}async listInternal(e){var t,o,r,l;let a,f="",c={};if(this.apiClient.isVertexAI()){const u=Oi(e);return f=C("cachedContents",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=ts(d),m=new Mn;return Object.assign(m,p),m})}else{const u=Ai(e);return f=C("cachedContents",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=es(d),m=new Mn;return Object.assign(m,p),m})}}}function kn(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],o=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&o>=n.length&&(n=void 0),{value:n&&n[o++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function D(n){return this instanceof D?(this.v=n,this):new D(n)}function W(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=t.apply(n,e||[]),r,l=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",a),r[Symbol.asyncIterator]=function(){return this},r;function a(g){return function(h){return Promise.resolve(h).then(g,p)}}function f(g,h){o[g]&&(r[g]=function(y){return new Promise(function(T,E){l.push([g,y,T,E])>1||c(g,y)})},h&&(r[g]=h(r[g])))}function c(g,h){try{u(o[g](h))}catch(y){m(l[0][3],y)}}function u(g){g.value instanceof D?Promise.resolve(g.value.v).then(d,p):m(l[0][2],g)}function d(g){c("next",g)}function p(g){c("throw",g)}function m(g,h){g(h),l.shift(),l.length&&c(l[0][0],l[0][1])}}function ee(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof kn=="function"?kn(n):n[Symbol.iterator](),t={},o("next"),o("throw"),o("return"),t[Symbol.asyncIterator]=function(){return this},t);function o(l){t[l]=n[l]&&function(a){return new Promise(function(f,c){a=n[l](a),r(f,c,a.done,a.value)})}}function r(l,a,f,c){Promise.resolve(c).then(function(u){l({value:u,done:f})},a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function is(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:dt(t)}function dt(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0||!e.thought&&e.text!==void 0&&e.text==="")return!1;return!0}function ss(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function Un(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let o=0;for(;o<t;)if(n[o].role==="user")e.push(n[o]),o++;else{const r=[];let l=!0;for(;o<t&&n[o].role==="model";)r.push(n[o]),l&&!dt(n[o])&&(l=!1),o++;l?e.push(...r):e.pop()}return e}class rs{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new ls(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class ls{constructor(e,t,o,r={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=o,this.config=r,this.history=l,this.sendPromise=Promise.resolve(),ss(l)}async sendMessage(e){var t;await this.sendPromise;const o=U(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,a,f;const c=await r,u=(a=(l=c.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content,d=c.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let m=[];d!=null&&(m=(f=d.slice(p))!==null&&f!==void 0?f:[]);const g=u?[u]:[];this.recordHistory(o,g,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var t;await this.sendPromise;const o=U(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const l=await r;return this.processStreamResponse(l,o)}getHistory(e=!1){const t=e?Un(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var o,r;return W(this,arguments,function*(){var a,f,c,u;const d=[];try{for(var p=!0,m=ee(e),g;g=yield D(m.next()),a=g.done,!a;p=!0){u=g.value,p=!1;const h=u;if(is(h)){const y=(r=(o=h.candidates)===null||o===void 0?void 0:o[0])===null||r===void 0?void 0:r.content;y!==void 0&&d.push(y)}yield yield D(h)}}catch(h){f={error:h}}finally{try{!p&&!a&&(c=m.return)&&(yield D(c.call(m)))}finally{if(f)throw f.error}}this.recordHistory(t,d)})}recordHistory(e,t,o){let r=[];t.length>0&&t.every(l=>l.role!==void 0)?r=t:r.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...Un(o)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ue extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,ue.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function as(n,e){const t={},o=i(n,["pageSize"]);e!==void 0&&o!=null&&s(e,["_query","pageSize"],o);const r=i(n,["pageToken"]);return e!==void 0&&r!=null&&s(e,["_query","pageToken"],r),t}function us(n){const e={},t=i(n,["config"]);return t!=null&&s(e,["config"],as(t,e)),e}function fs(n){const e={},t=i(n,["details"]);t!=null&&s(e,["details"],t);const o=i(n,["message"]);o!=null&&s(e,["message"],o);const r=i(n,["code"]);return r!=null&&s(e,["code"],r),e}function cs(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["displayName"]);o!=null&&s(e,["displayName"],o);const r=i(n,["mimeType"]);r!=null&&s(e,["mimeType"],r);const l=i(n,["sizeBytes"]);l!=null&&s(e,["sizeBytes"],l);const a=i(n,["createTime"]);a!=null&&s(e,["createTime"],a);const f=i(n,["expirationTime"]);f!=null&&s(e,["expirationTime"],f);const c=i(n,["updateTime"]);c!=null&&s(e,["updateTime"],c);const u=i(n,["sha256Hash"]);u!=null&&s(e,["sha256Hash"],u);const d=i(n,["uri"]);d!=null&&s(e,["uri"],d);const p=i(n,["downloadUri"]);p!=null&&s(e,["downloadUri"],p);const m=i(n,["state"]);m!=null&&s(e,["state"],m);const g=i(n,["source"]);g!=null&&s(e,["source"],g);const h=i(n,["videoMetadata"]);h!=null&&s(e,["videoMetadata"],h);const y=i(n,["error"]);return y!=null&&s(e,["error"],fs(y)),e}function ds(n){const e={},t=i(n,["file"]);t!=null&&s(e,["file"],cs(t));const o=i(n,["config"]);return o!=null&&s(e,["config"],o),e}function ps(n){const e={},t=i(n,["name"]);t!=null&&s(e,["_url","file"],ot(t));const o=i(n,["config"]);return o!=null&&s(e,["config"],o),e}function ms(n){const e={},t=i(n,["name"]);t!=null&&s(e,["_url","file"],ot(t));const o=i(n,["config"]);return o!=null&&s(e,["config"],o),e}function gs(n){const e={},t=i(n,["details"]);t!=null&&s(e,["details"],t);const o=i(n,["message"]);o!=null&&s(e,["message"],o);const r=i(n,["code"]);return r!=null&&s(e,["code"],r),e}function ve(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["displayName"]);o!=null&&s(e,["displayName"],o);const r=i(n,["mimeType"]);r!=null&&s(e,["mimeType"],r);const l=i(n,["sizeBytes"]);l!=null&&s(e,["sizeBytes"],l);const a=i(n,["createTime"]);a!=null&&s(e,["createTime"],a);const f=i(n,["expirationTime"]);f!=null&&s(e,["expirationTime"],f);const c=i(n,["updateTime"]);c!=null&&s(e,["updateTime"],c);const u=i(n,["sha256Hash"]);u!=null&&s(e,["sha256Hash"],u);const d=i(n,["uri"]);d!=null&&s(e,["uri"],d);const p=i(n,["downloadUri"]);p!=null&&s(e,["downloadUri"],p);const m=i(n,["state"]);m!=null&&s(e,["state"],m);const g=i(n,["source"]);g!=null&&s(e,["source"],g);const h=i(n,["videoMetadata"]);h!=null&&s(e,["videoMetadata"],h);const y=i(n,["error"]);return y!=null&&s(e,["error"],gs(y)),e}function hs(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(n,["files"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>ve(a))),s(e,["files"],l)}return e}function ys(n){const e={},t=i(n,["sdkHttpResponse"]);return t!=null&&s(e,["sdkHttpResponse"],t),e}function Ts(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Cs extends J{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new te(B.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>ve(t))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=us(e);return l=C("files",f._url),a=f._query,delete f.config,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:c.headers},d})),r.then(c=>{const u=hs(c),d=new Lt;return Object.assign(d,u),d})}}async createInternal(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=ds(e);return l=C("upload/v1beta/files",f._url),a=f._query,delete f.config,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{const u=ys(c),d=new Vt;return Object.assign(d,u),d})}}async get(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=ps(e);return l=C("files/{file}",f._url),a=f._query,delete f.config,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>ve(c))}}async delete(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=ms(e);return l=C("files/{file}",f._url),a=f._query,delete f.config,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(()=>{const c=Ts(),u=new Gt;return Object.assign(u,c),u})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vs(n){const e={},t=i(n,["voiceName"]);return t!=null&&s(e,["voiceName"],t),e}function pt(n){const e={},t=i(n,["prebuiltVoiceConfig"]);return t!=null&&s(e,["prebuiltVoiceConfig"],vs(t)),e}function Ss(n){const e={},t=i(n,["speaker"]);t!=null&&s(e,["speaker"],t);const o=i(n,["voiceConfig"]);return o!=null&&s(e,["voiceConfig"],pt(o)),e}function Es(n){const e={},t=i(n,["speakerVoiceConfigs"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>Ss(r))),s(e,["speakerVoiceConfigs"],o)}return e}function _s(n){const e={},t=i(n,["voiceConfig"]);t!=null&&s(e,["voiceConfig"],pt(t));const o=i(n,["multiSpeakerVoiceConfig"]);o!=null&&s(e,["multiSpeakerVoiceConfig"],Es(o));const r=i(n,["languageCode"]);return r!=null&&s(e,["languageCode"],r),e}function Is(n){const e={},t=i(n,["fps"]);t!=null&&s(e,["fps"],t);const o=i(n,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function As(n){const e={};if(i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=i(n,["data"]);t!=null&&s(e,["data"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Ms(n){const e={};if(i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=i(n,["fileUri"]);t!=null&&s(e,["fileUri"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Rs(n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],Is(t));const o=i(n,["thought"]);o!=null&&s(e,["thought"],o);const r=i(n,["inlineData"]);r!=null&&s(e,["inlineData"],As(r));const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],Ms(l));const a=i(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const f=i(n,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);const c=i(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const u=i(n,["functionCall"]);u!=null&&s(e,["functionCall"],u);const d=i(n,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=i(n,["text"]);return p!=null&&s(e,["text"],p),e}function Ps(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>Rs(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function xs(n){const e={},t=i(n,["behavior"]);t!=null&&s(e,["behavior"],t);const o=i(n,["description"]);o!=null&&s(e,["description"],o);const r=i(n,["name"]);r!=null&&s(e,["name"],r);const l=i(n,["parameters"]);l!=null&&s(e,["parameters"],l);const a=i(n,["parametersJsonSchema"]);a!=null&&s(e,["parametersJsonSchema"],a);const f=i(n,["response"]);f!=null&&s(e,["response"],f);const c=i(n,["responseJsonSchema"]);return c!=null&&s(e,["responseJsonSchema"],c),e}function ws(n){const e={},t=i(n,["startTime"]);t!=null&&s(e,["startTime"],t);const o=i(n,["endTime"]);return o!=null&&s(e,["endTime"],o),e}function Ns(n){const e={},t=i(n,["timeRangeFilter"]);return t!=null&&s(e,["timeRangeFilter"],ws(t)),e}function Ds(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["dynamicThreshold"]);return o!=null&&s(e,["dynamicThreshold"],o),e}function ks(n){const e={},t=i(n,["dynamicRetrievalConfig"]);return t!=null&&s(e,["dynamicRetrievalConfig"],Ds(t)),e}function Us(){return{}}function Fs(n){const e={},t=i(n,["functionDeclarations"]);if(t!=null){let c=t;Array.isArray(c)&&(c=c.map(u=>xs(u))),s(e,["functionDeclarations"],c)}if(i(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(n,["googleSearch"]);o!=null&&s(e,["googleSearch"],Ns(o));const r=i(n,["googleSearchRetrieval"]);if(r!=null&&s(e,["googleSearchRetrieval"],ks(r)),i(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(i(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");i(n,["urlContext"])!=null&&s(e,["urlContext"],Us());const a=i(n,["codeExecution"]);a!=null&&s(e,["codeExecution"],a);const f=i(n,["computerUse"]);return f!=null&&s(e,["computerUse"],f),e}function Ls(n){const e={},t=i(n,["handle"]);if(t!=null&&s(e,["handle"],t),i(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Fn(){return{}}function Vs(n){const e={},t=i(n,["disabled"]);t!=null&&s(e,["disabled"],t);const o=i(n,["startOfSpeechSensitivity"]);o!=null&&s(e,["startOfSpeechSensitivity"],o);const r=i(n,["endOfSpeechSensitivity"]);r!=null&&s(e,["endOfSpeechSensitivity"],r);const l=i(n,["prefixPaddingMs"]);l!=null&&s(e,["prefixPaddingMs"],l);const a=i(n,["silenceDurationMs"]);return a!=null&&s(e,["silenceDurationMs"],a),e}function Gs(n){const e={},t=i(n,["automaticActivityDetection"]);t!=null&&s(e,["automaticActivityDetection"],Vs(t));const o=i(n,["activityHandling"]);o!=null&&s(e,["activityHandling"],o);const r=i(n,["turnCoverage"]);return r!=null&&s(e,["turnCoverage"],r),e}function qs(n){const e={},t=i(n,["targetTokens"]);return t!=null&&s(e,["targetTokens"],t),e}function Hs(n){const e={},t=i(n,["triggerTokens"]);t!=null&&s(e,["triggerTokens"],t);const o=i(n,["slidingWindow"]);return o!=null&&s(e,["slidingWindow"],qs(o)),e}function Bs(n){const e={},t=i(n,["proactiveAudio"]);return t!=null&&s(e,["proactiveAudio"],t),e}function Js(n,e){const t={},o=i(n,["generationConfig"]);e!==void 0&&o!=null&&s(e,["setup","generationConfig"],o);const r=i(n,["responseModalities"]);e!==void 0&&r!=null&&s(e,["setup","generationConfig","responseModalities"],r);const l=i(n,["temperature"]);e!==void 0&&l!=null&&s(e,["setup","generationConfig","temperature"],l);const a=i(n,["topP"]);e!==void 0&&a!=null&&s(e,["setup","generationConfig","topP"],a);const f=i(n,["topK"]);e!==void 0&&f!=null&&s(e,["setup","generationConfig","topK"],f);const c=i(n,["maxOutputTokens"]);e!==void 0&&c!=null&&s(e,["setup","generationConfig","maxOutputTokens"],c);const u=i(n,["mediaResolution"]);e!==void 0&&u!=null&&s(e,["setup","generationConfig","mediaResolution"],u);const d=i(n,["seed"]);e!==void 0&&d!=null&&s(e,["setup","generationConfig","seed"],d);const p=i(n,["speechConfig"]);e!==void 0&&p!=null&&s(e,["setup","generationConfig","speechConfig"],_s(Pe(p)));const m=i(n,["enableAffectiveDialog"]);e!==void 0&&m!=null&&s(e,["setup","generationConfig","enableAffectiveDialog"],m);const g=i(n,["systemInstruction"]);e!==void 0&&g!=null&&s(e,["setup","systemInstruction"],Ps(U(g)));const h=i(n,["tools"]);if(e!==void 0&&h!=null){let I=X(h);Array.isArray(I)&&(I=I.map(R=>Fs(b(R)))),s(e,["setup","tools"],I)}const y=i(n,["sessionResumption"]);e!==void 0&&y!=null&&s(e,["setup","sessionResumption"],Ls(y));const T=i(n,["inputAudioTranscription"]);e!==void 0&&T!=null&&s(e,["setup","inputAudioTranscription"],Fn());const E=i(n,["outputAudioTranscription"]);e!==void 0&&E!=null&&s(e,["setup","outputAudioTranscription"],Fn());const v=i(n,["realtimeInputConfig"]);e!==void 0&&v!=null&&s(e,["setup","realtimeInputConfig"],Gs(v));const S=i(n,["contextWindowCompression"]);e!==void 0&&S!=null&&s(e,["setup","contextWindowCompression"],Hs(S));const A=i(n,["proactivity"]);return e!==void 0&&A!=null&&s(e,["setup","proactivity"],Bs(A)),t}function $s(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["setup","model"],x(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],Js(r,t)),t}function Ys(){return{}}function Ks(){return{}}function Ws(n){const e={},t=i(n,["media"]);t!=null&&s(e,["mediaChunks"],Zn(t));const o=i(n,["audio"]);o!=null&&s(e,["audio"],jn(o));const r=i(n,["audioStreamEnd"]);r!=null&&s(e,["audioStreamEnd"],r);const l=i(n,["video"]);l!=null&&s(e,["video"],On(l));const a=i(n,["text"]);return a!=null&&s(e,["text"],a),i(n,["activityStart"])!=null&&s(e,["activityStart"],Ys()),i(n,["activityEnd"])!=null&&s(e,["activityEnd"],Ks()),e}function mt(n){const e={},t=i(n,["text"]);t!=null&&s(e,["text"],t);const o=i(n,["weight"]);return o!=null&&s(e,["weight"],o),e}function zs(n){const e={},t=i(n,["weightedPrompts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>mt(r))),s(e,["weightedPrompts"],o)}return e}function gt(n){const e={},t=i(n,["temperature"]);t!=null&&s(e,["temperature"],t);const o=i(n,["topK"]);o!=null&&s(e,["topK"],o);const r=i(n,["seed"]);r!=null&&s(e,["seed"],r);const l=i(n,["guidance"]);l!=null&&s(e,["guidance"],l);const a=i(n,["bpm"]);a!=null&&s(e,["bpm"],a);const f=i(n,["density"]);f!=null&&s(e,["density"],f);const c=i(n,["brightness"]);c!=null&&s(e,["brightness"],c);const u=i(n,["scale"]);u!=null&&s(e,["scale"],u);const d=i(n,["muteBass"]);d!=null&&s(e,["muteBass"],d);const p=i(n,["muteDrums"]);p!=null&&s(e,["muteDrums"],p);const m=i(n,["onlyBassAndDrums"]);m!=null&&s(e,["onlyBassAndDrums"],m);const g=i(n,["musicGenerationMode"]);return g!=null&&s(e,["musicGenerationMode"],g),e}function bs(n){const e={},t=i(n,["musicGenerationConfig"]);return t!=null&&s(e,["musicGenerationConfig"],gt(t)),e}function ht(n){const e={},t=i(n,["model"]);return t!=null&&s(e,["model"],t),e}function yt(n){const e={},t=i(n,["weightedPrompts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>mt(r))),s(e,["weightedPrompts"],o)}return e}function Se(n){const e={},t=i(n,["setup"]);t!=null&&s(e,["setup"],ht(t));const o=i(n,["clientContent"]);o!=null&&s(e,["clientContent"],yt(o));const r=i(n,["musicGenerationConfig"]);r!=null&&s(e,["musicGenerationConfig"],gt(r));const l=i(n,["playbackControl"]);return l!=null&&s(e,["playbackControl"],l),e}function Xs(n){const e={},t=i(n,["voiceName"]);return t!=null&&s(e,["voiceName"],t),e}function Qs(n){const e={},t=i(n,["prebuiltVoiceConfig"]);return t!=null&&s(e,["prebuiltVoiceConfig"],Xs(t)),e}function Zs(n){const e={},t=i(n,["voiceConfig"]);if(t!=null&&s(e,["voiceConfig"],Qs(t)),i(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const o=i(n,["languageCode"]);return o!=null&&s(e,["languageCode"],o),e}function Os(n){const e={},t=i(n,["fps"]);t!=null&&s(e,["fps"],t);const o=i(n,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function js(n){const e={},t=i(n,["displayName"]);t!=null&&s(e,["displayName"],t);const o=i(n,["data"]);o!=null&&s(e,["data"],o);const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function er(n){const e={},t=i(n,["displayName"]);t!=null&&s(e,["displayName"],t);const o=i(n,["fileUri"]);o!=null&&s(e,["fileUri"],o);const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function nr(n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],Os(t));const o=i(n,["thought"]);o!=null&&s(e,["thought"],o);const r=i(n,["inlineData"]);r!=null&&s(e,["inlineData"],js(r));const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],er(l));const a=i(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const f=i(n,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);const c=i(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const u=i(n,["functionCall"]);u!=null&&s(e,["functionCall"],u);const d=i(n,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=i(n,["text"]);return p!=null&&s(e,["text"],p),e}function tr(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>nr(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function or(n){const e={};if(i(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=i(n,["description"]);t!=null&&s(e,["description"],t);const o=i(n,["name"]);o!=null&&s(e,["name"],o);const r=i(n,["parameters"]);r!=null&&s(e,["parameters"],r);const l=i(n,["parametersJsonSchema"]);l!=null&&s(e,["parametersJsonSchema"],l);const a=i(n,["response"]);a!=null&&s(e,["response"],a);const f=i(n,["responseJsonSchema"]);return f!=null&&s(e,["responseJsonSchema"],f),e}function ir(n){const e={},t=i(n,["startTime"]);t!=null&&s(e,["startTime"],t);const o=i(n,["endTime"]);return o!=null&&s(e,["endTime"],o),e}function sr(n){const e={},t=i(n,["timeRangeFilter"]);return t!=null&&s(e,["timeRangeFilter"],ir(t)),e}function rr(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["dynamicThreshold"]);return o!=null&&s(e,["dynamicThreshold"],o),e}function lr(n){const e={},t=i(n,["dynamicRetrievalConfig"]);return t!=null&&s(e,["dynamicRetrievalConfig"],rr(t)),e}function ar(){return{}}function ur(n){const e={},t=i(n,["apiKeyString"]);return t!=null&&s(e,["apiKeyString"],t),e}function fr(n){const e={},t=i(n,["apiKeyConfig"]);t!=null&&s(e,["apiKeyConfig"],ur(t));const o=i(n,["authType"]);o!=null&&s(e,["authType"],o);const r=i(n,["googleServiceAccountConfig"]);r!=null&&s(e,["googleServiceAccountConfig"],r);const l=i(n,["httpBasicAuthConfig"]);l!=null&&s(e,["httpBasicAuthConfig"],l);const a=i(n,["oauthConfig"]);a!=null&&s(e,["oauthConfig"],a);const f=i(n,["oidcConfig"]);return f!=null&&s(e,["oidcConfig"],f),e}function cr(n){const e={},t=i(n,["authConfig"]);return t!=null&&s(e,["authConfig"],fr(t)),e}function dr(){return{}}function pr(n){const e={},t=i(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(m=>or(m))),s(e,["functionDeclarations"],p)}const o=i(n,["retrieval"]);o!=null&&s(e,["retrieval"],o);const r=i(n,["googleSearch"]);r!=null&&s(e,["googleSearch"],sr(r));const l=i(n,["googleSearchRetrieval"]);l!=null&&s(e,["googleSearchRetrieval"],lr(l)),i(n,["enterpriseWebSearch"])!=null&&s(e,["enterpriseWebSearch"],ar());const f=i(n,["googleMaps"]);f!=null&&s(e,["googleMaps"],cr(f)),i(n,["urlContext"])!=null&&s(e,["urlContext"],dr());const u=i(n,["codeExecution"]);u!=null&&s(e,["codeExecution"],u);const d=i(n,["computerUse"]);return d!=null&&s(e,["computerUse"],d),e}function mr(n){const e={},t=i(n,["handle"]);t!=null&&s(e,["handle"],t);const o=i(n,["transparent"]);return o!=null&&s(e,["transparent"],o),e}function Ln(){return{}}function gr(n){const e={},t=i(n,["disabled"]);t!=null&&s(e,["disabled"],t);const o=i(n,["startOfSpeechSensitivity"]);o!=null&&s(e,["startOfSpeechSensitivity"],o);const r=i(n,["endOfSpeechSensitivity"]);r!=null&&s(e,["endOfSpeechSensitivity"],r);const l=i(n,["prefixPaddingMs"]);l!=null&&s(e,["prefixPaddingMs"],l);const a=i(n,["silenceDurationMs"]);return a!=null&&s(e,["silenceDurationMs"],a),e}function hr(n){const e={},t=i(n,["automaticActivityDetection"]);t!=null&&s(e,["automaticActivityDetection"],gr(t));const o=i(n,["activityHandling"]);o!=null&&s(e,["activityHandling"],o);const r=i(n,["turnCoverage"]);return r!=null&&s(e,["turnCoverage"],r),e}function yr(n){const e={},t=i(n,["targetTokens"]);return t!=null&&s(e,["targetTokens"],t),e}function Tr(n){const e={},t=i(n,["triggerTokens"]);t!=null&&s(e,["triggerTokens"],t);const o=i(n,["slidingWindow"]);return o!=null&&s(e,["slidingWindow"],yr(o)),e}function Cr(n){const e={},t=i(n,["proactiveAudio"]);return t!=null&&s(e,["proactiveAudio"],t),e}function vr(n,e){const t={},o=i(n,["generationConfig"]);e!==void 0&&o!=null&&s(e,["setup","generationConfig"],o);const r=i(n,["responseModalities"]);e!==void 0&&r!=null&&s(e,["setup","generationConfig","responseModalities"],r);const l=i(n,["temperature"]);e!==void 0&&l!=null&&s(e,["setup","generationConfig","temperature"],l);const a=i(n,["topP"]);e!==void 0&&a!=null&&s(e,["setup","generationConfig","topP"],a);const f=i(n,["topK"]);e!==void 0&&f!=null&&s(e,["setup","generationConfig","topK"],f);const c=i(n,["maxOutputTokens"]);e!==void 0&&c!=null&&s(e,["setup","generationConfig","maxOutputTokens"],c);const u=i(n,["mediaResolution"]);e!==void 0&&u!=null&&s(e,["setup","generationConfig","mediaResolution"],u);const d=i(n,["seed"]);e!==void 0&&d!=null&&s(e,["setup","generationConfig","seed"],d);const p=i(n,["speechConfig"]);e!==void 0&&p!=null&&s(e,["setup","generationConfig","speechConfig"],Zs(Pe(p)));const m=i(n,["enableAffectiveDialog"]);e!==void 0&&m!=null&&s(e,["setup","generationConfig","enableAffectiveDialog"],m);const g=i(n,["systemInstruction"]);e!==void 0&&g!=null&&s(e,["setup","systemInstruction"],tr(U(g)));const h=i(n,["tools"]);if(e!==void 0&&h!=null){let I=X(h);Array.isArray(I)&&(I=I.map(R=>pr(b(R)))),s(e,["setup","tools"],I)}const y=i(n,["sessionResumption"]);e!==void 0&&y!=null&&s(e,["setup","sessionResumption"],mr(y));const T=i(n,["inputAudioTranscription"]);e!==void 0&&T!=null&&s(e,["setup","inputAudioTranscription"],Ln());const E=i(n,["outputAudioTranscription"]);e!==void 0&&E!=null&&s(e,["setup","outputAudioTranscription"],Ln());const v=i(n,["realtimeInputConfig"]);e!==void 0&&v!=null&&s(e,["setup","realtimeInputConfig"],hr(v));const S=i(n,["contextWindowCompression"]);e!==void 0&&S!=null&&s(e,["setup","contextWindowCompression"],Tr(S));const A=i(n,["proactivity"]);return e!==void 0&&A!=null&&s(e,["setup","proactivity"],Cr(A)),t}function Sr(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["setup","model"],x(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],vr(r,t)),t}function Er(){return{}}function _r(){return{}}function Ir(n){const e={},t=i(n,["media"]);t!=null&&s(e,["mediaChunks"],Zn(t));const o=i(n,["audio"]);o!=null&&s(e,["audio"],jn(o));const r=i(n,["audioStreamEnd"]);r!=null&&s(e,["audioStreamEnd"],r);const l=i(n,["video"]);l!=null&&s(e,["video"],On(l));const a=i(n,["text"]);return a!=null&&s(e,["text"],a),i(n,["activityStart"])!=null&&s(e,["activityStart"],Er()),i(n,["activityEnd"])!=null&&s(e,["activityEnd"],_r()),e}function Ar(){return{}}function Mr(n){const e={},t=i(n,["fps"]);t!=null&&s(e,["fps"],t);const o=i(n,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function Rr(n){const e={},t=i(n,["data"]);t!=null&&s(e,["data"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Pr(n){const e={},t=i(n,["fileUri"]);t!=null&&s(e,["fileUri"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function xr(n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],Mr(t));const o=i(n,["thought"]);o!=null&&s(e,["thought"],o);const r=i(n,["inlineData"]);r!=null&&s(e,["inlineData"],Rr(r));const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],Pr(l));const a=i(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const f=i(n,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);const c=i(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const u=i(n,["functionCall"]);u!=null&&s(e,["functionCall"],u);const d=i(n,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=i(n,["text"]);return p!=null&&s(e,["text"],p),e}function wr(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>xr(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function Vn(n){const e={},t=i(n,["text"]);t!=null&&s(e,["text"],t);const o=i(n,["finished"]);return o!=null&&s(e,["finished"],o),e}function Nr(n){const e={},t=i(n,["retrievedUrl"]);t!=null&&s(e,["retrievedUrl"],t);const o=i(n,["urlRetrievalStatus"]);return o!=null&&s(e,["urlRetrievalStatus"],o),e}function Dr(n){const e={},t=i(n,["urlMetadata"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>Nr(r))),s(e,["urlMetadata"],o)}return e}function kr(n){const e={},t=i(n,["modelTurn"]);t!=null&&s(e,["modelTurn"],wr(t));const o=i(n,["turnComplete"]);o!=null&&s(e,["turnComplete"],o);const r=i(n,["interrupted"]);r!=null&&s(e,["interrupted"],r);const l=i(n,["groundingMetadata"]);l!=null&&s(e,["groundingMetadata"],l);const a=i(n,["generationComplete"]);a!=null&&s(e,["generationComplete"],a);const f=i(n,["inputTranscription"]);f!=null&&s(e,["inputTranscription"],Vn(f));const c=i(n,["outputTranscription"]);c!=null&&s(e,["outputTranscription"],Vn(c));const u=i(n,["urlContextMetadata"]);return u!=null&&s(e,["urlContextMetadata"],Dr(u)),e}function Ur(n){const e={},t=i(n,["id"]);t!=null&&s(e,["id"],t);const o=i(n,["args"]);o!=null&&s(e,["args"],o);const r=i(n,["name"]);return r!=null&&s(e,["name"],r),e}function Fr(n){const e={},t=i(n,["functionCalls"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>Ur(r))),s(e,["functionCalls"],o)}return e}function Lr(n){const e={},t=i(n,["ids"]);return t!=null&&s(e,["ids"],t),e}function oe(n){const e={},t=i(n,["modality"]);t!=null&&s(e,["modality"],t);const o=i(n,["tokenCount"]);return o!=null&&s(e,["tokenCount"],o),e}function Vr(n){const e={},t=i(n,["promptTokenCount"]);t!=null&&s(e,["promptTokenCount"],t);const o=i(n,["cachedContentTokenCount"]);o!=null&&s(e,["cachedContentTokenCount"],o);const r=i(n,["responseTokenCount"]);r!=null&&s(e,["responseTokenCount"],r);const l=i(n,["toolUsePromptTokenCount"]);l!=null&&s(e,["toolUsePromptTokenCount"],l);const a=i(n,["thoughtsTokenCount"]);a!=null&&s(e,["thoughtsTokenCount"],a);const f=i(n,["totalTokenCount"]);f!=null&&s(e,["totalTokenCount"],f);const c=i(n,["promptTokensDetails"]);if(c!=null){let m=c;Array.isArray(m)&&(m=m.map(g=>oe(g))),s(e,["promptTokensDetails"],m)}const u=i(n,["cacheTokensDetails"]);if(u!=null){let m=u;Array.isArray(m)&&(m=m.map(g=>oe(g))),s(e,["cacheTokensDetails"],m)}const d=i(n,["responseTokensDetails"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(g=>oe(g))),s(e,["responseTokensDetails"],m)}const p=i(n,["toolUsePromptTokensDetails"]);if(p!=null){let m=p;Array.isArray(m)&&(m=m.map(g=>oe(g))),s(e,["toolUsePromptTokensDetails"],m)}return e}function Gr(n){const e={},t=i(n,["timeLeft"]);return t!=null&&s(e,["timeLeft"],t),e}function qr(n){const e={},t=i(n,["newHandle"]);t!=null&&s(e,["newHandle"],t);const o=i(n,["resumable"]);o!=null&&s(e,["resumable"],o);const r=i(n,["lastConsumedClientMessageIndex"]);return r!=null&&s(e,["lastConsumedClientMessageIndex"],r),e}function Hr(n){const e={};i(n,["setupComplete"])!=null&&s(e,["setupComplete"],Ar());const o=i(n,["serverContent"]);o!=null&&s(e,["serverContent"],kr(o));const r=i(n,["toolCall"]);r!=null&&s(e,["toolCall"],Fr(r));const l=i(n,["toolCallCancellation"]);l!=null&&s(e,["toolCallCancellation"],Lr(l));const a=i(n,["usageMetadata"]);a!=null&&s(e,["usageMetadata"],Vr(a));const f=i(n,["goAway"]);f!=null&&s(e,["goAway"],Gr(f));const c=i(n,["sessionResumptionUpdate"]);return c!=null&&s(e,["sessionResumptionUpdate"],qr(c)),e}function Br(){return{}}function Jr(n){const e={},t=i(n,["text"]);t!=null&&s(e,["text"],t);const o=i(n,["weight"]);return o!=null&&s(e,["weight"],o),e}function $r(n){const e={},t=i(n,["weightedPrompts"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>Jr(r))),s(e,["weightedPrompts"],o)}return e}function Yr(n){const e={},t=i(n,["temperature"]);t!=null&&s(e,["temperature"],t);const o=i(n,["topK"]);o!=null&&s(e,["topK"],o);const r=i(n,["seed"]);r!=null&&s(e,["seed"],r);const l=i(n,["guidance"]);l!=null&&s(e,["guidance"],l);const a=i(n,["bpm"]);a!=null&&s(e,["bpm"],a);const f=i(n,["density"]);f!=null&&s(e,["density"],f);const c=i(n,["brightness"]);c!=null&&s(e,["brightness"],c);const u=i(n,["scale"]);u!=null&&s(e,["scale"],u);const d=i(n,["muteBass"]);d!=null&&s(e,["muteBass"],d);const p=i(n,["muteDrums"]);p!=null&&s(e,["muteDrums"],p);const m=i(n,["onlyBassAndDrums"]);m!=null&&s(e,["onlyBassAndDrums"],m);const g=i(n,["musicGenerationMode"]);return g!=null&&s(e,["musicGenerationMode"],g),e}function Kr(n){const e={},t=i(n,["clientContent"]);t!=null&&s(e,["clientContent"],$r(t));const o=i(n,["musicGenerationConfig"]);return o!=null&&s(e,["musicGenerationConfig"],Yr(o)),e}function Wr(n){const e={},t=i(n,["data"]);t!=null&&s(e,["data"],t);const o=i(n,["mimeType"]);o!=null&&s(e,["mimeType"],o);const r=i(n,["sourceMetadata"]);return r!=null&&s(e,["sourceMetadata"],Kr(r)),e}function zr(n){const e={},t=i(n,["audioChunks"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>Wr(r))),s(e,["audioChunks"],o)}return e}function br(n){const e={},t=i(n,["text"]);t!=null&&s(e,["text"],t);const o=i(n,["filteredReason"]);return o!=null&&s(e,["filteredReason"],o),e}function Xr(n){const e={};i(n,["setupComplete"])!=null&&s(e,["setupComplete"],Br());const o=i(n,["serverContent"]);o!=null&&s(e,["serverContent"],zr(o));const r=i(n,["filteredPrompt"]);return r!=null&&s(e,["filteredPrompt"],br(r)),e}function Qr(n){const e={},t=i(n,["sessionId"]);return t!=null&&s(e,["sessionId"],t),e}function Zr(n){const e={},t=i(n,["fps"]);t!=null&&s(e,["fps"],t);const o=i(n,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function Or(n){const e={},t=i(n,["displayName"]);t!=null&&s(e,["displayName"],t);const o=i(n,["data"]);o!=null&&s(e,["data"],o);const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function jr(n){const e={},t=i(n,["displayName"]);t!=null&&s(e,["displayName"],t);const o=i(n,["fileUri"]);o!=null&&s(e,["fileUri"],o);const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function el(n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],Zr(t));const o=i(n,["thought"]);o!=null&&s(e,["thought"],o);const r=i(n,["inlineData"]);r!=null&&s(e,["inlineData"],Or(r));const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],jr(l));const a=i(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const f=i(n,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);const c=i(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const u=i(n,["functionCall"]);u!=null&&s(e,["functionCall"],u);const d=i(n,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=i(n,["text"]);return p!=null&&s(e,["text"],p),e}function nl(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>el(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function Gn(n){const e={},t=i(n,["text"]);t!=null&&s(e,["text"],t);const o=i(n,["finished"]);return o!=null&&s(e,["finished"],o),e}function tl(n){const e={},t=i(n,["modelTurn"]);t!=null&&s(e,["modelTurn"],nl(t));const o=i(n,["turnComplete"]);o!=null&&s(e,["turnComplete"],o);const r=i(n,["interrupted"]);r!=null&&s(e,["interrupted"],r);const l=i(n,["groundingMetadata"]);l!=null&&s(e,["groundingMetadata"],l);const a=i(n,["generationComplete"]);a!=null&&s(e,["generationComplete"],a);const f=i(n,["inputTranscription"]);f!=null&&s(e,["inputTranscription"],Gn(f));const c=i(n,["outputTranscription"]);return c!=null&&s(e,["outputTranscription"],Gn(c)),e}function ol(n){const e={},t=i(n,["args"]);t!=null&&s(e,["args"],t);const o=i(n,["name"]);return o!=null&&s(e,["name"],o),e}function il(n){const e={},t=i(n,["functionCalls"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>ol(r))),s(e,["functionCalls"],o)}return e}function sl(n){const e={},t=i(n,["ids"]);return t!=null&&s(e,["ids"],t),e}function ie(n){const e={},t=i(n,["modality"]);t!=null&&s(e,["modality"],t);const o=i(n,["tokenCount"]);return o!=null&&s(e,["tokenCount"],o),e}function rl(n){const e={},t=i(n,["promptTokenCount"]);t!=null&&s(e,["promptTokenCount"],t);const o=i(n,["cachedContentTokenCount"]);o!=null&&s(e,["cachedContentTokenCount"],o);const r=i(n,["candidatesTokenCount"]);r!=null&&s(e,["responseTokenCount"],r);const l=i(n,["toolUsePromptTokenCount"]);l!=null&&s(e,["toolUsePromptTokenCount"],l);const a=i(n,["thoughtsTokenCount"]);a!=null&&s(e,["thoughtsTokenCount"],a);const f=i(n,["totalTokenCount"]);f!=null&&s(e,["totalTokenCount"],f);const c=i(n,["promptTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(h=>ie(h))),s(e,["promptTokensDetails"],g)}const u=i(n,["cacheTokensDetails"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(h=>ie(h))),s(e,["cacheTokensDetails"],g)}const d=i(n,["candidatesTokensDetails"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(h=>ie(h))),s(e,["responseTokensDetails"],g)}const p=i(n,["toolUsePromptTokensDetails"]);if(p!=null){let g=p;Array.isArray(g)&&(g=g.map(h=>ie(h))),s(e,["toolUsePromptTokensDetails"],g)}const m=i(n,["trafficType"]);return m!=null&&s(e,["trafficType"],m),e}function ll(n){const e={},t=i(n,["timeLeft"]);return t!=null&&s(e,["timeLeft"],t),e}function al(n){const e={},t=i(n,["newHandle"]);t!=null&&s(e,["newHandle"],t);const o=i(n,["resumable"]);o!=null&&s(e,["resumable"],o);const r=i(n,["lastConsumedClientMessageIndex"]);return r!=null&&s(e,["lastConsumedClientMessageIndex"],r),e}function ul(n){const e={},t=i(n,["setupComplete"]);t!=null&&s(e,["setupComplete"],Qr(t));const o=i(n,["serverContent"]);o!=null&&s(e,["serverContent"],tl(o));const r=i(n,["toolCall"]);r!=null&&s(e,["toolCall"],il(r));const l=i(n,["toolCallCancellation"]);l!=null&&s(e,["toolCallCancellation"],sl(l));const a=i(n,["usageMetadata"]);a!=null&&s(e,["usageMetadata"],rl(a));const f=i(n,["goAway"]);f!=null&&s(e,["goAway"],ll(f));const c=i(n,["sessionResumptionUpdate"]);return c!=null&&s(e,["sessionResumptionUpdate"],al(c)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fl(n){const e={},t=i(n,["fps"]);t!=null&&s(e,["fps"],t);const o=i(n,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function cl(n){const e={};if(i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=i(n,["data"]);t!=null&&s(e,["data"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function dl(n){const e={};if(i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=i(n,["fileUri"]);t!=null&&s(e,["fileUri"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function pl(n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],fl(t));const o=i(n,["thought"]);o!=null&&s(e,["thought"],o);const r=i(n,["inlineData"]);r!=null&&s(e,["inlineData"],cl(r));const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],dl(l));const a=i(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const f=i(n,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);const c=i(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const u=i(n,["functionCall"]);u!=null&&s(e,["functionCall"],u);const d=i(n,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=i(n,["text"]);return p!=null&&s(e,["text"],p),e}function fe(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>pl(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function ml(n){const e={},t=i(n,["anyOf"]);t!=null&&s(e,["anyOf"],t);const o=i(n,["default"]);o!=null&&s(e,["default"],o);const r=i(n,["description"]);r!=null&&s(e,["description"],r);const l=i(n,["enum"]);l!=null&&s(e,["enum"],l);const a=i(n,["example"]);a!=null&&s(e,["example"],a);const f=i(n,["format"]);f!=null&&s(e,["format"],f);const c=i(n,["items"]);c!=null&&s(e,["items"],c);const u=i(n,["maxItems"]);u!=null&&s(e,["maxItems"],u);const d=i(n,["maxLength"]);d!=null&&s(e,["maxLength"],d);const p=i(n,["maxProperties"]);p!=null&&s(e,["maxProperties"],p);const m=i(n,["maximum"]);m!=null&&s(e,["maximum"],m);const g=i(n,["minItems"]);g!=null&&s(e,["minItems"],g);const h=i(n,["minLength"]);h!=null&&s(e,["minLength"],h);const y=i(n,["minProperties"]);y!=null&&s(e,["minProperties"],y);const T=i(n,["minimum"]);T!=null&&s(e,["minimum"],T);const E=i(n,["nullable"]);E!=null&&s(e,["nullable"],E);const v=i(n,["pattern"]);v!=null&&s(e,["pattern"],v);const S=i(n,["properties"]);S!=null&&s(e,["properties"],S);const A=i(n,["propertyOrdering"]);A!=null&&s(e,["propertyOrdering"],A);const I=i(n,["required"]);I!=null&&s(e,["required"],I);const R=i(n,["title"]);R!=null&&s(e,["title"],R);const P=i(n,["type"]);return P!=null&&s(e,["type"],P),e}function gl(n){const e={};if(i(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=i(n,["category"]);t!=null&&s(e,["category"],t);const o=i(n,["threshold"]);return o!=null&&s(e,["threshold"],o),e}function hl(n){const e={},t=i(n,["behavior"]);t!=null&&s(e,["behavior"],t);const o=i(n,["description"]);o!=null&&s(e,["description"],o);const r=i(n,["name"]);r!=null&&s(e,["name"],r);const l=i(n,["parameters"]);l!=null&&s(e,["parameters"],l);const a=i(n,["parametersJsonSchema"]);a!=null&&s(e,["parametersJsonSchema"],a);const f=i(n,["response"]);f!=null&&s(e,["response"],f);const c=i(n,["responseJsonSchema"]);return c!=null&&s(e,["responseJsonSchema"],c),e}function yl(n){const e={},t=i(n,["startTime"]);t!=null&&s(e,["startTime"],t);const o=i(n,["endTime"]);return o!=null&&s(e,["endTime"],o),e}function Tl(n){const e={},t=i(n,["timeRangeFilter"]);return t!=null&&s(e,["timeRangeFilter"],yl(t)),e}function Cl(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["dynamicThreshold"]);return o!=null&&s(e,["dynamicThreshold"],o),e}function vl(n){const e={},t=i(n,["dynamicRetrievalConfig"]);return t!=null&&s(e,["dynamicRetrievalConfig"],Cl(t)),e}function Sl(){return{}}function El(n){const e={},t=i(n,["functionDeclarations"]);if(t!=null){let c=t;Array.isArray(c)&&(c=c.map(u=>hl(u))),s(e,["functionDeclarations"],c)}if(i(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(n,["googleSearch"]);o!=null&&s(e,["googleSearch"],Tl(o));const r=i(n,["googleSearchRetrieval"]);if(r!=null&&s(e,["googleSearchRetrieval"],vl(r)),i(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(i(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");i(n,["urlContext"])!=null&&s(e,["urlContext"],Sl());const a=i(n,["codeExecution"]);a!=null&&s(e,["codeExecution"],a);const f=i(n,["computerUse"]);return f!=null&&s(e,["computerUse"],f),e}function _l(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["allowedFunctionNames"]);return o!=null&&s(e,["allowedFunctionNames"],o),e}function Il(n){const e={},t=i(n,["latitude"]);t!=null&&s(e,["latitude"],t);const o=i(n,["longitude"]);return o!=null&&s(e,["longitude"],o),e}function Al(n){const e={},t=i(n,["latLng"]);t!=null&&s(e,["latLng"],Il(t));const o=i(n,["languageCode"]);return o!=null&&s(e,["languageCode"],o),e}function Ml(n){const e={},t=i(n,["functionCallingConfig"]);t!=null&&s(e,["functionCallingConfig"],_l(t));const o=i(n,["retrievalConfig"]);return o!=null&&s(e,["retrievalConfig"],Al(o)),e}function Rl(n){const e={},t=i(n,["voiceName"]);return t!=null&&s(e,["voiceName"],t),e}function Tt(n){const e={},t=i(n,["prebuiltVoiceConfig"]);return t!=null&&s(e,["prebuiltVoiceConfig"],Rl(t)),e}function Pl(n){const e={},t=i(n,["speaker"]);t!=null&&s(e,["speaker"],t);const o=i(n,["voiceConfig"]);return o!=null&&s(e,["voiceConfig"],Tt(o)),e}function xl(n){const e={},t=i(n,["speakerVoiceConfigs"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>Pl(r))),s(e,["speakerVoiceConfigs"],o)}return e}function wl(n){const e={},t=i(n,["voiceConfig"]);t!=null&&s(e,["voiceConfig"],Tt(t));const o=i(n,["multiSpeakerVoiceConfig"]);o!=null&&s(e,["multiSpeakerVoiceConfig"],xl(o));const r=i(n,["languageCode"]);return r!=null&&s(e,["languageCode"],r),e}function Nl(n){const e={},t=i(n,["includeThoughts"]);t!=null&&s(e,["includeThoughts"],t);const o=i(n,["thinkingBudget"]);return o!=null&&s(e,["thinkingBudget"],o),e}function Dl(n,e,t){const o={},r=i(e,["systemInstruction"]);t!==void 0&&r!=null&&s(t,["systemInstruction"],fe(U(r)));const l=i(e,["temperature"]);l!=null&&s(o,["temperature"],l);const a=i(e,["topP"]);a!=null&&s(o,["topP"],a);const f=i(e,["topK"]);f!=null&&s(o,["topK"],f);const c=i(e,["candidateCount"]);c!=null&&s(o,["candidateCount"],c);const u=i(e,["maxOutputTokens"]);u!=null&&s(o,["maxOutputTokens"],u);const d=i(e,["stopSequences"]);d!=null&&s(o,["stopSequences"],d);const p=i(e,["responseLogprobs"]);p!=null&&s(o,["responseLogprobs"],p);const m=i(e,["logprobs"]);m!=null&&s(o,["logprobs"],m);const g=i(e,["presencePenalty"]);g!=null&&s(o,["presencePenalty"],g);const h=i(e,["frequencyPenalty"]);h!=null&&s(o,["frequencyPenalty"],h);const y=i(e,["seed"]);y!=null&&s(o,["seed"],y);const T=i(e,["responseMimeType"]);T!=null&&s(o,["responseMimeType"],T);const E=i(e,["responseSchema"]);E!=null&&s(o,["responseSchema"],ml(Me(E)));const v=i(e,["responseJsonSchema"]);if(v!=null&&s(o,["responseJsonSchema"],v),i(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(i(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const S=i(e,["safetySettings"]);if(t!==void 0&&S!=null){let w=S;Array.isArray(w)&&(w=w.map(V=>gl(V))),s(t,["safetySettings"],w)}const A=i(e,["tools"]);if(t!==void 0&&A!=null){let w=X(A);Array.isArray(w)&&(w=w.map(V=>El(b(V)))),s(t,["tools"],w)}const I=i(e,["toolConfig"]);if(t!==void 0&&I!=null&&s(t,["toolConfig"],Ml(I)),i(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const R=i(e,["cachedContent"]);t!==void 0&&R!=null&&s(t,["cachedContent"],q(n,R));const P=i(e,["responseModalities"]);P!=null&&s(o,["responseModalities"],P);const k=i(e,["mediaResolution"]);k!=null&&s(o,["mediaResolution"],k);const M=i(e,["speechConfig"]);if(M!=null&&s(o,["speechConfig"],wl(Re(M))),i(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const N=i(e,["thinkingConfig"]);return N!=null&&s(o,["thinkingConfig"],Nl(N)),o}function qn(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],x(n,o));const r=i(e,["contents"]);if(r!=null){let a=L(r);Array.isArray(a)&&(a=a.map(f=>fe(f))),s(t,["contents"],a)}const l=i(e,["config"]);return l!=null&&s(t,["generationConfig"],Dl(n,l,t)),t}function kl(n,e){const t={},o=i(n,["taskType"]);e!==void 0&&o!=null&&s(e,["requests[]","taskType"],o);const r=i(n,["title"]);e!==void 0&&r!=null&&s(e,["requests[]","title"],r);const l=i(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&s(e,["requests[]","outputDimensionality"],l),i(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(i(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function Ul(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],x(n,o));const r=i(e,["contents"]);r!=null&&s(t,["requests[]","content"],nt(n,r));const l=i(e,["config"]);l!=null&&s(t,["config"],kl(l,t));const a=i(e,["model"]);return a!==void 0&&s(t,["requests[]","model"],x(n,a)),t}function Fl(n,e){const t={};if(i(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(i(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=i(n,["numberOfImages"]);e!==void 0&&o!=null&&s(e,["parameters","sampleCount"],o);const r=i(n,["aspectRatio"]);e!==void 0&&r!=null&&s(e,["parameters","aspectRatio"],r);const l=i(n,["guidanceScale"]);if(e!==void 0&&l!=null&&s(e,["parameters","guidanceScale"],l),i(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=i(n,["safetyFilterLevel"]);e!==void 0&&a!=null&&s(e,["parameters","safetySetting"],a);const f=i(n,["personGeneration"]);e!==void 0&&f!=null&&s(e,["parameters","personGeneration"],f);const c=i(n,["includeSafetyAttributes"]);e!==void 0&&c!=null&&s(e,["parameters","includeSafetyAttributes"],c);const u=i(n,["includeRaiReason"]);e!==void 0&&u!=null&&s(e,["parameters","includeRaiReason"],u);const d=i(n,["language"]);e!==void 0&&d!=null&&s(e,["parameters","language"],d);const p=i(n,["outputMimeType"]);e!==void 0&&p!=null&&s(e,["parameters","outputOptions","mimeType"],p);const m=i(n,["outputCompressionQuality"]);if(e!==void 0&&m!=null&&s(e,["parameters","outputOptions","compressionQuality"],m),i(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");const g=i(n,["imageSize"]);if(e!==void 0&&g!=null&&s(e,["parameters","sampleImageSize"],g),i(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function Ll(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],x(n,o));const r=i(e,["prompt"]);r!=null&&s(t,["instances[0]","prompt"],r);const l=i(e,["config"]);return l!=null&&s(t,["config"],Fl(l,t)),t}function Vl(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","name"],x(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],r),t}function Gl(n,e,t){const o={},r=i(e,["pageSize"]);t!==void 0&&r!=null&&s(t,["_query","pageSize"],r);const l=i(e,["pageToken"]);t!==void 0&&l!=null&&s(t,["_query","pageToken"],l);const a=i(e,["filter"]);t!==void 0&&a!=null&&s(t,["_query","filter"],a);const f=i(e,["queryBase"]);return t!==void 0&&f!=null&&s(t,["_url","models_url"],it(n,f)),o}function ql(n,e){const t={},o=i(e,["config"]);return o!=null&&s(t,["config"],Gl(n,o,t)),t}function Hl(n,e){const t={},o=i(n,["displayName"]);e!==void 0&&o!=null&&s(e,["displayName"],o);const r=i(n,["description"]);e!==void 0&&r!=null&&s(e,["description"],r);const l=i(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&s(e,["defaultCheckpointId"],l),t}function Bl(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","name"],x(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],Hl(r,t)),t}function Jl(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","name"],x(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],r),t}function $l(n){const e={};if(i(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(i(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(i(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function Yl(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],x(n,o));const r=i(e,["contents"]);if(r!=null){let a=L(r);Array.isArray(a)&&(a=a.map(f=>fe(f))),s(t,["contents"],a)}const l=i(e,["config"]);return l!=null&&s(t,["config"],$l(l)),t}function Kl(n){const e={};if(i(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=i(n,["imageBytes"]);t!=null&&s(e,["bytesBase64Encoded"],$(t));const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Wl(n,e){const t={},o=i(n,["numberOfVideos"]);if(e!==void 0&&o!=null&&s(e,["parameters","sampleCount"],o),i(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(i(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=i(n,["durationSeconds"]);if(e!==void 0&&r!=null&&s(e,["parameters","durationSeconds"],r),i(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=i(n,["aspectRatio"]);if(e!==void 0&&l!=null&&s(e,["parameters","aspectRatio"],l),i(n,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const a=i(n,["personGeneration"]);if(e!==void 0&&a!=null&&s(e,["parameters","personGeneration"],a),i(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const f=i(n,["negativePrompt"]);e!==void 0&&f!=null&&s(e,["parameters","negativePrompt"],f);const c=i(n,["enhancePrompt"]);if(e!==void 0&&c!=null&&s(e,["parameters","enhancePrompt"],c),i(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(i(n,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(i(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function zl(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],x(n,o));const r=i(e,["prompt"]);r!=null&&s(t,["instances[0]","prompt"],r);const l=i(e,["image"]);if(l!=null&&s(t,["instances[0]","image"],Kl(l)),i(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const a=i(e,["config"]);return a!=null&&s(t,["config"],Wl(a,t)),t}function bl(n){const e={},t=i(n,["fps"]);t!=null&&s(e,["fps"],t);const o=i(n,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function Xl(n){const e={},t=i(n,["displayName"]);t!=null&&s(e,["displayName"],t);const o=i(n,["data"]);o!=null&&s(e,["data"],o);const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function Ql(n){const e={},t=i(n,["displayName"]);t!=null&&s(e,["displayName"],t);const o=i(n,["fileUri"]);o!=null&&s(e,["fileUri"],o);const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function Zl(n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],bl(t));const o=i(n,["thought"]);o!=null&&s(e,["thought"],o);const r=i(n,["inlineData"]);r!=null&&s(e,["inlineData"],Xl(r));const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],Ql(l));const a=i(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const f=i(n,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);const c=i(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const u=i(n,["functionCall"]);u!=null&&s(e,["functionCall"],u);const d=i(n,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=i(n,["text"]);return p!=null&&s(e,["text"],p),e}function Z(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>Zl(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function Ol(n){const e={},t=i(n,["anyOf"]);t!=null&&s(e,["anyOf"],t);const o=i(n,["default"]);o!=null&&s(e,["default"],o);const r=i(n,["description"]);r!=null&&s(e,["description"],r);const l=i(n,["enum"]);l!=null&&s(e,["enum"],l);const a=i(n,["example"]);a!=null&&s(e,["example"],a);const f=i(n,["format"]);f!=null&&s(e,["format"],f);const c=i(n,["items"]);c!=null&&s(e,["items"],c);const u=i(n,["maxItems"]);u!=null&&s(e,["maxItems"],u);const d=i(n,["maxLength"]);d!=null&&s(e,["maxLength"],d);const p=i(n,["maxProperties"]);p!=null&&s(e,["maxProperties"],p);const m=i(n,["maximum"]);m!=null&&s(e,["maximum"],m);const g=i(n,["minItems"]);g!=null&&s(e,["minItems"],g);const h=i(n,["minLength"]);h!=null&&s(e,["minLength"],h);const y=i(n,["minProperties"]);y!=null&&s(e,["minProperties"],y);const T=i(n,["minimum"]);T!=null&&s(e,["minimum"],T);const E=i(n,["nullable"]);E!=null&&s(e,["nullable"],E);const v=i(n,["pattern"]);v!=null&&s(e,["pattern"],v);const S=i(n,["properties"]);S!=null&&s(e,["properties"],S);const A=i(n,["propertyOrdering"]);A!=null&&s(e,["propertyOrdering"],A);const I=i(n,["required"]);I!=null&&s(e,["required"],I);const R=i(n,["title"]);R!=null&&s(e,["title"],R);const P=i(n,["type"]);return P!=null&&s(e,["type"],P),e}function jl(n){const e={},t=i(n,["featureSelectionPreference"]);return t!=null&&s(e,["featureSelectionPreference"],t),e}function ea(n){const e={},t=i(n,["method"]);t!=null&&s(e,["method"],t);const o=i(n,["category"]);o!=null&&s(e,["category"],o);const r=i(n,["threshold"]);return r!=null&&s(e,["threshold"],r),e}function na(n){const e={};if(i(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=i(n,["description"]);t!=null&&s(e,["description"],t);const o=i(n,["name"]);o!=null&&s(e,["name"],o);const r=i(n,["parameters"]);r!=null&&s(e,["parameters"],r);const l=i(n,["parametersJsonSchema"]);l!=null&&s(e,["parametersJsonSchema"],l);const a=i(n,["response"]);a!=null&&s(e,["response"],a);const f=i(n,["responseJsonSchema"]);return f!=null&&s(e,["responseJsonSchema"],f),e}function ta(n){const e={},t=i(n,["startTime"]);t!=null&&s(e,["startTime"],t);const o=i(n,["endTime"]);return o!=null&&s(e,["endTime"],o),e}function oa(n){const e={},t=i(n,["timeRangeFilter"]);return t!=null&&s(e,["timeRangeFilter"],ta(t)),e}function ia(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["dynamicThreshold"]);return o!=null&&s(e,["dynamicThreshold"],o),e}function sa(n){const e={},t=i(n,["dynamicRetrievalConfig"]);return t!=null&&s(e,["dynamicRetrievalConfig"],ia(t)),e}function ra(){return{}}function la(n){const e={},t=i(n,["apiKeyString"]);return t!=null&&s(e,["apiKeyString"],t),e}function aa(n){const e={},t=i(n,["apiKeyConfig"]);t!=null&&s(e,["apiKeyConfig"],la(t));const o=i(n,["authType"]);o!=null&&s(e,["authType"],o);const r=i(n,["googleServiceAccountConfig"]);r!=null&&s(e,["googleServiceAccountConfig"],r);const l=i(n,["httpBasicAuthConfig"]);l!=null&&s(e,["httpBasicAuthConfig"],l);const a=i(n,["oauthConfig"]);a!=null&&s(e,["oauthConfig"],a);const f=i(n,["oidcConfig"]);return f!=null&&s(e,["oidcConfig"],f),e}function ua(n){const e={},t=i(n,["authConfig"]);return t!=null&&s(e,["authConfig"],aa(t)),e}function fa(){return{}}function Ct(n){const e={},t=i(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(m=>na(m))),s(e,["functionDeclarations"],p)}const o=i(n,["retrieval"]);o!=null&&s(e,["retrieval"],o);const r=i(n,["googleSearch"]);r!=null&&s(e,["googleSearch"],oa(r));const l=i(n,["googleSearchRetrieval"]);l!=null&&s(e,["googleSearchRetrieval"],sa(l)),i(n,["enterpriseWebSearch"])!=null&&s(e,["enterpriseWebSearch"],ra());const f=i(n,["googleMaps"]);f!=null&&s(e,["googleMaps"],ua(f)),i(n,["urlContext"])!=null&&s(e,["urlContext"],fa());const u=i(n,["codeExecution"]);u!=null&&s(e,["codeExecution"],u);const d=i(n,["computerUse"]);return d!=null&&s(e,["computerUse"],d),e}function ca(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["allowedFunctionNames"]);return o!=null&&s(e,["allowedFunctionNames"],o),e}function da(n){const e={},t=i(n,["latitude"]);t!=null&&s(e,["latitude"],t);const o=i(n,["longitude"]);return o!=null&&s(e,["longitude"],o),e}function pa(n){const e={},t=i(n,["latLng"]);t!=null&&s(e,["latLng"],da(t));const o=i(n,["languageCode"]);return o!=null&&s(e,["languageCode"],o),e}function ma(n){const e={},t=i(n,["functionCallingConfig"]);t!=null&&s(e,["functionCallingConfig"],ca(t));const o=i(n,["retrievalConfig"]);return o!=null&&s(e,["retrievalConfig"],pa(o)),e}function ga(n){const e={},t=i(n,["voiceName"]);return t!=null&&s(e,["voiceName"],t),e}function ha(n){const e={},t=i(n,["prebuiltVoiceConfig"]);return t!=null&&s(e,["prebuiltVoiceConfig"],ga(t)),e}function ya(n){const e={},t=i(n,["voiceConfig"]);if(t!=null&&s(e,["voiceConfig"],ha(t)),i(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const o=i(n,["languageCode"]);return o!=null&&s(e,["languageCode"],o),e}function Ta(n){const e={},t=i(n,["includeThoughts"]);t!=null&&s(e,["includeThoughts"],t);const o=i(n,["thinkingBudget"]);return o!=null&&s(e,["thinkingBudget"],o),e}function Ca(n,e,t){const o={},r=i(e,["systemInstruction"]);t!==void 0&&r!=null&&s(t,["systemInstruction"],Z(U(r)));const l=i(e,["temperature"]);l!=null&&s(o,["temperature"],l);const a=i(e,["topP"]);a!=null&&s(o,["topP"],a);const f=i(e,["topK"]);f!=null&&s(o,["topK"],f);const c=i(e,["candidateCount"]);c!=null&&s(o,["candidateCount"],c);const u=i(e,["maxOutputTokens"]);u!=null&&s(o,["maxOutputTokens"],u);const d=i(e,["stopSequences"]);d!=null&&s(o,["stopSequences"],d);const p=i(e,["responseLogprobs"]);p!=null&&s(o,["responseLogprobs"],p);const m=i(e,["logprobs"]);m!=null&&s(o,["logprobs"],m);const g=i(e,["presencePenalty"]);g!=null&&s(o,["presencePenalty"],g);const h=i(e,["frequencyPenalty"]);h!=null&&s(o,["frequencyPenalty"],h);const y=i(e,["seed"]);y!=null&&s(o,["seed"],y);const T=i(e,["responseMimeType"]);T!=null&&s(o,["responseMimeType"],T);const E=i(e,["responseSchema"]);E!=null&&s(o,["responseSchema"],Ol(Me(E)));const v=i(e,["responseJsonSchema"]);v!=null&&s(o,["responseJsonSchema"],v);const S=i(e,["routingConfig"]);S!=null&&s(o,["routingConfig"],S);const A=i(e,["modelSelectionConfig"]);A!=null&&s(o,["modelConfig"],jl(A));const I=i(e,["safetySettings"]);if(t!==void 0&&I!=null){let G=I;Array.isArray(G)&&(G=G.map(de=>ea(de))),s(t,["safetySettings"],G)}const R=i(e,["tools"]);if(t!==void 0&&R!=null){let G=X(R);Array.isArray(G)&&(G=G.map(de=>Ct(b(de)))),s(t,["tools"],G)}const P=i(e,["toolConfig"]);t!==void 0&&P!=null&&s(t,["toolConfig"],ma(P));const k=i(e,["labels"]);t!==void 0&&k!=null&&s(t,["labels"],k);const M=i(e,["cachedContent"]);t!==void 0&&M!=null&&s(t,["cachedContent"],q(n,M));const N=i(e,["responseModalities"]);N!=null&&s(o,["responseModalities"],N);const w=i(e,["mediaResolution"]);w!=null&&s(o,["mediaResolution"],w);const V=i(e,["speechConfig"]);V!=null&&s(o,["speechConfig"],ya(Re(V)));const we=i(e,["audioTimestamp"]);we!=null&&s(o,["audioTimestamp"],we);const Ne=i(e,["thinkingConfig"]);return Ne!=null&&s(o,["thinkingConfig"],Ta(Ne)),o}function Hn(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],x(n,o));const r=i(e,["contents"]);if(r!=null){let a=L(r);Array.isArray(a)&&(a=a.map(f=>Z(f))),s(t,["contents"],a)}const l=i(e,["config"]);return l!=null&&s(t,["generationConfig"],Ca(n,l,t)),t}function va(n,e){const t={},o=i(n,["taskType"]);e!==void 0&&o!=null&&s(e,["instances[]","task_type"],o);const r=i(n,["title"]);e!==void 0&&r!=null&&s(e,["instances[]","title"],r);const l=i(n,["outputDimensionality"]);e!==void 0&&l!=null&&s(e,["parameters","outputDimensionality"],l);const a=i(n,["mimeType"]);e!==void 0&&a!=null&&s(e,["instances[]","mimeType"],a);const f=i(n,["autoTruncate"]);return e!==void 0&&f!=null&&s(e,["parameters","autoTruncate"],f),t}function Sa(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],x(n,o));const r=i(e,["contents"]);r!=null&&s(t,["instances[]","content"],nt(n,r));const l=i(e,["config"]);return l!=null&&s(t,["config"],va(l,t)),t}function Ea(n,e){const t={},o=i(n,["outputGcsUri"]);e!==void 0&&o!=null&&s(e,["parameters","storageUri"],o);const r=i(n,["negativePrompt"]);e!==void 0&&r!=null&&s(e,["parameters","negativePrompt"],r);const l=i(n,["numberOfImages"]);e!==void 0&&l!=null&&s(e,["parameters","sampleCount"],l);const a=i(n,["aspectRatio"]);e!==void 0&&a!=null&&s(e,["parameters","aspectRatio"],a);const f=i(n,["guidanceScale"]);e!==void 0&&f!=null&&s(e,["parameters","guidanceScale"],f);const c=i(n,["seed"]);e!==void 0&&c!=null&&s(e,["parameters","seed"],c);const u=i(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&s(e,["parameters","safetySetting"],u);const d=i(n,["personGeneration"]);e!==void 0&&d!=null&&s(e,["parameters","personGeneration"],d);const p=i(n,["includeSafetyAttributes"]);e!==void 0&&p!=null&&s(e,["parameters","includeSafetyAttributes"],p);const m=i(n,["includeRaiReason"]);e!==void 0&&m!=null&&s(e,["parameters","includeRaiReason"],m);const g=i(n,["language"]);e!==void 0&&g!=null&&s(e,["parameters","language"],g);const h=i(n,["outputMimeType"]);e!==void 0&&h!=null&&s(e,["parameters","outputOptions","mimeType"],h);const y=i(n,["outputCompressionQuality"]);e!==void 0&&y!=null&&s(e,["parameters","outputOptions","compressionQuality"],y);const T=i(n,["addWatermark"]);e!==void 0&&T!=null&&s(e,["parameters","addWatermark"],T);const E=i(n,["imageSize"]);e!==void 0&&E!=null&&s(e,["parameters","sampleImageSize"],E);const v=i(n,["enhancePrompt"]);return e!==void 0&&v!=null&&s(e,["parameters","enhancePrompt"],v),t}function _a(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],x(n,o));const r=i(e,["prompt"]);r!=null&&s(t,["instances[0]","prompt"],r);const l=i(e,["config"]);return l!=null&&s(t,["config"],Ea(l,t)),t}function O(n){const e={},t=i(n,["gcsUri"]);t!=null&&s(e,["gcsUri"],t);const o=i(n,["imageBytes"]);o!=null&&s(e,["bytesBase64Encoded"],$(o));const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function Ia(n){const e={},t=i(n,["maskMode"]);t!=null&&s(e,["maskMode"],t);const o=i(n,["segmentationClasses"]);o!=null&&s(e,["maskClasses"],o);const r=i(n,["maskDilation"]);return r!=null&&s(e,["dilation"],r),e}function Aa(n){const e={},t=i(n,["controlType"]);t!=null&&s(e,["controlType"],t);const o=i(n,["enableControlImageComputation"]);return o!=null&&s(e,["computeControl"],o),e}function Ma(n){const e={},t=i(n,["styleDescription"]);return t!=null&&s(e,["styleDescription"],t),e}function Ra(n){const e={},t=i(n,["subjectType"]);t!=null&&s(e,["subjectType"],t);const o=i(n,["subjectDescription"]);return o!=null&&s(e,["subjectDescription"],o),e}function Pa(n){const e={},t=i(n,["referenceImage"]);t!=null&&s(e,["referenceImage"],O(t));const o=i(n,["referenceId"]);o!=null&&s(e,["referenceId"],o);const r=i(n,["referenceType"]);r!=null&&s(e,["referenceType"],r);const l=i(n,["maskImageConfig"]);l!=null&&s(e,["maskImageConfig"],Ia(l));const a=i(n,["controlImageConfig"]);a!=null&&s(e,["controlImageConfig"],Aa(a));const f=i(n,["styleImageConfig"]);f!=null&&s(e,["styleImageConfig"],Ma(f));const c=i(n,["subjectImageConfig"]);return c!=null&&s(e,["subjectImageConfig"],Ra(c)),e}function xa(n,e){const t={},o=i(n,["outputGcsUri"]);e!==void 0&&o!=null&&s(e,["parameters","storageUri"],o);const r=i(n,["negativePrompt"]);e!==void 0&&r!=null&&s(e,["parameters","negativePrompt"],r);const l=i(n,["numberOfImages"]);e!==void 0&&l!=null&&s(e,["parameters","sampleCount"],l);const a=i(n,["aspectRatio"]);e!==void 0&&a!=null&&s(e,["parameters","aspectRatio"],a);const f=i(n,["guidanceScale"]);e!==void 0&&f!=null&&s(e,["parameters","guidanceScale"],f);const c=i(n,["seed"]);e!==void 0&&c!=null&&s(e,["parameters","seed"],c);const u=i(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&s(e,["parameters","safetySetting"],u);const d=i(n,["personGeneration"]);e!==void 0&&d!=null&&s(e,["parameters","personGeneration"],d);const p=i(n,["includeSafetyAttributes"]);e!==void 0&&p!=null&&s(e,["parameters","includeSafetyAttributes"],p);const m=i(n,["includeRaiReason"]);e!==void 0&&m!=null&&s(e,["parameters","includeRaiReason"],m);const g=i(n,["language"]);e!==void 0&&g!=null&&s(e,["parameters","language"],g);const h=i(n,["outputMimeType"]);e!==void 0&&h!=null&&s(e,["parameters","outputOptions","mimeType"],h);const y=i(n,["outputCompressionQuality"]);e!==void 0&&y!=null&&s(e,["parameters","outputOptions","compressionQuality"],y);const T=i(n,["addWatermark"]);e!==void 0&&T!=null&&s(e,["parameters","addWatermark"],T);const E=i(n,["editMode"]);e!==void 0&&E!=null&&s(e,["parameters","editMode"],E);const v=i(n,["baseSteps"]);return e!==void 0&&v!=null&&s(e,["parameters","editConfig","baseSteps"],v),t}function wa(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],x(n,o));const r=i(e,["prompt"]);r!=null&&s(t,["instances[0]","prompt"],r);const l=i(e,["referenceImages"]);if(l!=null){let f=l;Array.isArray(f)&&(f=f.map(c=>Pa(c))),s(t,["instances[0]","referenceImages"],f)}const a=i(e,["config"]);return a!=null&&s(t,["config"],xa(a,t)),t}function Na(n,e){const t={},o=i(n,["includeRaiReason"]);e!==void 0&&o!=null&&s(e,["parameters","includeRaiReason"],o);const r=i(n,["outputMimeType"]);e!==void 0&&r!=null&&s(e,["parameters","outputOptions","mimeType"],r);const l=i(n,["outputCompressionQuality"]);e!==void 0&&l!=null&&s(e,["parameters","outputOptions","compressionQuality"],l);const a=i(n,["enhanceInputImage"]);e!==void 0&&a!=null&&s(e,["parameters","upscaleConfig","enhanceInputImage"],a);const f=i(n,["imagePreservationFactor"]);e!==void 0&&f!=null&&s(e,["parameters","upscaleConfig","imagePreservationFactor"],f);const c=i(n,["numberOfImages"]);e!==void 0&&c!=null&&s(e,["parameters","sampleCount"],c);const u=i(n,["mode"]);return e!==void 0&&u!=null&&s(e,["parameters","mode"],u),t}function Da(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],x(n,o));const r=i(e,["image"]);r!=null&&s(t,["instances[0]","image"],O(r));const l=i(e,["upscaleFactor"]);l!=null&&s(t,["parameters","upscaleConfig","upscaleFactor"],l);const a=i(e,["config"]);return a!=null&&s(t,["config"],Na(a,t)),t}function ka(n){const e={},t=i(n,["productImage"]);return t!=null&&s(e,["image"],O(t)),e}function Ua(n,e){const t={},o=i(n,["prompt"]);e!==void 0&&o!=null&&s(e,["instances[0]","prompt"],o);const r=i(n,["personImage"]);e!==void 0&&r!=null&&s(e,["instances[0]","personImage","image"],O(r));const l=i(n,["productImages"]);if(e!==void 0&&l!=null){let a=l;Array.isArray(a)&&(a=a.map(f=>ka(f))),s(e,["instances[0]","productImages"],a)}return t}function Fa(n,e){const t={},o=i(n,["numberOfImages"]);e!==void 0&&o!=null&&s(e,["parameters","sampleCount"],o);const r=i(n,["baseSteps"]);e!==void 0&&r!=null&&s(e,["parameters","editConfig","baseSteps"],r);const l=i(n,["outputGcsUri"]);e!==void 0&&l!=null&&s(e,["parameters","storageUri"],l);const a=i(n,["seed"]);e!==void 0&&a!=null&&s(e,["parameters","seed"],a);const f=i(n,["safetyFilterLevel"]);e!==void 0&&f!=null&&s(e,["parameters","safetySetting"],f);const c=i(n,["personGeneration"]);e!==void 0&&c!=null&&s(e,["parameters","personGeneration"],c);const u=i(n,["outputMimeType"]);e!==void 0&&u!=null&&s(e,["parameters","outputOptions","mimeType"],u);const d=i(n,["outputCompressionQuality"]);e!==void 0&&d!=null&&s(e,["parameters","outputOptions","compressionQuality"],d);const p=i(n,["enhancePrompt"]);return e!==void 0&&p!=null&&s(e,["parameters","enhancePrompt"],p),t}function La(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],x(n,o));const r=i(e,["source"]);r!=null&&s(t,["config"],Ua(r,t));const l=i(e,["config"]);return l!=null&&s(t,["config"],Fa(l,t)),t}function Va(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","name"],x(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],r),t}function Ga(n,e,t){const o={},r=i(e,["pageSize"]);t!==void 0&&r!=null&&s(t,["_query","pageSize"],r);const l=i(e,["pageToken"]);t!==void 0&&l!=null&&s(t,["_query","pageToken"],l);const a=i(e,["filter"]);t!==void 0&&a!=null&&s(t,["_query","filter"],a);const f=i(e,["queryBase"]);return t!==void 0&&f!=null&&s(t,["_url","models_url"],it(n,f)),o}function qa(n,e){const t={},o=i(e,["config"]);return o!=null&&s(t,["config"],Ga(n,o,t)),t}function Ha(n,e){const t={},o=i(n,["displayName"]);e!==void 0&&o!=null&&s(e,["displayName"],o);const r=i(n,["description"]);e!==void 0&&r!=null&&s(e,["description"],r);const l=i(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&s(e,["defaultCheckpointId"],l),t}function Ba(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],x(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],Ha(r,t)),t}function Ja(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","name"],x(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],r),t}function $a(n,e){const t={},o=i(n,["systemInstruction"]);e!==void 0&&o!=null&&s(e,["systemInstruction"],Z(U(o)));const r=i(n,["tools"]);if(e!==void 0&&r!=null){let a=r;Array.isArray(a)&&(a=a.map(f=>Ct(f))),s(e,["tools"],a)}const l=i(n,["generationConfig"]);return e!==void 0&&l!=null&&s(e,["generationConfig"],l),t}function Ya(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],x(n,o));const r=i(e,["contents"]);if(r!=null){let a=L(r);Array.isArray(a)&&(a=a.map(f=>Z(f))),s(t,["contents"],a)}const l=i(e,["config"]);return l!=null&&s(t,["config"],$a(l,t)),t}function Ka(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],x(n,o));const r=i(e,["contents"]);if(r!=null){let a=L(r);Array.isArray(a)&&(a=a.map(f=>Z(f))),s(t,["contents"],a)}const l=i(e,["config"]);return l!=null&&s(t,["config"],l),t}function Wa(n){const e={},t=i(n,["uri"]);t!=null&&s(e,["gcsUri"],t);const o=i(n,["videoBytes"]);o!=null&&s(e,["bytesBase64Encoded"],$(o));const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function za(n,e){const t={},o=i(n,["numberOfVideos"]);e!==void 0&&o!=null&&s(e,["parameters","sampleCount"],o);const r=i(n,["outputGcsUri"]);e!==void 0&&r!=null&&s(e,["parameters","storageUri"],r);const l=i(n,["fps"]);e!==void 0&&l!=null&&s(e,["parameters","fps"],l);const a=i(n,["durationSeconds"]);e!==void 0&&a!=null&&s(e,["parameters","durationSeconds"],a);const f=i(n,["seed"]);e!==void 0&&f!=null&&s(e,["parameters","seed"],f);const c=i(n,["aspectRatio"]);e!==void 0&&c!=null&&s(e,["parameters","aspectRatio"],c);const u=i(n,["resolution"]);e!==void 0&&u!=null&&s(e,["parameters","resolution"],u);const d=i(n,["personGeneration"]);e!==void 0&&d!=null&&s(e,["parameters","personGeneration"],d);const p=i(n,["pubsubTopic"]);e!==void 0&&p!=null&&s(e,["parameters","pubsubTopic"],p);const m=i(n,["negativePrompt"]);e!==void 0&&m!=null&&s(e,["parameters","negativePrompt"],m);const g=i(n,["enhancePrompt"]);e!==void 0&&g!=null&&s(e,["parameters","enhancePrompt"],g);const h=i(n,["generateAudio"]);e!==void 0&&h!=null&&s(e,["parameters","generateAudio"],h);const y=i(n,["lastFrame"]);e!==void 0&&y!=null&&s(e,["instances[0]","lastFrame"],O(y));const T=i(n,["compressionQuality"]);return e!==void 0&&T!=null&&s(e,["parameters","compressionQuality"],T),t}function ba(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["_url","model"],x(n,o));const r=i(e,["prompt"]);r!=null&&s(t,["instances[0]","prompt"],r);const l=i(e,["image"]);l!=null&&s(t,["instances[0]","image"],O(l));const a=i(e,["video"]);a!=null&&s(t,["instances[0]","video"],Wa(a));const f=i(e,["config"]);return f!=null&&s(t,["config"],za(f,t)),t}function Xa(n){const e={},t=i(n,["fps"]);t!=null&&s(e,["fps"],t);const o=i(n,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function Qa(n){const e={},t=i(n,["data"]);t!=null&&s(e,["data"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Za(n){const e={},t=i(n,["fileUri"]);t!=null&&s(e,["fileUri"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Oa(n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],Xa(t));const o=i(n,["thought"]);o!=null&&s(e,["thought"],o);const r=i(n,["inlineData"]);r!=null&&s(e,["inlineData"],Qa(r));const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],Za(l));const a=i(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const f=i(n,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);const c=i(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const u=i(n,["functionCall"]);u!=null&&s(e,["functionCall"],u);const d=i(n,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=i(n,["text"]);return p!=null&&s(e,["text"],p),e}function ja(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>Oa(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function eu(n){const e={},t=i(n,["citationSources"]);return t!=null&&s(e,["citations"],t),e}function nu(n){const e={},t=i(n,["retrievedUrl"]);t!=null&&s(e,["retrievedUrl"],t);const o=i(n,["urlRetrievalStatus"]);return o!=null&&s(e,["urlRetrievalStatus"],o),e}function tu(n){const e={},t=i(n,["urlMetadata"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>nu(r))),s(e,["urlMetadata"],o)}return e}function ou(n){const e={},t=i(n,["content"]);t!=null&&s(e,["content"],ja(t));const o=i(n,["citationMetadata"]);o!=null&&s(e,["citationMetadata"],eu(o));const r=i(n,["tokenCount"]);r!=null&&s(e,["tokenCount"],r);const l=i(n,["finishReason"]);l!=null&&s(e,["finishReason"],l);const a=i(n,["urlContextMetadata"]);a!=null&&s(e,["urlContextMetadata"],tu(a));const f=i(n,["avgLogprobs"]);f!=null&&s(e,["avgLogprobs"],f);const c=i(n,["groundingMetadata"]);c!=null&&s(e,["groundingMetadata"],c);const u=i(n,["index"]);u!=null&&s(e,["index"],u);const d=i(n,["logprobsResult"]);d!=null&&s(e,["logprobsResult"],d);const p=i(n,["safetyRatings"]);return p!=null&&s(e,["safetyRatings"],p),e}function Bn(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["candidates"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(u=>ou(u))),s(e,["candidates"],c)}const r=i(n,["modelVersion"]);r!=null&&s(e,["modelVersion"],r);const l=i(n,["promptFeedback"]);l!=null&&s(e,["promptFeedback"],l);const a=i(n,["responseId"]);a!=null&&s(e,["responseId"],a);const f=i(n,["usageMetadata"]);return f!=null&&s(e,["usageMetadata"],f),e}function iu(n){const e={},t=i(n,["values"]);return t!=null&&s(e,["values"],t),e}function su(){return{}}function ru(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["embeddings"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>iu(a))),s(e,["embeddings"],l)}return i(n,["metadata"])!=null&&s(e,["metadata"],su()),e}function lu(n){const e={},t=i(n,["bytesBase64Encoded"]);t!=null&&s(e,["imageBytes"],$(t));const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function vt(n){const e={},t=i(n,["safetyAttributes","categories"]);t!=null&&s(e,["categories"],t);const o=i(n,["safetyAttributes","scores"]);o!=null&&s(e,["scores"],o);const r=i(n,["contentType"]);return r!=null&&s(e,["contentType"],r),e}function au(n){const e={},t=i(n,["_self"]);t!=null&&s(e,["image"],lu(t));const o=i(n,["raiFilteredReason"]);o!=null&&s(e,["raiFilteredReason"],o);const r=i(n,["_self"]);return r!=null&&s(e,["safetyAttributes"],vt(r)),e}function uu(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["predictions"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>au(a))),s(e,["generatedImages"],l)}const r=i(n,["positivePromptSafetyAttributes"]);return r!=null&&s(e,["positivePromptSafetyAttributes"],vt(r)),e}function fu(n){const e={},t=i(n,["baseModel"]);t!=null&&s(e,["baseModel"],t);const o=i(n,["createTime"]);o!=null&&s(e,["createTime"],o);const r=i(n,["updateTime"]);return r!=null&&s(e,["updateTime"],r),e}function Ee(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["displayName"]);o!=null&&s(e,["displayName"],o);const r=i(n,["description"]);r!=null&&s(e,["description"],r);const l=i(n,["version"]);l!=null&&s(e,["version"],l);const a=i(n,["_self"]);a!=null&&s(e,["tunedModelInfo"],fu(a));const f=i(n,["inputTokenLimit"]);f!=null&&s(e,["inputTokenLimit"],f);const c=i(n,["outputTokenLimit"]);c!=null&&s(e,["outputTokenLimit"],c);const u=i(n,["supportedGenerationMethods"]);return u!=null&&s(e,["supportedActions"],u),e}function cu(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(n,["_self"]);if(r!=null){let l=st(r);Array.isArray(l)&&(l=l.map(a=>Ee(a))),s(e,["models"],l)}return e}function du(){return{}}function pu(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["totalTokens"]);o!=null&&s(e,["totalTokens"],o);const r=i(n,["cachedContentTokenCount"]);return r!=null&&s(e,["cachedContentTokenCount"],r),e}function mu(n){const e={},t=i(n,["video","uri"]);t!=null&&s(e,["uri"],t);const o=i(n,["video","encodedVideo"]);o!=null&&s(e,["videoBytes"],$(o));const r=i(n,["encoding"]);return r!=null&&s(e,["mimeType"],r),e}function gu(n){const e={},t=i(n,["_self"]);return t!=null&&s(e,["video"],mu(t)),e}function hu(n){const e={},t=i(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(a=>gu(a))),s(e,["generatedVideos"],l)}const o=i(n,["raiMediaFilteredCount"]);o!=null&&s(e,["raiMediaFilteredCount"],o);const r=i(n,["raiMediaFilteredReasons"]);return r!=null&&s(e,["raiMediaFilteredReasons"],r),e}function yu(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["metadata"]);o!=null&&s(e,["metadata"],o);const r=i(n,["done"]);r!=null&&s(e,["done"],r);const l=i(n,["error"]);l!=null&&s(e,["error"],l);const a=i(n,["response","generateVideoResponse"]);return a!=null&&s(e,["response"],hu(a)),e}function Tu(n){const e={},t=i(n,["fps"]);t!=null&&s(e,["fps"],t);const o=i(n,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function Cu(n){const e={},t=i(n,["displayName"]);t!=null&&s(e,["displayName"],t);const o=i(n,["data"]);o!=null&&s(e,["data"],o);const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function vu(n){const e={},t=i(n,["displayName"]);t!=null&&s(e,["displayName"],t);const o=i(n,["fileUri"]);o!=null&&s(e,["fileUri"],o);const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function Su(n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],Tu(t));const o=i(n,["thought"]);o!=null&&s(e,["thought"],o);const r=i(n,["inlineData"]);r!=null&&s(e,["inlineData"],Cu(r));const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],vu(l));const a=i(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const f=i(n,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);const c=i(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const u=i(n,["functionCall"]);u!=null&&s(e,["functionCall"],u);const d=i(n,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=i(n,["text"]);return p!=null&&s(e,["text"],p),e}function Eu(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>Su(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function _u(n){const e={},t=i(n,["citations"]);return t!=null&&s(e,["citations"],t),e}function Iu(n){const e={},t=i(n,["retrievedUrl"]);t!=null&&s(e,["retrievedUrl"],t);const o=i(n,["urlRetrievalStatus"]);return o!=null&&s(e,["urlRetrievalStatus"],o),e}function Au(n){const e={},t=i(n,["urlMetadata"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>Iu(r))),s(e,["urlMetadata"],o)}return e}function Mu(n){const e={},t=i(n,["content"]);t!=null&&s(e,["content"],Eu(t));const o=i(n,["citationMetadata"]);o!=null&&s(e,["citationMetadata"],_u(o));const r=i(n,["finishMessage"]);r!=null&&s(e,["finishMessage"],r);const l=i(n,["finishReason"]);l!=null&&s(e,["finishReason"],l);const a=i(n,["urlContextMetadata"]);a!=null&&s(e,["urlContextMetadata"],Au(a));const f=i(n,["avgLogprobs"]);f!=null&&s(e,["avgLogprobs"],f);const c=i(n,["groundingMetadata"]);c!=null&&s(e,["groundingMetadata"],c);const u=i(n,["index"]);u!=null&&s(e,["index"],u);const d=i(n,["logprobsResult"]);d!=null&&s(e,["logprobsResult"],d);const p=i(n,["safetyRatings"]);return p!=null&&s(e,["safetyRatings"],p),e}function Jn(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["candidates"]);if(o!=null){let u=o;Array.isArray(u)&&(u=u.map(d=>Mu(d))),s(e,["candidates"],u)}const r=i(n,["createTime"]);r!=null&&s(e,["createTime"],r);const l=i(n,["modelVersion"]);l!=null&&s(e,["modelVersion"],l);const a=i(n,["promptFeedback"]);a!=null&&s(e,["promptFeedback"],a);const f=i(n,["responseId"]);f!=null&&s(e,["responseId"],f);const c=i(n,["usageMetadata"]);return c!=null&&s(e,["usageMetadata"],c),e}function Ru(n){const e={},t=i(n,["truncated"]);t!=null&&s(e,["truncated"],t);const o=i(n,["token_count"]);return o!=null&&s(e,["tokenCount"],o),e}function Pu(n){const e={},t=i(n,["values"]);t!=null&&s(e,["values"],t);const o=i(n,["statistics"]);return o!=null&&s(e,["statistics"],Ru(o)),e}function xu(n){const e={},t=i(n,["billableCharacterCount"]);return t!=null&&s(e,["billableCharacterCount"],t),e}function wu(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["predictions[]","embeddings"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>Pu(a))),s(e,["embeddings"],l)}const r=i(n,["metadata"]);return r!=null&&s(e,["metadata"],xu(r)),e}function Nu(n){const e={},t=i(n,["gcsUri"]);t!=null&&s(e,["gcsUri"],t);const o=i(n,["bytesBase64Encoded"]);o!=null&&s(e,["imageBytes"],$(o));const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function St(n){const e={},t=i(n,["safetyAttributes","categories"]);t!=null&&s(e,["categories"],t);const o=i(n,["safetyAttributes","scores"]);o!=null&&s(e,["scores"],o);const r=i(n,["contentType"]);return r!=null&&s(e,["contentType"],r),e}function ce(n){const e={},t=i(n,["_self"]);t!=null&&s(e,["image"],Nu(t));const o=i(n,["raiFilteredReason"]);o!=null&&s(e,["raiFilteredReason"],o);const r=i(n,["_self"]);r!=null&&s(e,["safetyAttributes"],St(r));const l=i(n,["prompt"]);return l!=null&&s(e,["enhancedPrompt"],l),e}function Du(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["predictions"]);if(o!=null){let l=o;Array.isArray(l)&&(l=l.map(a=>ce(a))),s(e,["generatedImages"],l)}const r=i(n,["positivePromptSafetyAttributes"]);return r!=null&&s(e,["positivePromptSafetyAttributes"],St(r)),e}function ku(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>ce(l))),s(e,["generatedImages"],r)}return e}function Uu(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(l=>ce(l))),s(e,["generatedImages"],r)}return e}function Fu(n){const e={},t=i(n,["predictions"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>ce(r))),s(e,["generatedImages"],o)}return e}function Lu(n){const e={},t=i(n,["endpoint"]);t!=null&&s(e,["name"],t);const o=i(n,["deployedModelId"]);return o!=null&&s(e,["deployedModelId"],o),e}function Vu(n){const e={},t=i(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&s(e,["baseModel"],t);const o=i(n,["createTime"]);o!=null&&s(e,["createTime"],o);const r=i(n,["updateTime"]);return r!=null&&s(e,["updateTime"],r),e}function Gu(n){const e={},t=i(n,["checkpointId"]);t!=null&&s(e,["checkpointId"],t);const o=i(n,["epoch"]);o!=null&&s(e,["epoch"],o);const r=i(n,["step"]);return r!=null&&s(e,["step"],r),e}function _e(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["displayName"]);o!=null&&s(e,["displayName"],o);const r=i(n,["description"]);r!=null&&s(e,["description"],r);const l=i(n,["versionId"]);l!=null&&s(e,["version"],l);const a=i(n,["deployedModels"]);if(a!=null){let p=a;Array.isArray(p)&&(p=p.map(m=>Lu(m))),s(e,["endpoints"],p)}const f=i(n,["labels"]);f!=null&&s(e,["labels"],f);const c=i(n,["_self"]);c!=null&&s(e,["tunedModelInfo"],Vu(c));const u=i(n,["defaultCheckpointId"]);u!=null&&s(e,["defaultCheckpointId"],u);const d=i(n,["checkpoints"]);if(d!=null){let p=d;Array.isArray(p)&&(p=p.map(m=>Gu(m))),s(e,["checkpoints"],p)}return e}function qu(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(n,["_self"]);if(r!=null){let l=st(r);Array.isArray(l)&&(l=l.map(a=>_e(a))),s(e,["models"],l)}return e}function Hu(){return{}}function Bu(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["totalTokens"]);return o!=null&&s(e,["totalTokens"],o),e}function Ju(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["tokensInfo"]);return o!=null&&s(e,["tokensInfo"],o),e}function $u(n){const e={},t=i(n,["gcsUri"]);t!=null&&s(e,["uri"],t);const o=i(n,["bytesBase64Encoded"]);o!=null&&s(e,["videoBytes"],$(o));const r=i(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function Yu(n){const e={},t=i(n,["_self"]);return t!=null&&s(e,["video"],$u(t)),e}function Ku(n){const e={},t=i(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(a=>Yu(a))),s(e,["generatedVideos"],l)}const o=i(n,["raiMediaFilteredCount"]);o!=null&&s(e,["raiMediaFilteredCount"],o);const r=i(n,["raiMediaFilteredReasons"]);return r!=null&&s(e,["raiMediaFilteredReasons"],r),e}function Wu(n){const e={},t=i(n,["name"]);t!=null&&s(e,["name"],t);const o=i(n,["metadata"]);o!=null&&s(e,["metadata"],o);const r=i(n,["done"]);r!=null&&s(e,["done"],r);const l=i(n,["error"]);l!=null&&s(e,["error"],l);const a=i(n,["response"]);return a!=null&&s(e,["response"],Ku(a)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const zu="Content-Type",bu="X-Server-Timeout",Xu="User-Agent",Ie="x-goog-api-client",Qu="1.13.0",Zu=`google-genai-sdk/${Qu}`,Ou="v1beta1",ju="v1beta",$n=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class ef{constructor(e){var t,o;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:Ou,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:ju,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,o){const r=[this.getRequestUrlInternal(t)];return o&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,o);if(e.queryParams)for(const[a,f]of Object.entries(e.queryParams))r.searchParams.append(a,String(f));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,e.abortSignal),this.unaryApiCall(r,l,e.httpMethod)}patchHttpOptions(e,t){const o=JSON.parse(JSON.stringify(e));for(const[r,l]of Object.entries(t))typeof l=="object"?o[r]=Object.assign(Object.assign({},o[r]),l):l!==void 0&&(o[r]=l);return o}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,o);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,e.abortSignal),this.streamApiCall(r,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,o){if(t&&t.timeout||o){const r=new AbortController,l=r.signal;if(t.timeout&&t?.timeout>0){const a=setTimeout(()=>r.abort(),t.timeout);a&&typeof a.unref=="function"&&a.unref()}o&&o.addEventListener("abort",()=>{r.abort()}),e.signal=l}return t&&t.extraBody!==null&&nf(e,t.extraBody),e.headers=await this.getHeadersInternal(t),e}async unaryApiCall(e,t,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:o})).then(async r=>(await Yn(r),new he(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,t,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:o})).then(async r=>(await Yn(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){var t;return W(this,arguments,function*(){const r=(t=e?.body)===null||t===void 0?void 0:t.getReader(),l=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let a="";for(;;){const{done:f,value:c}=yield D(r.read());if(f){if(a.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const u=l.decode(c,{stream:!0});try{const p=JSON.parse(u);if("error"in p){const m=JSON.parse(JSON.stringify(p.error)),g=m.status,h=m.code,y=`got status: ${g}. ${JSON.stringify(p)}`;if(h>=400&&h<600)throw new ue({message:y,status:h})}}catch(p){if(p.name==="ApiError")throw p}a+=u;let d=a.match($n);for(;d;){const p=d[1];try{const m=new Response(p,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield D(new he(m)),a=a.slice(d[0].length),d=a.match($n)}catch(m){throw new Error(`exception parsing stream chunk ${p}. ${m}`)}}}}finally{r.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const e={},t=Zu+" "+this.clientOptions.userAgentExtra;return e[Xu]=t,e[Ie]=t,e[zu]="application/json",e}async getHeadersInternal(e){const t=new Headers;if(e&&e.headers){for(const[o,r]of Object.entries(e.headers))t.append(o,r);e.timeout&&e.timeout>0&&t.append(bu,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(t),t}async uploadFile(e,t){var o;const r={};t!=null&&(r.mimeType=t.mimeType,r.name=t.name,r.displayName=t.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const l=this.clientOptions.uploader,a=await l.stat(e);r.sizeBytes=String(a.size);const f=(o=t?.mimeType)!==null&&o!==void 0?o:a.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=f;const c=await this.fetchUploadUrl(r,t);return l.upload(e,c,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t){var o;let r={};t?.httpOptions?r=t.httpOptions:r={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const l={file:e},a=await this.request({path:C("upload/v1beta/files",l._url),body:JSON.stringify(l),httpMethod:"POST",httpOptions:r});if(!a||!a?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const f=(o=a?.headers)===null||o===void 0?void 0:o["x-goog-upload-url"];if(f===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return f}}async function Yn(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let o;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await n.json():o={error:{message:await n.text(),code:n.status,status:n.statusText}};const r=JSON.stringify(o);throw t>=400&&t<600?new ue({message:r,status:t}):new Error(r)}}function nf(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))t=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(l,a){const f=Object.assign({},l);for(const c in a)if(Object.prototype.hasOwnProperty.call(a,c)){const u=a[c],d=f[c];u&&typeof u=="object"&&!Array.isArray(u)&&d&&typeof d=="object"&&!Array.isArray(d)?f[c]=o(d,u):(d&&u&&typeof d!=typeof u&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof d}, New type: ${typeof u}. Overwriting.`),f[c]=u)}return f}const r=o(t,e);n.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const tf="mcp_used/unknown";let of=!1;function Et(n){for(const e of n)if(sf(e)||typeof e=="object"&&"inputSchema"in e)return!0;return of}function _t(n){var e;const t=(e=n[Ie])!==null&&e!==void 0?e:"";n[Ie]=(t+` ${tf}`).trimStart()}function sf(n){return n!==null&&typeof n=="object"&&n instanceof xe}function rf(n,e=100){return W(this,arguments,function*(){let o,r=0;for(;r<e;){const l=yield D(n.listTools({cursor:o}));for(const a of l.tools)yield yield D(a),r++;if(!l.nextCursor)break;o=l.nextCursor}})}class xe{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new xe(e,t)}async initialize(){var e,t,o,r;if(this.mcpTools.length>0)return;const l={},a=[];for(const d of this.mcpClients)try{for(var f=!0,c=(t=void 0,ee(rf(d))),u;u=await c.next(),e=u.done,!e;f=!0){r=u.value,f=!1;const p=r;a.push(p);const m=p.name;if(l[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);l[m]=d}}catch(p){t={error:p}}finally{try{!f&&!e&&(o=c.return)&&await o.call(c)}finally{if(t)throw t.error}}this.mcpTools=a,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),bt(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const o of e)if(o.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[o.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const a=await r.callTool({name:o.name,arguments:o.args},void 0,l);t.push({functionResponse:{name:o.name,response:a.isError?{error:a}:a}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function lf(n,e,t){const o=new Ht;let r;t.data instanceof Blob?r=JSON.parse(await t.data.text()):r=JSON.parse(t.data);const l=Xr(r);Object.assign(o,l),e(o)}class af{constructor(e,t,o){this.apiClient=e,this.auth=t,this.webSocketFactory=o}async connect(e){var t,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),a=cf(this.apiClient.getDefaultHeaders()),f=this.apiClient.getApiKey(),c=`${r}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${f}`;let u=()=>{};const d=new Promise(S=>{u=S}),p=e.callbacks,m=function(){u({})},g=this.apiClient,h={onopen:m,onmessage:S=>{lf(g,p.onmessage,S)},onerror:(t=p?.onerror)!==null&&t!==void 0?t:function(S){},onclose:(o=p?.onclose)!==null&&o!==void 0?o:function(S){}},y=this.webSocketFactory.create(c,ff(a),h);y.connect(),await d;const T=x(this.apiClient,e.model),E=ht({model:T}),v=Se({setup:E});return y.send(JSON.stringify(v)),new uf(y,this.apiClient)}}class uf{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=zs(e),o=yt(t);this.conn.send(JSON.stringify({clientContent:o}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=bs(e),o=Se(t);this.conn.send(JSON.stringify(o))}sendPlaybackControl(e){const t=Se({playbackControl:e});this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(Y.PLAY)}pause(){this.sendPlaybackControl(Y.PAUSE)}stop(){this.sendPlaybackControl(Y.STOP)}resetContext(){this.sendPlaybackControl(Y.RESET_CONTEXT)}close(){this.conn.close()}}function ff(n){const e={};return n.forEach((t,o)=>{e[o]=t}),e}function cf(n){const e=new Headers;for(const[t,o]of Object.entries(n))e.append(t,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const df="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function pf(n,e,t){const o=new qt;let r;t.data instanceof Blob?r=await t.data.text():t.data instanceof ArrayBuffer?r=new TextDecoder().decode(t.data):r=t.data;const l=JSON.parse(r);if(n.isVertexAI()){const a=ul(l);Object.assign(o,a)}else{const a=Hr(l);Object.assign(o,a)}e(o)}class mf{constructor(e,t,o){this.apiClient=e,this.auth=t,this.webSocketFactory=o,this.music=new af(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,o,r,l,a,f;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const c=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion();let d;const p=this.apiClient.getHeaders();e.config&&e.config.tools&&Et(e.config.tools)&&_t(p);const m=Tf(p);if(this.apiClient.isVertexAI())d=`${c}/ws/google.cloud.aiplatform.${u}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m);else{const M=this.apiClient.getApiKey();let N="BidiGenerateContent",w="key";M?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),u!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),N="BidiGenerateContentConstrained",w="access_token"),d=`${c}/ws/google.ai.generativelanguage.${u}.GenerativeService.${N}?${w}=${M}`}let g=()=>{};const h=new Promise(M=>{g=M}),y=e.callbacks,T=function(){var M;(M=y?.onopen)===null||M===void 0||M.call(y),g({})},E=this.apiClient,v={onopen:T,onmessage:M=>{pf(E,y.onmessage,M)},onerror:(t=y?.onerror)!==null&&t!==void 0?t:function(M){},onclose:(o=y?.onclose)!==null&&o!==void 0?o:function(M){}},S=this.webSocketFactory.create(d,yf(m),v);S.connect(),await h;let A=x(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&A.startsWith("publishers/")){const M=this.apiClient.getProject(),N=this.apiClient.getLocation();A=`projects/${M}/locations/${N}/`+A}let I={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[H.AUDIO]}:e.config.responseModalities=[H.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const R=(f=(a=e.config)===null||a===void 0?void 0:a.tools)!==null&&f!==void 0?f:[],P=[];for(const M of R)if(this.isCallableTool(M)){const N=M;P.push(await N.tool())}else P.push(M);P.length>0&&(e.config.tools=P);const k={model:A,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?I=Sr(this.apiClient,k):I=$s(this.apiClient,k),delete I.config,S.send(JSON.stringify(I)),new hf(S,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const gf={turnComplete:!0};class hf{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let o=[];try{o=L(t.turns),e.isVertexAI()?o=o.map(r=>Z(r)):o=o.map(r=>fe(r))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:o,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let o=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?o=t.functionResponses:o=[t.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const l of o){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(df)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},gf),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:Ir(e)}:t={realtimeInput:Ws(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function yf(n){const e={};return n.forEach((t,o)=>{e[o]=t}),e}function Tf(n){const e=new Headers;for(const[t,o]of Object.entries(n))e.append(t,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Kn=10;function Wn(n){var e,t,o;if(!((e=n?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const a of(t=n?.tools)!==null&&t!==void 0?t:[])if(z(a)){r=!0;break}if(!r)return!0;const l=(o=n?.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function z(n){return"callTool"in n&&typeof n.callTool=="function"}function Cf(n){var e,t,o;return(o=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>z(r)))!==null&&o!==void 0?o:!1}function vf(n){var e,t,o;return(o=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>!z(r)))!==null&&o!==void 0?o:!1}function zn(n){var e;return!(!((e=n?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Sf extends J{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var o,r,l,a,f;const c=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!Cf(t)||Wn(t.config))return await this.generateContentInternal(c);if(vf(t))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let u,d;const p=L(c.contents),m=(l=(r=(o=c.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&l!==void 0?l:Kn;let g=0;for(;g<m&&(u=await this.generateContentInternal(c),!(!u.functionCalls||u.functionCalls.length===0));){const h=u.candidates[0].content,y=[];for(const T of(f=(a=t.config)===null||a===void 0?void 0:a.tools)!==null&&f!==void 0?f:[])if(z(T)){const v=await T.callTool(u.functionCalls);y.push(...v)}g++,d={role:"user",parts:y},c.contents=L(c.contents),c.contents.push(h),c.contents.push(d),zn(c.config)&&(p.push(h),p.push(d))}return zn(c.config)&&(u.automaticFunctionCallingHistory=p),u},this.generateContentStream=async t=>{if(this.maybeMoveToResponseJsonSchem(t),Wn(t.config)){const o=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(o)}else return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(o=>{var r;let l;const a=[];if(o?.generatedImages)for(const c of o.generatedImages)c&&c?.safetyAttributes&&((r=c?.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?l=c?.safetyAttributes:a.push(c);let f;return l?f={generatedImages:a,positivePromptSafetyAttributes:l,sdkHttpResponse:o.sdkHttpResponse}:f={generatedImages:a,sdkHttpResponse:o.sdkHttpResponse},f}),this.list=async t=>{var o;const a={config:Object.assign(Object.assign({},{queryBase:!0}),t?.config)};if(this.apiClient.isVertexAI()&&!a.config.queryBase){if(!((o=a.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");a.config.filter="labels.tune-type:*"}return new te(B.PAGED_ITEM_MODELS,f=>this.listInternal(f),await this.listInternal(a),a)},this.editImage=async t=>{const o={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(o.referenceImages=t.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async t=>{let o={numberOfImages:1,mode:"upscale"};t.config&&(o=Object.assign(Object.assign({},o),t.config));const r={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:o};return await this.upscaleImageInternal(r)},this.generateVideos=async t=>await this.generateVideosInternal(t)}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,o,r;const l=(t=e.config)===null||t===void 0?void 0:t.tools;if(!l)return e;const a=await Promise.all(l.map(async c=>z(c)?await c.tool():c)),f={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:a})};if(f.config.tools=a,e.config&&e.config.tools&&Et(e.config.tools)){const c=(r=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&r!==void 0?r:{};let u=Object.assign({},c);Object.keys(u).length===0&&(u=this.apiClient.getDefaultHeaders()),_t(u),f.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:u})}return f}async initAfcToolsMap(e){var t,o,r;const l=new Map;for(const a of(o=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&o!==void 0?o:[])if(z(a)){const f=a,c=await f.tool();for(const u of(r=c.functionDeclarations)!==null&&r!==void 0?r:[]){if(!u.name)throw new Error("Function declaration name is required.");if(l.has(u.name))throw new Error(`Duplicate tool declaration name: ${u.name}`);l.set(u.name,f)}}return l}async processAfcStream(e){var t,o,r;const l=(r=(o=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&r!==void 0?r:Kn;let a=!1,f=0;const c=await this.initAfcToolsMap(e);return function(u,d,p){var m,g;return W(this,arguments,function*(){for(var h,y,T,E;f<l;){a&&(f++,a=!1);const I=yield D(u.processParamsMaybeAddMcpUsage(p)),R=yield D(u.generateContentStreamInternal(I)),P=[],k=[];try{for(var v=!0,S=(y=void 0,ee(R)),A;A=yield D(S.next()),h=A.done,!h;v=!0){E=A.value,v=!1;const M=E;if(yield yield D(M),M.candidates&&(!((m=M.candidates[0])===null||m===void 0)&&m.content)){k.push(M.candidates[0].content);for(const N of(g=M.candidates[0].content.parts)!==null&&g!==void 0?g:[])if(f<l&&N.functionCall){if(!N.functionCall.name)throw new Error("Function call name was not returned by the model.");if(d.has(N.functionCall.name)){const w=yield D(d.get(N.functionCall.name).callTool([N.functionCall]));P.push(...w)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${d.keys()}, mising tool: ${N.functionCall.name}`)}}}}catch(M){y={error:M}}finally{try{!v&&!h&&(T=S.return)&&(yield D(T.call(S)))}finally{if(y)throw y.error}}if(P.length>0){a=!0;const M=new j;M.candidates=[{content:{role:"user",parts:P}}],yield yield D(M);const N=[];N.push(...k),N.push({role:"user",parts:P});const w=L(p.contents).concat(N);p.contents=w}else break}})}(this,c,e)}async generateContentInternal(e){var t,o,r,l;let a,f="",c={};if(this.apiClient.isVertexAI()){const u=Hn(this.apiClient,e);return f=C("{model}:generateContent",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=Jn(d),m=new j;return Object.assign(m,p),m})}else{const u=qn(this.apiClient,e);return f=C("{model}:generateContent",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=Bn(d),m=new j;return Object.assign(m,p),m})}}async generateContentStreamInternal(e){var t,o,r,l;let a,f="",c={};if(this.apiClient.isVertexAI()){const u=Hn(this.apiClient,e);return f=C("{model}:streamGenerateContent?alt=sse",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.requestStream({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),a.then(function(p){return W(this,arguments,function*(){var m,g,h,y;try{for(var T=!0,E=ee(p),v;v=yield D(E.next()),m=v.done,!m;T=!0){y=v.value,T=!1;const S=y,A=Jn(yield D(S.json()));A.sdkHttpResponse={headers:S.headers};const I=new j;Object.assign(I,A),yield yield D(I)}}catch(S){g={error:S}}finally{try{!T&&!m&&(h=E.return)&&(yield D(h.call(E)))}finally{if(g)throw g.error}}})})}else{const u=qn(this.apiClient,e);return f=C("{model}:streamGenerateContent?alt=sse",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.requestStream({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),a.then(function(p){return W(this,arguments,function*(){var m,g,h,y;try{for(var T=!0,E=ee(p),v;v=yield D(E.next()),m=v.done,!m;T=!0){y=v.value,T=!1;const S=y,A=Bn(yield D(S.json()));A.sdkHttpResponse={headers:S.headers};const I=new j;Object.assign(I,A),yield yield D(I)}}catch(S){g={error:S}}finally{try{!T&&!m&&(h=E.return)&&(yield D(h.call(E)))}finally{if(g)throw g.error}}})})}}async embedContent(e){var t,o,r,l;let a,f="",c={};if(this.apiClient.isVertexAI()){const u=Sa(this.apiClient,e);return f=C("{model}:predict",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=wu(d),m=new Tn;return Object.assign(m,p),m})}else{const u=Ul(this.apiClient,e);return f=C("{model}:batchEmbedContents",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=ru(d),m=new Tn;return Object.assign(m,p),m})}}async generateImagesInternal(e){var t,o,r,l;let a,f="",c={};if(this.apiClient.isVertexAI()){const u=_a(this.apiClient,e);return f=C("{model}:predict",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=Du(d),m=new Cn;return Object.assign(m,p),m})}else{const u=Ll(this.apiClient,e);return f=C("{model}:predict",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=uu(d),m=new Cn;return Object.assign(m,p),m})}}async editImageInternal(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI()){const f=wa(this.apiClient,e);return l=C("{model}:predict",f._url),a=f._query,delete f.config,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:c.headers},d})),r.then(c=>{const u=ku(c),d=new Dt;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI()){const f=Da(this.apiClient,e);return l=C("{model}:predict",f._url),a=f._query,delete f.config,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:c.headers},d})),r.then(c=>{const u=Uu(c),d=new kt;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI()){const f=La(this.apiClient,e);return l=C("{model}:predict",f._url),a=f._query,delete f.config,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{const u=Fu(c),d=new Ut;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,o,r,l;let a,f="",c={};if(this.apiClient.isVertexAI()){const u=Va(this.apiClient,e);return f=C("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),a.then(d=>_e(d))}else{const u=Vl(this.apiClient,e);return f=C("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(d=>Ee(d))}}async listInternal(e){var t,o,r,l;let a,f="",c={};if(this.apiClient.isVertexAI()){const u=qa(this.apiClient,e);return f=C("{models_url}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=qu(d),m=new vn;return Object.assign(m,p),m})}else{const u=ql(this.apiClient,e);return f=C("{models_url}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=cu(d),m=new vn;return Object.assign(m,p),m})}}async update(e){var t,o,r,l;let a,f="",c={};if(this.apiClient.isVertexAI()){const u=Ba(this.apiClient,e);return f=C("{model}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),a.then(d=>_e(d))}else{const u=Bl(this.apiClient,e);return f=C("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(d=>Ee(d))}}async delete(e){var t,o,r,l;let a,f="",c={};if(this.apiClient.isVertexAI()){const u=Ja(this.apiClient,e);return f=C("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),a.then(()=>{const d=Hu(),p=new Sn;return Object.assign(p,d),p})}else{const u=Jl(this.apiClient,e);return f=C("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(()=>{const d=du(),p=new Sn;return Object.assign(p,d),p})}}async countTokens(e){var t,o,r,l;let a,f="",c={};if(this.apiClient.isVertexAI()){const u=Ya(this.apiClient,e);return f=C("{model}:countTokens",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=Bu(d),m=new En;return Object.assign(m,p),m})}else{const u=Yl(this.apiClient,e);return f=C("{model}:countTokens",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=pu(d),m=new En;return Object.assign(m,p),m})}}async computeTokens(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI()){const f=Ka(this.apiClient,e);return l=C("{model}:computeTokens",f._url),a=f._query,delete f.config,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:c.headers},d})),r.then(c=>{const u=Ju(c),d=new Ft;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,o,r,l;let a,f="",c={};if(this.apiClient.isVertexAI()){const u=ba(this.apiClient,e);return f=C("{model}:predictLongRunning",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),a.then(d=>{const p=Wu(d),m=new le;return Object.assign(m,p),m})}else{const u=zl(this.apiClient,e);return f=C("{model}:predictLongRunning",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(d=>{const p=yu(d),m=new le;return Object.assign(m,p),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ef(n){const e={},t=i(n,["operationName"]);t!=null&&s(e,["_url","operationName"],t);const o=i(n,["config"]);return o!=null&&s(e,["config"],o),e}function _f(n){const e={},t=i(n,["operationName"]);t!=null&&s(e,["_url","operationName"],t);const o=i(n,["config"]);return o!=null&&s(e,["config"],o),e}function If(n){const e={},t=i(n,["operationName"]);t!=null&&s(e,["operationName"],t);const o=i(n,["resourceName"]);o!=null&&s(e,["_url","resourceName"],o);const r=i(n,["config"]);return r!=null&&s(e,["config"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Af extends J{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,o=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:a,isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:o});return t._fromAPIResponse({apiResponse:r,isVertexAI:!1})}}async get(e){const t=e.operation,o=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let l;o&&"httpOptions"in o&&(l=o.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:a,isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:o});return t._fromAPIResponse({apiResponse:r,isVertexAI:!1})}}async getVideosOperationInternal(e){var t,o,r,l;let a,f="",c={};if(this.apiClient.isVertexAI()){const u=_f(e);return f=C("{operationName}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),a}else{const u=Ef(e);return f=C("{operationName}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a}}async fetchPredictVideosOperationInternal(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI()){const f=If(e);return l=C("{resourceName}:fetchPredictOperation",f._url),a=f._query,delete f.config,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Mf(n){const e={},t=i(n,["voiceName"]);return t!=null&&s(e,["voiceName"],t),e}function It(n){const e={},t=i(n,["prebuiltVoiceConfig"]);return t!=null&&s(e,["prebuiltVoiceConfig"],Mf(t)),e}function Rf(n){const e={},t=i(n,["speaker"]);t!=null&&s(e,["speaker"],t);const o=i(n,["voiceConfig"]);return o!=null&&s(e,["voiceConfig"],It(o)),e}function Pf(n){const e={},t=i(n,["speakerVoiceConfigs"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>Rf(r))),s(e,["speakerVoiceConfigs"],o)}return e}function xf(n){const e={},t=i(n,["voiceConfig"]);t!=null&&s(e,["voiceConfig"],It(t));const o=i(n,["multiSpeakerVoiceConfig"]);o!=null&&s(e,["multiSpeakerVoiceConfig"],Pf(o));const r=i(n,["languageCode"]);return r!=null&&s(e,["languageCode"],r),e}function wf(n){const e={},t=i(n,["fps"]);t!=null&&s(e,["fps"],t);const o=i(n,["endOffset"]);o!=null&&s(e,["endOffset"],o);const r=i(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function Nf(n){const e={};if(i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=i(n,["data"]);t!=null&&s(e,["data"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function Df(n){const e={};if(i(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=i(n,["fileUri"]);t!=null&&s(e,["fileUri"],t);const o=i(n,["mimeType"]);return o!=null&&s(e,["mimeType"],o),e}function kf(n){const e={},t=i(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],wf(t));const o=i(n,["thought"]);o!=null&&s(e,["thought"],o);const r=i(n,["inlineData"]);r!=null&&s(e,["inlineData"],Nf(r));const l=i(n,["fileData"]);l!=null&&s(e,["fileData"],Df(l));const a=i(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const f=i(n,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);const c=i(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const u=i(n,["functionCall"]);u!=null&&s(e,["functionCall"],u);const d=i(n,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=i(n,["text"]);return p!=null&&s(e,["text"],p),e}function Uf(n){const e={},t=i(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>kf(l))),s(e,["parts"],r)}const o=i(n,["role"]);return o!=null&&s(e,["role"],o),e}function Ff(n){const e={},t=i(n,["behavior"]);t!=null&&s(e,["behavior"],t);const o=i(n,["description"]);o!=null&&s(e,["description"],o);const r=i(n,["name"]);r!=null&&s(e,["name"],r);const l=i(n,["parameters"]);l!=null&&s(e,["parameters"],l);const a=i(n,["parametersJsonSchema"]);a!=null&&s(e,["parametersJsonSchema"],a);const f=i(n,["response"]);f!=null&&s(e,["response"],f);const c=i(n,["responseJsonSchema"]);return c!=null&&s(e,["responseJsonSchema"],c),e}function Lf(n){const e={},t=i(n,["startTime"]);t!=null&&s(e,["startTime"],t);const o=i(n,["endTime"]);return o!=null&&s(e,["endTime"],o),e}function Vf(n){const e={},t=i(n,["timeRangeFilter"]);return t!=null&&s(e,["timeRangeFilter"],Lf(t)),e}function Gf(n){const e={},t=i(n,["mode"]);t!=null&&s(e,["mode"],t);const o=i(n,["dynamicThreshold"]);return o!=null&&s(e,["dynamicThreshold"],o),e}function qf(n){const e={},t=i(n,["dynamicRetrievalConfig"]);return t!=null&&s(e,["dynamicRetrievalConfig"],Gf(t)),e}function Hf(){return{}}function Bf(n){const e={},t=i(n,["functionDeclarations"]);if(t!=null){let c=t;Array.isArray(c)&&(c=c.map(u=>Ff(u))),s(e,["functionDeclarations"],c)}if(i(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=i(n,["googleSearch"]);o!=null&&s(e,["googleSearch"],Vf(o));const r=i(n,["googleSearchRetrieval"]);if(r!=null&&s(e,["googleSearchRetrieval"],qf(r)),i(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(i(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");i(n,["urlContext"])!=null&&s(e,["urlContext"],Hf());const a=i(n,["codeExecution"]);a!=null&&s(e,["codeExecution"],a);const f=i(n,["computerUse"]);return f!=null&&s(e,["computerUse"],f),e}function Jf(n){const e={},t=i(n,["handle"]);if(t!=null&&s(e,["handle"],t),i(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function bn(){return{}}function $f(n){const e={},t=i(n,["disabled"]);t!=null&&s(e,["disabled"],t);const o=i(n,["startOfSpeechSensitivity"]);o!=null&&s(e,["startOfSpeechSensitivity"],o);const r=i(n,["endOfSpeechSensitivity"]);r!=null&&s(e,["endOfSpeechSensitivity"],r);const l=i(n,["prefixPaddingMs"]);l!=null&&s(e,["prefixPaddingMs"],l);const a=i(n,["silenceDurationMs"]);return a!=null&&s(e,["silenceDurationMs"],a),e}function Yf(n){const e={},t=i(n,["automaticActivityDetection"]);t!=null&&s(e,["automaticActivityDetection"],$f(t));const o=i(n,["activityHandling"]);o!=null&&s(e,["activityHandling"],o);const r=i(n,["turnCoverage"]);return r!=null&&s(e,["turnCoverage"],r),e}function Kf(n){const e={},t=i(n,["targetTokens"]);return t!=null&&s(e,["targetTokens"],t),e}function Wf(n){const e={},t=i(n,["triggerTokens"]);t!=null&&s(e,["triggerTokens"],t);const o=i(n,["slidingWindow"]);return o!=null&&s(e,["slidingWindow"],Kf(o)),e}function zf(n){const e={},t=i(n,["proactiveAudio"]);return t!=null&&s(e,["proactiveAudio"],t),e}function bf(n,e){const t={},o=i(n,["generationConfig"]);e!==void 0&&o!=null&&s(e,["setup","generationConfig"],o);const r=i(n,["responseModalities"]);e!==void 0&&r!=null&&s(e,["setup","generationConfig","responseModalities"],r);const l=i(n,["temperature"]);e!==void 0&&l!=null&&s(e,["setup","generationConfig","temperature"],l);const a=i(n,["topP"]);e!==void 0&&a!=null&&s(e,["setup","generationConfig","topP"],a);const f=i(n,["topK"]);e!==void 0&&f!=null&&s(e,["setup","generationConfig","topK"],f);const c=i(n,["maxOutputTokens"]);e!==void 0&&c!=null&&s(e,["setup","generationConfig","maxOutputTokens"],c);const u=i(n,["mediaResolution"]);e!==void 0&&u!=null&&s(e,["setup","generationConfig","mediaResolution"],u);const d=i(n,["seed"]);e!==void 0&&d!=null&&s(e,["setup","generationConfig","seed"],d);const p=i(n,["speechConfig"]);e!==void 0&&p!=null&&s(e,["setup","generationConfig","speechConfig"],xf(Pe(p)));const m=i(n,["enableAffectiveDialog"]);e!==void 0&&m!=null&&s(e,["setup","generationConfig","enableAffectiveDialog"],m);const g=i(n,["systemInstruction"]);e!==void 0&&g!=null&&s(e,["setup","systemInstruction"],Uf(U(g)));const h=i(n,["tools"]);if(e!==void 0&&h!=null){let I=X(h);Array.isArray(I)&&(I=I.map(R=>Bf(b(R)))),s(e,["setup","tools"],I)}const y=i(n,["sessionResumption"]);e!==void 0&&y!=null&&s(e,["setup","sessionResumption"],Jf(y));const T=i(n,["inputAudioTranscription"]);e!==void 0&&T!=null&&s(e,["setup","inputAudioTranscription"],bn());const E=i(n,["outputAudioTranscription"]);e!==void 0&&E!=null&&s(e,["setup","outputAudioTranscription"],bn());const v=i(n,["realtimeInputConfig"]);e!==void 0&&v!=null&&s(e,["setup","realtimeInputConfig"],Yf(v));const S=i(n,["contextWindowCompression"]);e!==void 0&&S!=null&&s(e,["setup","contextWindowCompression"],Wf(S));const A=i(n,["proactivity"]);return e!==void 0&&A!=null&&s(e,["setup","proactivity"],zf(A)),t}function Xf(n,e){const t={},o=i(e,["model"]);o!=null&&s(t,["setup","model"],x(n,o));const r=i(e,["config"]);return r!=null&&s(t,["config"],bf(r,t)),t}function Qf(n,e,t){const o={},r=i(e,["expireTime"]);t!==void 0&&r!=null&&s(t,["expireTime"],r);const l=i(e,["newSessionExpireTime"]);t!==void 0&&l!=null&&s(t,["newSessionExpireTime"],l);const a=i(e,["uses"]);t!==void 0&&a!=null&&s(t,["uses"],a);const f=i(e,["liveConnectConstraints"]);t!==void 0&&f!=null&&s(t,["bidiGenerateContentSetup"],Xf(n,f));const c=i(e,["lockAdditionalFields"]);return t!==void 0&&c!=null&&s(t,["fieldMask"],c),o}function Zf(n,e){const t={},o=i(e,["config"]);return o!=null&&s(t,["config"],Qf(n,o,t)),t}function Of(n){const e={},t=i(n,["name"]);return t!=null&&s(e,["name"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jf(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const o=n[t];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const r=Object.keys(o).map(l=>`${t}.${l}`);e.push(...r)}else e.push(t)}return e.join(",")}function ec(n,e){let t=null;const o=n.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const l=o.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,t=l):delete n.bidiGenerateContentSetup}else o!==void 0&&delete n.bidiGenerateContentSetup;const r=n.fieldMask;if(t){const l=jf(t);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)l?n.fieldMask=l:delete n.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const a=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let f=[];r.length>0&&(f=r.map(u=>a.includes(u)?`generationConfig.${u}`:u));const c=[];l&&c.push(l),f.length>0&&c.push(...f),c.length>0?n.fieldMask=c.join(","):delete n.fieldMask}else delete n.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?n.fieldMask=r.join(","):delete n.fieldMask;return n}class nc extends J{constructor(e){super(),this.apiClient=e}async create(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const f=Zf(this.apiClient,e);l=C("auth_tokens",f._url),a=f._query,delete f.config,delete f._url,delete f._query;const c=ec(f,e.config);return r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(u=>u.json()),r.then(u=>Of(u))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tc(n){const e={},t=i(n,["name"]);t!=null&&s(e,["_url","name"],t);const o=i(n,["config"]);return o!=null&&s(e,["config"],o),e}function oc(n,e){const t={},o=i(n,["pageSize"]);e!==void 0&&o!=null&&s(e,["_query","pageSize"],o);const r=i(n,["pageToken"]);e!==void 0&&r!=null&&s(e,["_query","pageToken"],r);const l=i(n,["filter"]);return e!==void 0&&l!=null&&s(e,["_query","filter"],l),t}function ic(n){const e={},t=i(n,["config"]);return t!=null&&s(e,["config"],oc(t,e)),e}function sc(n){const e={},t=i(n,["textInput"]);t!=null&&s(e,["textInput"],t);const o=i(n,["output"]);return o!=null&&s(e,["output"],o),e}function rc(n){const e={};if(i(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(i(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const t=i(n,["examples"]);if(t!=null){let o=t;Array.isArray(o)&&(o=o.map(r=>sc(r))),s(e,["examples","examples"],o)}return e}function lc(n,e){const t={};if(i(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=i(n,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&s(e,["displayName"],o),i(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const r=i(n,["epochCount"]);e!==void 0&&r!=null&&s(e,["tuningTask","hyperparameters","epochCount"],r);const l=i(n,["learningRateMultiplier"]);if(l!=null&&s(t,["tuningTask","hyperparameters","learningRateMultiplier"],l),i(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(i(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const a=i(n,["batchSize"]);e!==void 0&&a!=null&&s(e,["tuningTask","hyperparameters","batchSize"],a);const f=i(n,["learningRate"]);return e!==void 0&&f!=null&&s(e,["tuningTask","hyperparameters","learningRate"],f),t}function ac(n){const e={},t=i(n,["baseModel"]);t!=null&&s(e,["baseModel"],t);const o=i(n,["trainingDataset"]);o!=null&&s(e,["tuningTask","trainingData"],rc(o));const r=i(n,["config"]);return r!=null&&s(e,["config"],lc(r,e)),e}function uc(n){const e={},t=i(n,["name"]);t!=null&&s(e,["_url","name"],t);const o=i(n,["config"]);return o!=null&&s(e,["config"],o),e}function fc(n,e){const t={},o=i(n,["pageSize"]);e!==void 0&&o!=null&&s(e,["_query","pageSize"],o);const r=i(n,["pageToken"]);e!==void 0&&r!=null&&s(e,["_query","pageToken"],r);const l=i(n,["filter"]);return e!==void 0&&l!=null&&s(e,["_query","filter"],l),t}function cc(n){const e={},t=i(n,["config"]);return t!=null&&s(e,["config"],fc(t,e)),e}function dc(n,e){const t={},o=i(n,["gcsUri"]);e!==void 0&&o!=null&&s(e,["supervisedTuningSpec","trainingDatasetUri"],o);const r=i(n,["vertexDatasetResource"]);if(e!==void 0&&r!=null&&s(e,["supervisedTuningSpec","trainingDatasetUri"],r),i(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return t}function pc(n,e){const t={},o=i(n,["gcsUri"]);o!=null&&s(t,["validationDatasetUri"],o);const r=i(n,["vertexDatasetResource"]);return e!==void 0&&r!=null&&s(e,["supervisedTuningSpec","trainingDatasetUri"],r),t}function mc(n,e){const t={},o=i(n,["validationDataset"]);e!==void 0&&o!=null&&s(e,["supervisedTuningSpec"],pc(o,t));const r=i(n,["tunedModelDisplayName"]);e!==void 0&&r!=null&&s(e,["tunedModelDisplayName"],r);const l=i(n,["description"]);e!==void 0&&l!=null&&s(e,["description"],l);const a=i(n,["epochCount"]);e!==void 0&&a!=null&&s(e,["supervisedTuningSpec","hyperParameters","epochCount"],a);const f=i(n,["learningRateMultiplier"]);e!==void 0&&f!=null&&s(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],f);const c=i(n,["exportLastCheckpointOnly"]);e!==void 0&&c!=null&&s(e,["supervisedTuningSpec","exportLastCheckpointOnly"],c);const u=i(n,["adapterSize"]);if(e!==void 0&&u!=null&&s(e,["supervisedTuningSpec","hyperParameters","adapterSize"],u),i(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(i(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return t}function gc(n){const e={},t=i(n,["baseModel"]);t!=null&&s(e,["baseModel"],t);const o=i(n,["trainingDataset"]);o!=null&&s(e,["supervisedTuningSpec","trainingDatasetUri"],dc(o,e));const r=i(n,["config"]);return r!=null&&s(e,["config"],mc(r,e)),e}function hc(n){const e={},t=i(n,["name"]);t!=null&&s(e,["model"],t);const o=i(n,["name"]);return o!=null&&s(e,["endpoint"],o),e}function At(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["name"]);o!=null&&s(e,["name"],o);const r=i(n,["state"]);r!=null&&s(e,["state"],tt(r));const l=i(n,["createTime"]);l!=null&&s(e,["createTime"],l);const a=i(n,["tuningTask","startTime"]);a!=null&&s(e,["startTime"],a);const f=i(n,["tuningTask","completeTime"]);f!=null&&s(e,["endTime"],f);const c=i(n,["updateTime"]);c!=null&&s(e,["updateTime"],c);const u=i(n,["description"]);u!=null&&s(e,["description"],u);const d=i(n,["baseModel"]);d!=null&&s(e,["baseModel"],d);const p=i(n,["_self"]);p!=null&&s(e,["tunedModel"],hc(p));const m=i(n,["distillationSpec"]);m!=null&&s(e,["distillationSpec"],m);const g=i(n,["experiment"]);g!=null&&s(e,["experiment"],g);const h=i(n,["labels"]);h!=null&&s(e,["labels"],h);const y=i(n,["pipelineJob"]);y!=null&&s(e,["pipelineJob"],y);const T=i(n,["satisfiesPzi"]);T!=null&&s(e,["satisfiesPzi"],T);const E=i(n,["satisfiesPzs"]);E!=null&&s(e,["satisfiesPzs"],E);const v=i(n,["serviceAccount"]);v!=null&&s(e,["serviceAccount"],v);const S=i(n,["tunedModelDisplayName"]);return S!=null&&s(e,["tunedModelDisplayName"],S),e}function yc(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(n,["tunedModels"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>At(a))),s(e,["tuningJobs"],l)}return e}function Tc(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["name"]);o!=null&&s(e,["name"],o);const r=i(n,["metadata"]);r!=null&&s(e,["metadata"],r);const l=i(n,["done"]);l!=null&&s(e,["done"],l);const a=i(n,["error"]);return a!=null&&s(e,["error"],a),e}function Cc(n){const e={},t=i(n,["checkpointId"]);t!=null&&s(e,["checkpointId"],t);const o=i(n,["epoch"]);o!=null&&s(e,["epoch"],o);const r=i(n,["step"]);r!=null&&s(e,["step"],r);const l=i(n,["endpoint"]);return l!=null&&s(e,["endpoint"],l),e}function vc(n){const e={},t=i(n,["model"]);t!=null&&s(e,["model"],t);const o=i(n,["endpoint"]);o!=null&&s(e,["endpoint"],o);const r=i(n,["checkpoints"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>Cc(a))),s(e,["checkpoints"],l)}return e}function Ae(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["name"]);o!=null&&s(e,["name"],o);const r=i(n,["state"]);r!=null&&s(e,["state"],tt(r));const l=i(n,["createTime"]);l!=null&&s(e,["createTime"],l);const a=i(n,["startTime"]);a!=null&&s(e,["startTime"],a);const f=i(n,["endTime"]);f!=null&&s(e,["endTime"],f);const c=i(n,["updateTime"]);c!=null&&s(e,["updateTime"],c);const u=i(n,["error"]);u!=null&&s(e,["error"],u);const d=i(n,["description"]);d!=null&&s(e,["description"],d);const p=i(n,["baseModel"]);p!=null&&s(e,["baseModel"],p);const m=i(n,["tunedModel"]);m!=null&&s(e,["tunedModel"],vc(m));const g=i(n,["supervisedTuningSpec"]);g!=null&&s(e,["supervisedTuningSpec"],g);const h=i(n,["tuningDataStats"]);h!=null&&s(e,["tuningDataStats"],h);const y=i(n,["encryptionSpec"]);y!=null&&s(e,["encryptionSpec"],y);const T=i(n,["partnerModelTuningSpec"]);T!=null&&s(e,["partnerModelTuningSpec"],T);const E=i(n,["distillationSpec"]);E!=null&&s(e,["distillationSpec"],E);const v=i(n,["experiment"]);v!=null&&s(e,["experiment"],v);const S=i(n,["labels"]);S!=null&&s(e,["labels"],S);const A=i(n,["pipelineJob"]);A!=null&&s(e,["pipelineJob"],A);const I=i(n,["satisfiesPzi"]);I!=null&&s(e,["satisfiesPzi"],I);const R=i(n,["satisfiesPzs"]);R!=null&&s(e,["satisfiesPzs"],R);const P=i(n,["serviceAccount"]);P!=null&&s(e,["serviceAccount"],P);const k=i(n,["tunedModelDisplayName"]);return k!=null&&s(e,["tunedModelDisplayName"],k),e}function Sc(n){const e={},t=i(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const o=i(n,["nextPageToken"]);o!=null&&s(e,["nextPageToken"],o);const r=i(n,["tuningJobs"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>Ae(a))),s(e,["tuningJobs"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ec extends J{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new te(B.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(t),t),this.tune=async t=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(t);{const o=await this.tuneMldevInternal(t);let r="";return o.metadata!==void 0&&o.metadata.tunedModel!==void 0?r=o.metadata.tunedModel:o.name!==void 0&&o.name.includes("/operations/")&&(r=o.name.split("/operations/")[0]),{name:r,state:ge.JOB_STATE_QUEUED}}}}async getInternal(e){var t,o,r,l;let a,f="",c={};if(this.apiClient.isVertexAI()){const u=uc(e);return f=C("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>Ae(d))}else{const u=tc(e);return f=C("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>At(d))}}async listInternal(e){var t,o,r,l;let a,f="",c={};if(this.apiClient.isVertexAI()){const u=cc(e);return f=C("tuningJobs",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=Sc(d),m=new In;return Object.assign(m,p),m})}else{const u=ic(e);return f=C("tunedModels",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=yc(d),m=new In;return Object.assign(m,p),m})}}async tuneInternal(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI()){const f=gc(e);return l=C("tuningJobs",f._url),a=f._query,delete f.config,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:c.headers},d})),r.then(c=>Ae(c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,o;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=ac(e);return l=C("tunedModels",f._url),a=f._query,delete f.config,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:c.headers},d})),r.then(c=>Tc(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _c{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Ic=1024*1024*8,Ac=3,Mc=1e3,Rc=2,pe="x-goog-upload-status";async function Pc(n,e,t){var o,r,l;let a=0,f=0,c=new he(new Response),u="upload";for(a=n.size;f<a;){const p=Math.min(Ic,a-f),m=n.slice(f,f+p);f+p>=a&&(u+=", finalize");let g=0,h=Mc;for(;g<Ac&&(c=await t.request({path:"",body:m,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":u,"X-Goog-Upload-Offset":String(f),"Content-Length":String(p)}}}),!(!((o=c?.headers)===null||o===void 0)&&o[pe]));)g++,await wc(h),h=h*Rc;if(f+=p,((r=c?.headers)===null||r===void 0?void 0:r[pe])!=="active")break;if(a<=f)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const d=await c?.json();if(((l=c?.headers)===null||l===void 0?void 0:l[pe])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return d.file}async function xc(n){return{size:n.size,type:n.type}}function wc(n){return new Promise(e=>setTimeout(e,n))}class Nc{async upload(e,t,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Pc(e,t,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await xc(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Dc{create(e,t,o){return new kc(e,t,o)}}class kc{constructor(e,t,o){this.url=e,this.headers=t,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Xn="x-goog-api-key";class Uc{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(Xn)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Xn,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Fc="gl-node/";class Lc{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const o=Nt(e.httpOptions,e.vertexai,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion;const r=new Uc(this.apiKey);this.apiClient=new ef({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:Fc+"web",uploader:new Nc,downloader:new _c}),this.models=new Sf(this.apiClient),this.live=new mf(this.apiClient,r,new Dc),this.batches=new ti(this.apiClient),this.chats=new rs(this.models,this.apiClient),this.caches=new os(this.apiClient),this.files=new Cs(this.apiClient),this.operations=new Af(this.apiClient),this.authTokens=new nc(this.apiClient),this.tunings=new Ec(this.apiClient)}}const Mt="Kunci API Google AI tidak dikonfigurasi. Harap atur kunci Anda di menu pengaturan (ikon roda gigi).",F=()=>{const n=localStorage.getItem("google-api-key");if(!n)throw new Error(Mt);return new Lc({apiKey:n})},ne=async n=>({inlineData:{data:await new Promise(o=>{const r=new FileReader;r.onloadend=()=>o(r.result.split(",")[1]),r.readAsDataURL(n)}),mimeType:n.type}}),Vc="You are an expert code reviewer and teacher. Your goal is to explain code snippets in a way that is easy for other developers to understand. \n- Use clear and concise language.\n- Break down complex parts into simple steps.\n- Use markdown for formatting, including bullet points for lists and backticks for inline code. Do not use markdown code blocks (```) as the entire output will be rendered in a pre-formatted block.",Gc=async(n,e)=>{const t=F(),o=`Please explain the following code snippet:

${n}`,r=await t.models.generateContentStream({model:"gemini-2.5-flash",contents:o,config:{systemInstruction:Vc}});for await(const l of r)l.text&&e(l.text)},qc=async n=>{const e=F(),{concept:t,file:o,style:r,aspectRatio:l,duration:a}=n,f=`You are a world-class prompt engineer for generative AI models. Your task is to take a user's simple concept OR a provided image and expand it into two separate, but related, highly detailed and effective prompts: one for image generation and one for video generation.

**Core Relationship:**
The video prompt's primary purpose is to **animate the static scene** created by the image prompt. First, conceptualize the detailed image prompt. Then, create a video prompt that brings that exact scene to life with movement, action, and transitions, while maintaining the same core subject, environment, and style. The video prompt should explicitly state its goal is to animate the image.

**Source of Inspiration:**
- If an image is provided, base the prompts on the image's content, style, and composition. The user's text concept should be ignored.
- If only a text concept is provided, use that as the basis for the prompts.

You MUST incorporate the user's specific requirements for style, aspect ratio, and duration into the final prompts.

**Image Prompt Rules:**
-   The image prompt will define the static scene.
-   Format as a single, dense paragraph.
-   Be highly descriptive, focusing on visual details, lighting, and composition.
-   Incorporate the specified Art Style and Image Aspect Ratio.

**Video Prompt Rules:**
-   This prompt will animate the scene from the image prompt.
-   Use Markdown for formatting: use double asterisks for bolding (**text**) and a single asterisk followed by a space for unordered list items (* item).
-   Structure the prompt with bolded section titles on new lines (e.g., **Subject:**, **Action:**, **Style & Mood:**).
-   Use bullet points for sub-details where appropriate. Do not nest bullet points.

**Output Format:**
-   You MUST return the output as a single, valid JSON object with two string keys: "imagePrompt" and "videoPrompt".
-   Do not include any other text, explanations, or markdown formatting outside of the JSON object itself.`;let c,u;if(o){const m=await ne(o);c=`Analyze the provided image and generate prompts based on the following details:
      - Art Style: "${r}"
      - Image Aspect Ratio: "${l}"
      - Video Duration: "${a} seconds"`,u={parts:[m,{text:c}]}}else c=`Generate prompts based on the following details:
      - Concept: "${t}"
      - Art Style: "${r}"
      - Image Aspect Ratio: "${l}"
      - Video Duration: "${a} seconds"`,u=c;const p=(await e.models.generateContent({model:"gemini-2.5-flash",contents:u,config:{systemInstruction:f,responseMimeType:"application/json",responseSchema:{type:_.OBJECT,properties:{imagePrompt:{type:_.STRING,description:"A detailed prompt for a text-to-image model, formatted as a single dense paragraph."},videoPrompt:{type:_.STRING,description:"A detailed prompt for a text-to-video model, formatted with Markdown (bolding and bullet points), that animates the image prompt's scene."}},required:["imagePrompt","videoPrompt"]}}})).text;if(!p)throw new Error("API mengembalikan respons kosong.");return JSON.parse(p)},Hc=async(n,e,t)=>{const r=await F().models.generateImages({model:t,prompt:n,config:{numberOfImages:1,outputMimeType:"image/jpeg",aspectRatio:e}});if(r.generatedImages&&r.generatedImages.length>0)return r.generatedImages[0].image.imageBytes;throw new Error("Gagal menghasilkan gambar.")},Bc=async(n,e,t,o=1)=>await F().models.generateVideos({model:t,prompt:n,image:{imageBytes:e,mimeType:"image/jpeg"},config:{numberOfVideos:o}}),Jc=async n=>await F().operations.getVideosOperation({operation:n}),$c=async n=>{const e=localStorage.getItem("google-api-key");if(!e)throw new Error(Mt);const t=await fetch(`${n}&key=${e}`);if(!t.ok)throw new Error("Gagal mengunduh video.");return t.blob()},Yc=async(n,e,t)=>{const o=F(),r=await ne(n),l=`You are an expert AI assistant specializing in generating high-quality metadata for stock photography and digital assets. Your task is to analyze an image and produce a compelling title, a set of relevant keywords, and a detailed description based on the user's specific requirements.

**Instructions:**
1.  **Analyze the Image:** Carefully examine the image content, including subjects, setting, colors, mood, and potential concepts.
2.  **Generate Title:** Create a concise, descriptive title. The title should be approximately ${e.titleLength} characters long.
3.  **Generate Keywords:** Produce a list of approximately ${e.keywordCount} keywords. 
    - The keywords must be highly relevant to the image.
    - Adhere to the specified Keyword Format: "${e.keywordFormat}".
    - 'Single Only' means each keyword must be a single word.
    - 'Double Only' means each keyword should be a two-word phrase.
    - 'Mixed' means you can use a combination of single and multi-word keywords.
    ${e.includeKeywords?`- You MUST include keywords related to: "${e.includeKeywords}".`:""}
    ${e.excludeKeywords?`- You MUST NOT include keywords related to: "${e.excludeKeywords}".`:""}
4.  **Generate Description:** Write a detailed description of the image. The description should be approximately ${e.descriptionLength} characters long.

**Output Format:**
- You MUST return a single, valid JSON object with three keys: "title", "keywords" (an array of strings), and "description".
- Do not include any other text, explanations, or markdown formatting outside of the JSON object itself.`,a={text:"Generate metadata for the provided image based on my system instructions."},c=(await o.models.generateContent({model:t.id,contents:{parts:[r,a]},config:{systemInstruction:l,responseMimeType:"application/json",responseSchema:{type:_.OBJECT,properties:{title:{type:_.STRING,description:"The generated title for the image."},keywords:{type:_.ARRAY,items:{type:_.STRING},description:"An array of generated keywords."},description:{type:_.STRING,description:"The generated description for the image."}},required:["title","keywords","description"]}}})).text;if(!c)throw new Error("API mengembalikan respons kosong.");return{...JSON.parse(c),modelName:t.name}},Kc=async n=>{const e=F(),{topic:t,platform:o,tone:r,includeHashtags:l,includeEmojis:a}=n,f=`You are an expert social media manager. Your task is to generate a compelling social media post based on user-defined parameters.

**Instructions:**
1.  **Analyze the User's Topic:** Understand the core message and goal of the user's topic: "${t}".
2.  **Adhere to Platform Constraints:**
    -   **Platform:** ${o}. This is the most important constraint.
    -   **Twitter/X:** Be concise and impactful, strictly under 280 characters.
    -   **LinkedIn:** Use a professional and structured tone. Use line breaks for readability. Ideal for career, tech, and business topics.
    -   **Facebook:** Use a conversational and engaging tone. Can be slightly longer than Twitter.
    -   **Instagram:** Write a caption that is visually oriented and encourages engagement. Ask questions.
3.  **Apply Tone of Voice:** The tone must be "${r}".
4.  **Hashtags:** ${l?"Include relevant and popular hashtags. For Twitter and Instagram, place them at the end. For LinkedIn, integrate them naturally or at the end.":"Do not include any hashtags."}
5.  **Emojis:** ${a?"Include a few relevant emojis to increase engagement.":"Do not include any emojis."}

**Output:**
-   You MUST return only the text content of the post.
-   Do not include any other text, explanations, titles, or markdown formatting like quotes or code blocks.
-   The output should be a single block of text ready to be copied and pasted.`,d=(await e.models.generateContent({model:"gemini-2.5-flash",contents:"Generate a social media post for me.",config:{systemInstruction:f}})).text;if(!d)throw new Error("API mengembalikan respons kosong.");return d.trim()},Wc=async n=>{const e=F(),t=`You are an expert in Unix/Linux shell commands. Your task is to take a user's description of a task and provide the most appropriate and efficient shell command to accomplish it.

**Instructions:**
1.  **Analyze the User's Task:** Carefully understand the user's goal from their description: "${n}".
2.  **Provide the Command:** Generate the single, most accurate shell command.
3.  **Provide a Brief Explanation:** Write a concise, one or two-sentence explanation of what the command does and how it works.

**Output Format:**
- You MUST return a single, valid JSON object with two string keys: "command" and "explanation".
- Do not include any other text, notes, or markdown formatting outside of the JSON object itself.`,o=`Generate the Unix command for the following task: "${n}"`,l=(await e.models.generateContent({model:"gemini-2.5-flash",contents:o,config:{systemInstruction:t,responseMimeType:"application/json",responseSchema:{type:_.OBJECT,properties:{command:{type:_.STRING,description:"The generated Unix/Linux shell command."},explanation:{type:_.STRING,description:"A brief, one or two-sentence explanation of the command."}},required:["command","explanation"]}}})).text;if(!l)throw new Error("API mengembalikan respons kosong.");return JSON.parse(l)},zc=async n=>{const e=F(),{count:t,duration:o,country:r,category:l,niche:a}=n,f=`**Role:** You are an expert YouTube content strategist specializing in viral short-form videos (${o} seconds) for the ${r} market.

**Task:** Generate ${t} highly viral video titles focused on the **"${l}"** category, specifically about **"${a}"**. All output text, including titles and analysis, MUST be in the primary language spoken in **${r}**.

**Output Format:** You MUST return a single, valid JSON object with two keys: "titles" (an array of all ${t} generated titles as strings) and "analysis" (an array of objects for the top 3 titles, where each object has "rank" (number), "title" (string), and "recommendation" (string, a detailed explanation in the language of ${r} of why the title is viral, covering YouTube algorithms, power words, CTR prediction, and emotional sentiment)).

**Constraints:**
-   All text, including titles and recommendations, must be in the language of the target country (${r}).
-   Focus on creating curiosity, urgency, or strong emotional reactions.
-   Keep titles concise and impactful.`,d=(await e.models.generateContent({model:"gemini-2.5-flash",contents:"Generate titles for me.",config:{systemInstruction:f,responseMimeType:"application/json",responseSchema:{type:_.OBJECT,properties:{titles:{type:_.ARRAY,items:{type:_.STRING},description:`An array of ${t} generated video titles.`},analysis:{type:_.ARRAY,items:{type:_.OBJECT,properties:{rank:{type:_.INTEGER,description:"The rank of the title."},title:{type:_.STRING,description:"The viral title."},recommendation:{type:_.STRING,description:"The detailed analysis for virality."}},required:["rank","title","recommendation"]},description:"An analysis of the top 3 viral titles."}},required:["titles","analysis"]}}})).text;if(!d)throw new Error("API mengembalikan respons kosong.");return JSON.parse(d)},bc=async n=>{const e=F(),{title:t,duration:o,country:r}=n,l=`**Role:** You are a seasoned screenwriter and short-form video expert for the ${r} market.

**Task:** Create a compelling ${o}-second video narrative script for the title: **"${t}"**. The entire output, including all script parts and notes, MUST be in the primary language spoken in **${r}**.

**Script Structure Requirements:**
-   **HOOK (0:00-0:05):** A captivating opening that grabs attention immediately.
-   **KONFLIK 1 (0:05-0:20):** Introduce the first layer of conflict or tension.
-   **KONFLIK 2 (0:20-0:35):** Escalate the conflict.
-   **TWIST (0:35-0:45):** Introduce an unexpected plot twist.
-   **KONFLIK 3 (0:45-0:55):** Show the consequences of the twist.
-   **CLOSING (0:55-${o}):** A concluding thought or call to action.
-   **PRODUCTION NOTES:** At the end, include a concise "Production Notes for ${o} seconds" section.

**Output Format:** You MUST return a single, valid JSON object with keys "hook", "konflik1", "konflik2", "twist", "konflik3", "closing", and "production_notes". Each key's value should be the corresponding text for that script section, written in the language of ${r}.`,a=`Create a narrative for the title: "${t}"`,c=(await e.models.generateContent({model:"gemini-2.5-flash",contents:a,config:{systemInstruction:l,responseMimeType:"application/json",responseSchema:{type:_.OBJECT,properties:{hook:{type:_.STRING},konflik1:{type:_.STRING},konflik2:{type:_.STRING},twist:{type:_.STRING},konflik3:{type:_.STRING},closing:{type:_.STRING},production_notes:{type:_.STRING}},required:["hook","konflik1","konflik2","twist","konflik3","closing","production_notes"]}}})).text;if(!c)throw new Error("API mengembalikan respons kosong.");return JSON.parse(c)},Xc=async(n,e,t)=>{const o=F(),r=Object.entries(n).filter(([u])=>u!=="production_notes").map(([u,d])=>`**${u.toUpperCase()}**: ${d}`).join(`

`),l=`**Role:** You are an AI creative director specializing in converting video scripts into prompts for AI image/video tools (like Google Imagen, Midjourney, RunwayML).

**Task:** For the provided video script for the title "${e}", break down each segment and generate specific prompts for visual and motion assets. The input script is in the primary language of ${t}.

**Input Script:**
${r}

**Output Format:** You MUST return a single, valid JSON array of objects. Each object represents a script segment and must have the following string keys: "segment_name" (e.g., "HOOK"), "timestamp" (e.g., "Seconds 0-5", translated to the language of ${t}), "narrator_script" (The narration text, which MUST be in the language of ${t} and be identical to the input script for that segment), "text_to_image_prompt" (A detailed prompt for an image generator, **in English**), and "image_to_video_prompt" (A detailed prompt for an animation/video generator, **in English**).

**Constraints:**
-   \`text_to_image_prompt\` and \`image_to_video_prompt\` must be in ENGLISH.
-   \`narrator_script\` must be in the language of ${t} and match the input.
-   \`timestamp\` must be in the language of ${t}.
-   Image/video prompts must be highly descriptive, focusing on mood, lighting, and composition.
-   Video prompts should include camera movement, animation, and duration.
-   Timestamps must correspond to a 60-second video structure.
`,c=(await o.models.generateContent({model:"gemini-2.5-flash",contents:"Generate production assets for the provided script.",config:{systemInstruction:l,responseMimeType:"application/json",responseSchema:{type:_.ARRAY,items:{type:_.OBJECT,properties:{segment_name:{type:_.STRING},timestamp:{type:_.STRING},narrator_script:{type:_.STRING},text_to_image_prompt:{type:_.STRING},image_to_video_prompt:{type:_.STRING}},required:["segment_name","timestamp","narrator_script","text_to_image_prompt","image_to_video_prompt"]}}}})).text;if(!c)throw new Error("API mengembalikan respons kosong.");return JSON.parse(c)},Qc=async(n,e)=>{const t=F(),o=`**Role:** You are a top-tier YouTube thumbnail designer and AI prompt engineer.

**Task:** Generate a comprehensive prompt for an AI image generator (e.g., Midjourney, Google Imagen) to create a highly viral YouTube thumbnail for the video titled: **"${n}"**. The video is for the ${e} market. Also provide analysis and notes.

**Output Format:** You MUST return a single, valid JSON object with three keys:
1.  **"analysis"**: An object with string keys "clickable", "emotional", "visual", and "optimized". The value for each key should be an explanation, in the language of ${e}, of how the thumbnail prompt achieves that goal.
2.  **"prompt"**: A single, detailed string containing the complete prompt for the AI image generator. This prompt MUST be in **English**.
3.  **"notes"**: An object with string keys "iteration", "ab_testing", and "adjust", providing actionable advice for the user, in the language of ${e}.`,r=`Generate thumbnail design for the title: "${n}"`,a=(await t.models.generateContent({model:"gemini-2.5-flash",contents:r,config:{systemInstruction:o,responseMimeType:"application/json",responseSchema:{type:_.OBJECT,properties:{analysis:{type:_.OBJECT,properties:{clickable:{type:_.STRING},emotional:{type:_.STRING},visual:{type:_.STRING},optimized:{type:_.STRING}},required:["clickable","emotional","visual","optimized"]},prompt:{type:_.STRING},notes:{type:_.OBJECT,properties:{iteration:{type:_.STRING},ab_testing:{type:_.STRING},adjust:{type:_.STRING}},required:["iteration","ab_testing","adjust"]}},required:["analysis","prompt","notes"]}}})).text;if(!a)throw new Error("API mengembalikan respons kosong.");return JSON.parse(a)},Rt=n=>n.split(",")[1],Zc=async n=>{const e=F(),t={inlineData:{data:Rt(n),mimeType:"image/jpeg"}},o={text:"Analyze this image and create a detailed text-to-image prompt that could be used to generate a similar image. Focus on the subject, their clothing, the background environment, the overall mood, the lighting, and the art style. The output must be a single, dense paragraph of text only."},l=(await e.models.generateContent({model:"gemini-2.5-flash",contents:{parts:[t,o]}})).text;if(!l)throw new Error("API returned an empty prompt.");return l.trim()},Oc=async n=>{const e=F(),t={inlineData:{data:Rt(n),mimeType:"image/jpeg"}},o={text:`Analyze this static image. Create a detailed text-to-video prompt to animate this scene for 5-10 seconds.
        - Describe the subject's actions.
        - Describe camera movements (e.g., slow zoom in, panning shot).
        - Describe any environmental effects (e.g., wind blowing, lights flickering).
        - The output must be a single paragraph of text only.`},l=(await e.models.generateContent({model:"gemini-2.5-flash",contents:{parts:[t,o]}})).text;if(!l)throw new Error("API returned an empty prompt.");return l.trim()},jc=async n=>{const e=F(),{modelFile:t,productFiles:o,theme:r,lighting:l}=n,a=[await ne(t)];for(const d of o)a.push(await ne(d));const c=`Create a photorealistic fashion lookbook image. 
    The first image provided is the model. The following ${o.length} image(s) are clothing products.
    Realistically place the product(s) onto the model to form a coherent outfit.
    The photoshoot theme should be "${r}" with a "${l}" style.
    The final image must be high-fashion, professional, and maintain the model's likeness. Only return the final image. Do not include any text in the output image.`;a.push({text:c});const u=await e.models.generateContent({model:"gemini-2.5-flash-image-preview",contents:{parts:a},config:{responseModalities:[H.IMAGE,H.TEXT]}});for(const d of u.candidates[0].content.parts)if(d.inlineData)return d.inlineData.data;throw new Error("AI response did not contain an image.")},ed=async n=>{const e=F(),{productFile:t,theme:o,lighting:r}=n,l=await ne(t),a=`Create a photorealistic fashion lookbook image of a model wearing the provided product. The photoshoot theme should be "${o}" with a "${r}" style. The final image must be high-fashion, professional, and visually appealing. Only return the final image. Do not include any text in the output image.`,f=[l,{text:a}],c=await e.models.generateContent({model:"gemini-2.5-flash-image-preview",contents:{parts:f},config:{responseModalities:[H.IMAGE,H.TEXT]}});for(const u of c.candidates[0].content.parts)if(u.inlineData)return u.inlineData.data;throw new Error("AI response did not contain an image.")};export{Hc as a,Yc as b,Jc as c,Kc as d,Gc as e,$c as f,qc as g,Wc as h,zc as i,bc as j,Xc as k,Qc as l,ed as m,jc as n,Zc as o,Oc as p,Bc as s};
