/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Mt,Rt;function Pt(){return{geminiUrl:Mt,vertexUrl:Rt}}function xt(n,e,t,i){var r,l;if(!n?.baseUrl){const a=Pt();return e?(r=a.vertexUrl)!==null&&r!==void 0?r:t:(l=a.geminiUrl)!==null&&l!==void 0?l:i}return n.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class B{}function C(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(i,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const l=e[r];return l!=null?String(l):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function s(n,e,t){for(let l=0;l<e.length-1;l++){const a=e[l];if(a.endsWith("[]")){const f=a.slice(0,-2);if(!(f in n))if(Array.isArray(t))n[f]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${a}`);if(Array.isArray(n[f])){const c=n[f];if(Array.isArray(t))for(let u=0;u<c.length;u++){const d=c[u];s(d,e.slice(l+1),t[u])}else for(const u of c)s(u,e.slice(l+1),t)}return}else if(a.endsWith("[0]")){const f=a.slice(0,-3);f in n||(n[f]=[{}]);const c=n[f];s(c[0],e.slice(l+1),t);return}(!n[a]||typeof n[a]!="object")&&(n[a]={}),n=n[a]}const i=e[e.length-1],r=n[i];if(r!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===r)return;if(typeof r=="object"&&typeof t=="object"&&r!==null&&t!==null)Object.assign(r,t);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else n[i]=t}function o(n,e){try{if(e.length===1&&e[0]==="_self")return n;for(let t=0;t<e.length;t++){if(typeof n!="object"||n===null)return;const i=e[t];if(i.endsWith("[]")){const r=i.slice(0,-2);if(r in n){const l=n[r];return Array.isArray(l)?l.map(a=>o(a,e.slice(t+1))):void 0}else return}else n=n[i]}return n}catch(t){if(t instanceof TypeError)return;throw t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pe(n){if(typeof n!="string")throw new Error("fromImageBytes must be a string");return n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ne;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(Ne||(Ne={}));var De;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(De||(De={}));var _;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(_||(_={}));var ke;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT"})(ke||(ke={}));var Ue;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(Ue||(Ue={}));var Fe;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(Fe||(Fe={}));var Le;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Le||(Le={}));var Ve;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(Ve||(Ve={}));var Ge;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Ge||(Ge={}));var qe;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(qe||(qe={}));var He;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(He||(He={}));var Be;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL"})(Be||(Be={}));var Je;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(Je||(Je={}));var $e;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})($e||($e={}));var Ye;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY"})(Ye||(Ye={}));var Ke;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(Ke||(Ke={}));var se;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(se||(se={}));var We;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(We||(We={}));var me;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(me||(me={}));var ze;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(ze||(ze={}));var be;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(be||(be={}));var Xe;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(Xe||(Xe={}));var Qe;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Qe||(Qe={}));var Ze;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE"})(Ze||(Ze={}));var Oe;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(Oe||(Oe={}));var je;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(je||(je={}));var en;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(en||(en={}));var nn;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(nn||(nn={}));var tn;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(tn||(tn={}));var on;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(on||(on={}));var sn;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(sn||(sn={}));var rn;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(rn||(rn={}));var ln;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(ln||(ln={}));var an;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(an||(an={}));var un;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(un||(un={}));var fn;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(fn||(fn={}));var cn;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(cn||(cn={}));var dn;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(dn||(dn={}));var pn;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(pn||(pn={}));var mn;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(mn||(mn={}));var gn;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(gn||(gn={}));var hn;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(hn||(hn={}));var $;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})($||($={}));class ge{constructor(e){const t={};for(const i of e.headers.entries())t[i[0]]=i[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class O{get text(){var e,t,i,r,l,a,f,c;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let u="",d=!1;const p=[];for(const m of(c=(f=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||f===void 0?void 0:f.parts)!==null&&c!==void 0?c:[]){for(const[g,h]of Object.entries(m))g!=="text"&&g!=="thought"&&(h!==null||h!==void 0)&&p.push(g);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;d=!0,u+=m.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),d?u:void 0}get data(){var e,t,i,r,l,a,f,c;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let u="";const d=[];for(const p of(c=(f=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||f===void 0?void 0:f.parts)!==null&&c!==void 0?c:[]){for(const[m,g]of Object.entries(p))m!=="inlineData"&&(g!==null||g!==void 0)&&d.push(m);p.inlineData&&typeof p.inlineData.data=="string"&&(u+=atob(p.inlineData.data))}return d.length>0&&console.warn(`there are non-data parts ${d} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),u.length>0?btoa(u):void 0}get functionCalls(){var e,t,i,r,l,a,f,c;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const u=(c=(f=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||f===void 0?void 0:f.parts)===null||c===void 0?void 0:c.filter(d=>d.functionCall).map(d=>d.functionCall).filter(d=>d!==void 0);if(u?.length!==0)return u}get executableCode(){var e,t,i,r,l,a,f,c,u;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const d=(c=(f=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||f===void 0?void 0:f.parts)===null||c===void 0?void 0:c.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if(d?.length!==0)return(u=d?.[0])===null||u===void 0?void 0:u.code}get codeExecutionResult(){var e,t,i,r,l,a,f,c,u;if(((r=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const d=(c=(f=(a=(l=this.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content)===null||f===void 0?void 0:f.parts)===null||c===void 0?void 0:c.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if(d?.length!==0)return(u=d?.[0])===null||u===void 0?void 0:u.output}}class yn{}class Tn{}class wt{}class Nt{}class Dt{}class Cn{}class vn{}class Sn{}class kt{}class En{}class _n{}class In{}class An{}class Ut{}class Ft{}class Lt{}class Mn{}class Vt{get text(){var e,t,i;let r="",l=!1;const a=[];for(const f of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[c,u]of Object.entries(f))c!=="text"&&c!=="thought"&&u!==null&&a.push(c);if(typeof f.text=="string"){if(typeof f.thought=="boolean"&&f.thought)continue;l=!0,r+=f.text}}return a.length>0&&console.warn(`there are non-text parts ${a} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),l?r:void 0}get data(){var e,t,i;let r="";const l=[];for(const a of(i=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&i!==void 0?i:[]){for(const[f,c]of Object.entries(a))f!=="inlineData"&&c!==null&&l.push(f);a.inlineData&&typeof a.inlineData.data=="string"&&(r+=atob(a.inlineData.data))}return l.length>0&&console.warn(`there are non-data parts ${l} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class re{_fromAPIResponse({apiResponse:e,isVertexAI:t}){const i=new re;if(i.name=e.name,i.metadata=e.metadata,i.done=e.done,i.error=e.error,t){const r=e.response;if(r){const l=new En,a=r.videos;l.generatedVideos=a?.map(f=>({video:{uri:f.gcsUri,videoBytes:f.bytesBase64Encoded?pe(f.bytesBase64Encoded):void 0,mimeType:f.mimeType}})),l.raiMediaFilteredCount=r.raiMediaFilteredCount,l.raiMediaFilteredReasons=r.raiMediaFilteredReasons,i.response=l}}else{const r=e.response;if(r){const l=new En,a=r.generateVideoResponse,f=a?.generatedSamples;l.generatedVideos=f?.map(c=>{const u=c.video;return{video:{uri:u?.uri,videoBytes:u?.encodedVideo?pe(u?.encodedVideo):void 0,mimeType:c.encoding}}}),l.raiMediaFilteredCount=a?.raiMediaFilteredCount,l.raiMediaFilteredReasons=a?.raiMediaFilteredReasons,i.response=l}}return i}}class Gt{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function x(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function Xn(n,e){const t=x(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function Qn(n){return Array.isArray(n)?n.map(e=>le(e)):[le(n)]}function le(n){if(typeof n=="object"&&n!==null)return n;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof n}`)}function Zn(n){const e=le(n);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function On(n){const e=le(n);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function Rn(n){if(n==null)throw new Error("PartUnion is required");if(typeof n=="object")return n;if(typeof n=="string")return{text:n};throw new Error(`Unsupported part type: ${typeof n}`)}function jn(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("PartListUnion is required");return Array.isArray(n)?n.map(e=>Rn(e)):[Rn(n)]}function he(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function Pn(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function xn(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function U(n){if(n==null)throw new Error("ContentUnion is required");return he(n)?n:{role:"user",parts:jn(n)}}function et(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const i=U(t);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(n.isVertexAI()){const t=U(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>U(t)):[U(e)]}function F(n){if(n==null||Array.isArray(n)&&n.length===0)throw new Error("contents are required");if(!Array.isArray(n)){if(Pn(n)||xn(n))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[U(n)]}const e=[],t=[],i=he(n[0]);for(const r of n){const l=he(r);if(l!=i)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(l)e.push(r);else{if(Pn(r)||xn(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(r)}}return i||e.push({role:"user",parts:jn(t)}),e}function qt(n,e){n.includes("null")&&(e.nullable=!0);const t=n.filter(i=>i!=="null");if(t.length===1)e.type=Object.values(_).includes(t[0].toUpperCase())?t[0].toUpperCase():_.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const i of t)e.anyOf.push({type:Object.values(_).includes(i.toUpperCase())?i.toUpperCase():_.TYPE_UNSPECIFIED})}}function Y(n){const e={},t=["items"],i=["anyOf"],r=["properties"];if(n.type&&n.anyOf)throw new Error("type and anyOf cannot be both populated.");const l=n.anyOf;l!=null&&l.length==2&&(l[0].type==="null"?(e.nullable=!0,n=l[1]):l[1].type==="null"&&(e.nullable=!0,n=l[0])),n.type instanceof Array&&qt(n.type,e);for(const[a,f]of Object.entries(n))if(f!=null)if(a=="type"){if(f==="null")throw new Error("type: null can not be the only possible type for the field.");if(f instanceof Array)continue;e.type=Object.values(_).includes(f.toUpperCase())?f.toUpperCase():_.TYPE_UNSPECIFIED}else if(t.includes(a))e[a]=Y(f);else if(i.includes(a)){const c=[];for(const u of f){if(u.type=="null"){e.nullable=!0;continue}c.push(Y(u))}e[a]=c}else if(r.includes(a)){const c={};for(const[u,d]of Object.entries(f))c[u]=Y(d);e[a]=c}else{if(a==="additionalProperties")continue;e[a]=f}return e}function Ae(n){return Y(n)}function Me(n){if(typeof n=="object")return n;if(typeof n=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:n}}};throw new Error(`Unsupported speechConfig type: ${typeof n}`)}function Re(n){if("multiSpeakerVoiceConfig"in n)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return n}function z(n){if(n.functionDeclarations)for(const e of n.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=Y(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=Y(e.response));return n}function b(n){if(n==null)throw new Error("tools is required");if(!Array.isArray(n))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of n)e.push(t);return e}function Ht(n,e,t,i=1){const r=!e.startsWith(`${t}/`)&&e.split("/").length===i;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:r?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:r?`${t}/${e}`:e}function G(n,e){if(typeof e!="string")throw new Error("name must be a string");return Ht(n,e,"cachedContents")}function nt(n){switch(n){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return n}}function J(n){return pe(n)}function Bt(n){return n!=null&&typeof n=="object"&&"name"in n}function Jt(n){return n!=null&&typeof n=="object"&&"video"in n}function $t(n){return n!=null&&typeof n=="object"&&"uri"in n}function tt(n){var e;let t;if(Bt(n)&&(t=n.name),!($t(n)&&(t=n.uri,t===void 0))&&!(Jt(n)&&(t=(e=n.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof n=="string"&&(t=n),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const r=t.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${t}`);t=r[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function ot(n,e){let t;return n.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function it(n){for(const e of["models","tunedModels","publisherModels"])if(Yt(n,e))return n[e];return[]}function Yt(n,e){return n!==null&&typeof n=="object"&&e in n}function Kt(n,e={}){const t=n,i={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return e.behavior&&(i.behavior=e.behavior),{functionDeclarations:[i]}}function Wt(n,e={}){const t=[],i=new Set;for(const r of n){const l=r.name;if(i.has(l))throw new Error(`Duplicate function name ${l} found in MCP tools. Please ensure function names are unique.`);i.add(l);const a=Kt(r,e);a.functionDeclarations&&t.push(...a.functionDeclarations)}return{functionDeclarations:t}}function st(n,e){if(typeof e!="string"&&!Array.isArray(e)){if(n&&n.isVertexAI()){if(e.gcsUri&&e.bigqueryUri)throw new Error("Only one of `gcsUri` or `bigqueryUri` can be set.");if(!e.gcsUri&&!e.bigqueryUri)throw new Error("One of `gcsUri` or `bigqueryUri` must be set.")}else{if(e.inlinedRequests&&e.fileName)throw new Error("Only one of `inlinedRequests` or `fileName` can be set.");if(!e.inlinedRequests&&!e.fileName)throw new Error("One of `inlinedRequests` or `fileName` must be set.")}return e}else{if(Array.isArray(e))return{inlinedRequests:e};if(typeof e=="string"){if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:[e]};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};if(e.startsWith("files/"))return{fileName:e}}}throw new Error(`Unsupported source: ${e}`)}function zt(n){if(typeof n!="string")return n;const e=n;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function X(n,e){const t=e;if(!n.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function rt(n){const e=n;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bt(n){const e={},t=o(n,["fps"]);t!=null&&s(e,["fps"],t);const i=o(n,["endOffset"]);i!=null&&s(e,["endOffset"],i);const r=o(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function Xt(n){const e={};if(o(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=o(n,["data"]);t!=null&&s(e,["data"],t);const i=o(n,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function Qt(n){const e={};if(o(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=o(n,["fileUri"]);t!=null&&s(e,["fileUri"],t);const i=o(n,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function Zt(n){const e={},t=o(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],bt(t));const i=o(n,["thought"]);i!=null&&s(e,["thought"],i);const r=o(n,["inlineData"]);r!=null&&s(e,["inlineData"],Xt(r));const l=o(n,["fileData"]);l!=null&&s(e,["fileData"],Qt(l));const a=o(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const f=o(n,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);const c=o(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const u=o(n,["functionCall"]);u!=null&&s(e,["functionCall"],u);const d=o(n,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=o(n,["text"]);return p!=null&&s(e,["text"],p),e}function lt(n){const e={},t=o(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>Zt(l))),s(e,["parts"],r)}const i=o(n,["role"]);return i!=null&&s(e,["role"],i),e}function Ot(n){const e={},t=o(n,["anyOf"]);t!=null&&s(e,["anyOf"],t);const i=o(n,["default"]);i!=null&&s(e,["default"],i);const r=o(n,["description"]);r!=null&&s(e,["description"],r);const l=o(n,["enum"]);l!=null&&s(e,["enum"],l);const a=o(n,["example"]);a!=null&&s(e,["example"],a);const f=o(n,["format"]);f!=null&&s(e,["format"],f);const c=o(n,["items"]);c!=null&&s(e,["items"],c);const u=o(n,["maxItems"]);u!=null&&s(e,["maxItems"],u);const d=o(n,["maxLength"]);d!=null&&s(e,["maxLength"],d);const p=o(n,["maxProperties"]);p!=null&&s(e,["maxProperties"],p);const m=o(n,["maximum"]);m!=null&&s(e,["maximum"],m);const g=o(n,["minItems"]);g!=null&&s(e,["minItems"],g);const h=o(n,["minLength"]);h!=null&&s(e,["minLength"],h);const y=o(n,["minProperties"]);y!=null&&s(e,["minProperties"],y);const T=o(n,["minimum"]);T!=null&&s(e,["minimum"],T);const E=o(n,["nullable"]);E!=null&&s(e,["nullable"],E);const v=o(n,["pattern"]);v!=null&&s(e,["pattern"],v);const S=o(n,["properties"]);S!=null&&s(e,["properties"],S);const A=o(n,["propertyOrdering"]);A!=null&&s(e,["propertyOrdering"],A);const I=o(n,["required"]);I!=null&&s(e,["required"],I);const R=o(n,["title"]);R!=null&&s(e,["title"],R);const P=o(n,["type"]);return P!=null&&s(e,["type"],P),e}function jt(n){const e={};if(o(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=o(n,["category"]);t!=null&&s(e,["category"],t);const i=o(n,["threshold"]);return i!=null&&s(e,["threshold"],i),e}function eo(n){const e={},t=o(n,["behavior"]);t!=null&&s(e,["behavior"],t);const i=o(n,["description"]);i!=null&&s(e,["description"],i);const r=o(n,["name"]);r!=null&&s(e,["name"],r);const l=o(n,["parameters"]);l!=null&&s(e,["parameters"],l);const a=o(n,["parametersJsonSchema"]);a!=null&&s(e,["parametersJsonSchema"],a);const f=o(n,["response"]);f!=null&&s(e,["response"],f);const c=o(n,["responseJsonSchema"]);return c!=null&&s(e,["responseJsonSchema"],c),e}function no(n){const e={},t=o(n,["startTime"]);t!=null&&s(e,["startTime"],t);const i=o(n,["endTime"]);return i!=null&&s(e,["endTime"],i),e}function to(n){const e={},t=o(n,["timeRangeFilter"]);return t!=null&&s(e,["timeRangeFilter"],no(t)),e}function oo(n){const e={},t=o(n,["mode"]);t!=null&&s(e,["mode"],t);const i=o(n,["dynamicThreshold"]);return i!=null&&s(e,["dynamicThreshold"],i),e}function io(n){const e={},t=o(n,["dynamicRetrievalConfig"]);return t!=null&&s(e,["dynamicRetrievalConfig"],oo(t)),e}function so(){return{}}function ro(n){const e={},t=o(n,["functionDeclarations"]);if(t!=null){let c=t;Array.isArray(c)&&(c=c.map(u=>eo(u))),s(e,["functionDeclarations"],c)}if(o(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=o(n,["googleSearch"]);i!=null&&s(e,["googleSearch"],to(i));const r=o(n,["googleSearchRetrieval"]);if(r!=null&&s(e,["googleSearchRetrieval"],io(r)),o(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(o(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");o(n,["urlContext"])!=null&&s(e,["urlContext"],so());const a=o(n,["codeExecution"]);a!=null&&s(e,["codeExecution"],a);const f=o(n,["computerUse"]);return f!=null&&s(e,["computerUse"],f),e}function lo(n){const e={},t=o(n,["mode"]);t!=null&&s(e,["mode"],t);const i=o(n,["allowedFunctionNames"]);return i!=null&&s(e,["allowedFunctionNames"],i),e}function ao(n){const e={},t=o(n,["latitude"]);t!=null&&s(e,["latitude"],t);const i=o(n,["longitude"]);return i!=null&&s(e,["longitude"],i),e}function uo(n){const e={},t=o(n,["latLng"]);t!=null&&s(e,["latLng"],ao(t));const i=o(n,["languageCode"]);return i!=null&&s(e,["languageCode"],i),e}function fo(n){const e={},t=o(n,["functionCallingConfig"]);t!=null&&s(e,["functionCallingConfig"],lo(t));const i=o(n,["retrievalConfig"]);return i!=null&&s(e,["retrievalConfig"],uo(i)),e}function co(n){const e={},t=o(n,["voiceName"]);return t!=null&&s(e,["voiceName"],t),e}function at(n){const e={},t=o(n,["prebuiltVoiceConfig"]);return t!=null&&s(e,["prebuiltVoiceConfig"],co(t)),e}function po(n){const e={},t=o(n,["speaker"]);t!=null&&s(e,["speaker"],t);const i=o(n,["voiceConfig"]);return i!=null&&s(e,["voiceConfig"],at(i)),e}function mo(n){const e={},t=o(n,["speakerVoiceConfigs"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>po(r))),s(e,["speakerVoiceConfigs"],i)}return e}function go(n){const e={},t=o(n,["voiceConfig"]);t!=null&&s(e,["voiceConfig"],at(t));const i=o(n,["multiSpeakerVoiceConfig"]);i!=null&&s(e,["multiSpeakerVoiceConfig"],mo(i));const r=o(n,["languageCode"]);return r!=null&&s(e,["languageCode"],r),e}function ho(n){const e={},t=o(n,["includeThoughts"]);t!=null&&s(e,["includeThoughts"],t);const i=o(n,["thinkingBudget"]);return i!=null&&s(e,["thinkingBudget"],i),e}function yo(n,e,t){const i={},r=o(e,["systemInstruction"]);t!==void 0&&r!=null&&s(t,["systemInstruction"],lt(U(r)));const l=o(e,["temperature"]);l!=null&&s(i,["temperature"],l);const a=o(e,["topP"]);a!=null&&s(i,["topP"],a);const f=o(e,["topK"]);f!=null&&s(i,["topK"],f);const c=o(e,["candidateCount"]);c!=null&&s(i,["candidateCount"],c);const u=o(e,["maxOutputTokens"]);u!=null&&s(i,["maxOutputTokens"],u);const d=o(e,["stopSequences"]);d!=null&&s(i,["stopSequences"],d);const p=o(e,["responseLogprobs"]);p!=null&&s(i,["responseLogprobs"],p);const m=o(e,["logprobs"]);m!=null&&s(i,["logprobs"],m);const g=o(e,["presencePenalty"]);g!=null&&s(i,["presencePenalty"],g);const h=o(e,["frequencyPenalty"]);h!=null&&s(i,["frequencyPenalty"],h);const y=o(e,["seed"]);y!=null&&s(i,["seed"],y);const T=o(e,["responseMimeType"]);T!=null&&s(i,["responseMimeType"],T);const E=o(e,["responseSchema"]);E!=null&&s(i,["responseSchema"],Ot(Ae(E)));const v=o(e,["responseJsonSchema"]);if(v!=null&&s(i,["responseJsonSchema"],v),o(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(o(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const S=o(e,["safetySettings"]);if(t!==void 0&&S!=null){let w=S;Array.isArray(w)&&(w=w.map(L=>jt(L))),s(t,["safetySettings"],w)}const A=o(e,["tools"]);if(t!==void 0&&A!=null){let w=b(A);Array.isArray(w)&&(w=w.map(L=>ro(z(L)))),s(t,["tools"],w)}const I=o(e,["toolConfig"]);if(t!==void 0&&I!=null&&s(t,["toolConfig"],fo(I)),o(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const R=o(e,["cachedContent"]);t!==void 0&&R!=null&&s(t,["cachedContent"],G(n,R));const P=o(e,["responseModalities"]);P!=null&&s(i,["responseModalities"],P);const k=o(e,["mediaResolution"]);k!=null&&s(i,["mediaResolution"],k);const M=o(e,["speechConfig"]);if(M!=null&&s(i,["speechConfig"],go(Me(M))),o(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const N=o(e,["thinkingConfig"]);return N!=null&&s(i,["thinkingConfig"],ho(N)),i}function To(n,e){const t={},i=o(e,["model"]);i!=null&&s(t,["request","model"],x(n,i));const r=o(e,["contents"]);if(r!=null){let a=F(r);Array.isArray(a)&&(a=a.map(f=>lt(f))),s(t,["request","contents"],a)}const l=o(e,["config"]);return l!=null&&s(t,["request","generationConfig"],yo(n,l,t)),t}function Co(n,e){const t={};if(o(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(o(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(o(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const i=o(e,["fileName"]);i!=null&&s(t,["fileName"],i);const r=o(e,["inlinedRequests"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>To(n,a))),s(t,["requests","requests"],l)}return t}function vo(n,e){const t={},i=o(n,["displayName"]);if(e!==void 0&&i!=null&&s(e,["batch","displayName"],i),o(n,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function So(n,e){const t={},i=o(e,["model"]);i!=null&&s(t,["_url","model"],x(n,i));const r=o(e,["src"]);r!=null&&s(t,["batch","inputConfig"],Co(n,st(n,r)));const l=o(e,["config"]);return l!=null&&s(t,["config"],vo(l,t)),t}function Eo(n,e){const t={},i=o(e,["name"]);i!=null&&s(t,["_url","name"],X(n,i));const r=o(e,["config"]);return r!=null&&s(t,["config"],r),t}function _o(n,e){const t={},i=o(e,["name"]);i!=null&&s(t,["_url","name"],X(n,i));const r=o(e,["config"]);return r!=null&&s(t,["config"],r),t}function Io(n,e){const t={},i=o(n,["pageSize"]);e!==void 0&&i!=null&&s(e,["_query","pageSize"],i);const r=o(n,["pageToken"]);if(e!==void 0&&r!=null&&s(e,["_query","pageToken"],r),o(n,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function Ao(n){const e={},t=o(n,["config"]);return t!=null&&s(e,["config"],Io(t,e)),e}function Mo(n,e){const t={},i=o(e,["name"]);i!=null&&s(t,["_url","name"],X(n,i));const r=o(e,["config"]);return r!=null&&s(t,["config"],r),t}function Ro(n){const e={},t=o(n,["format"]);t!=null&&s(e,["instancesFormat"],t);const i=o(n,["gcsUri"]);i!=null&&s(e,["gcsSource","uris"],i);const r=o(n,["bigqueryUri"]);if(r!=null&&s(e,["bigquerySource","inputUri"],r),o(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(o(n,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function Po(n){const e={},t=o(n,["format"]);t!=null&&s(e,["predictionsFormat"],t);const i=o(n,["gcsUri"]);i!=null&&s(e,["gcsDestination","outputUriPrefix"],i);const r=o(n,["bigqueryUri"]);if(r!=null&&s(e,["bigqueryDestination","outputUri"],r),o(n,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(o(n,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");return e}function xo(n,e){const t={},i=o(n,["displayName"]);e!==void 0&&i!=null&&s(e,["displayName"],i);const r=o(n,["dest"]);return e!==void 0&&r!=null&&s(e,["outputConfig"],Po(zt(r))),t}function wo(n,e){const t={},i=o(e,["model"]);i!=null&&s(t,["model"],x(n,i));const r=o(e,["src"]);r!=null&&s(t,["inputConfig"],Ro(st(n,r)));const l=o(e,["config"]);return l!=null&&s(t,["config"],xo(l,t)),t}function No(n,e){const t={},i=o(e,["name"]);i!=null&&s(t,["_url","name"],X(n,i));const r=o(e,["config"]);return r!=null&&s(t,["config"],r),t}function Do(n,e){const t={},i=o(e,["name"]);i!=null&&s(t,["_url","name"],X(n,i));const r=o(e,["config"]);return r!=null&&s(t,["config"],r),t}function ko(n,e){const t={},i=o(n,["pageSize"]);e!==void 0&&i!=null&&s(e,["_query","pageSize"],i);const r=o(n,["pageToken"]);e!==void 0&&r!=null&&s(e,["_query","pageToken"],r);const l=o(n,["filter"]);return e!==void 0&&l!=null&&s(e,["_query","filter"],l),t}function Uo(n){const e={},t=o(n,["config"]);return t!=null&&s(e,["config"],ko(t,e)),e}function Fo(n,e){const t={},i=o(e,["name"]);i!=null&&s(t,["_url","name"],X(n,i));const r=o(e,["config"]);return r!=null&&s(t,["config"],r),t}function Lo(n){const e={},t=o(n,["fps"]);t!=null&&s(e,["fps"],t);const i=o(n,["endOffset"]);i!=null&&s(e,["endOffset"],i);const r=o(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function Vo(n){const e={},t=o(n,["data"]);t!=null&&s(e,["data"],t);const i=o(n,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function Go(n){const e={},t=o(n,["fileUri"]);t!=null&&s(e,["fileUri"],t);const i=o(n,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function qo(n){const e={},t=o(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],Lo(t));const i=o(n,["thought"]);i!=null&&s(e,["thought"],i);const r=o(n,["inlineData"]);r!=null&&s(e,["inlineData"],Vo(r));const l=o(n,["fileData"]);l!=null&&s(e,["fileData"],Go(l));const a=o(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const f=o(n,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);const c=o(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const u=o(n,["functionCall"]);u!=null&&s(e,["functionCall"],u);const d=o(n,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=o(n,["text"]);return p!=null&&s(e,["text"],p),e}function Ho(n){const e={},t=o(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>qo(l))),s(e,["parts"],r)}const i=o(n,["role"]);return i!=null&&s(e,["role"],i),e}function Bo(n){const e={},t=o(n,["citationSources"]);return t!=null&&s(e,["citations"],t),e}function Jo(n){const e={},t=o(n,["retrievedUrl"]);t!=null&&s(e,["retrievedUrl"],t);const i=o(n,["urlRetrievalStatus"]);return i!=null&&s(e,["urlRetrievalStatus"],i),e}function $o(n){const e={},t=o(n,["urlMetadata"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>Jo(r))),s(e,["urlMetadata"],i)}return e}function Yo(n){const e={},t=o(n,["content"]);t!=null&&s(e,["content"],Ho(t));const i=o(n,["citationMetadata"]);i!=null&&s(e,["citationMetadata"],Bo(i));const r=o(n,["tokenCount"]);r!=null&&s(e,["tokenCount"],r);const l=o(n,["finishReason"]);l!=null&&s(e,["finishReason"],l);const a=o(n,["urlContextMetadata"]);a!=null&&s(e,["urlContextMetadata"],$o(a));const f=o(n,["avgLogprobs"]);f!=null&&s(e,["avgLogprobs"],f);const c=o(n,["groundingMetadata"]);c!=null&&s(e,["groundingMetadata"],c);const u=o(n,["index"]);u!=null&&s(e,["index"],u);const d=o(n,["logprobsResult"]);d!=null&&s(e,["logprobsResult"],d);const p=o(n,["safetyRatings"]);return p!=null&&s(e,["safetyRatings"],p),e}function Ko(n){const e={},t=o(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const i=o(n,["candidates"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(u=>Yo(u))),s(e,["candidates"],c)}const r=o(n,["modelVersion"]);r!=null&&s(e,["modelVersion"],r);const l=o(n,["promptFeedback"]);l!=null&&s(e,["promptFeedback"],l);const a=o(n,["responseId"]);a!=null&&s(e,["responseId"],a);const f=o(n,["usageMetadata"]);return f!=null&&s(e,["usageMetadata"],f),e}function ut(n){const e={},t=o(n,["details"]);t!=null&&s(e,["details"],t);const i=o(n,["code"]);i!=null&&s(e,["code"],i);const r=o(n,["message"]);return r!=null&&s(e,["message"],r),e}function Wo(n){const e={},t=o(n,["response"]);t!=null&&s(e,["response"],Ko(t));const i=o(n,["error"]);return i!=null&&s(e,["error"],ut(i)),e}function zo(n){const e={},t=o(n,["responsesFile"]);t!=null&&s(e,["fileName"],t);const i=o(n,["inlinedResponses","inlinedResponses"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>Wo(l))),s(e,["inlinedResponses"],r)}return e}function ye(n){const e={},t=o(n,["name"]);t!=null&&s(e,["name"],t);const i=o(n,["metadata","displayName"]);i!=null&&s(e,["displayName"],i);const r=o(n,["metadata","state"]);r!=null&&s(e,["state"],rt(r));const l=o(n,["metadata","createTime"]);l!=null&&s(e,["createTime"],l);const a=o(n,["metadata","endTime"]);a!=null&&s(e,["endTime"],a);const f=o(n,["metadata","updateTime"]);f!=null&&s(e,["updateTime"],f);const c=o(n,["metadata","model"]);c!=null&&s(e,["model"],c);const u=o(n,["metadata","output"]);return u!=null&&s(e,["dest"],zo(u)),e}function bo(n){const e={},t=o(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const i=o(n,["nextPageToken"]);i!=null&&s(e,["nextPageToken"],i);const r=o(n,["operations"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>ye(a))),s(e,["batchJobs"],l)}return e}function Xo(n){const e={},t=o(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const i=o(n,["name"]);i!=null&&s(e,["name"],i);const r=o(n,["done"]);r!=null&&s(e,["done"],r);const l=o(n,["error"]);return l!=null&&s(e,["error"],ut(l)),e}function ft(n){const e={},t=o(n,["details"]);t!=null&&s(e,["details"],t);const i=o(n,["code"]);i!=null&&s(e,["code"],i);const r=o(n,["message"]);return r!=null&&s(e,["message"],r),e}function Qo(n){const e={},t=o(n,["instancesFormat"]);t!=null&&s(e,["format"],t);const i=o(n,["gcsSource","uris"]);i!=null&&s(e,["gcsUri"],i);const r=o(n,["bigquerySource","inputUri"]);return r!=null&&s(e,["bigqueryUri"],r),e}function Zo(n){const e={},t=o(n,["predictionsFormat"]);t!=null&&s(e,["format"],t);const i=o(n,["gcsDestination","outputUriPrefix"]);i!=null&&s(e,["gcsUri"],i);const r=o(n,["bigqueryDestination","outputUri"]);return r!=null&&s(e,["bigqueryUri"],r),e}function Te(n){const e={},t=o(n,["name"]);t!=null&&s(e,["name"],t);const i=o(n,["displayName"]);i!=null&&s(e,["displayName"],i);const r=o(n,["state"]);r!=null&&s(e,["state"],rt(r));const l=o(n,["error"]);l!=null&&s(e,["error"],ft(l));const a=o(n,["createTime"]);a!=null&&s(e,["createTime"],a);const f=o(n,["startTime"]);f!=null&&s(e,["startTime"],f);const c=o(n,["endTime"]);c!=null&&s(e,["endTime"],c);const u=o(n,["updateTime"]);u!=null&&s(e,["updateTime"],u);const d=o(n,["model"]);d!=null&&s(e,["model"],d);const p=o(n,["inputConfig"]);p!=null&&s(e,["src"],Qo(p));const m=o(n,["outputConfig"]);return m!=null&&s(e,["dest"],Zo(m)),e}function Oo(n){const e={},t=o(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const i=o(n,["nextPageToken"]);i!=null&&s(e,["nextPageToken"],i);const r=o(n,["batchPredictionJobs"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>Te(a))),s(e,["batchJobs"],l)}return e}function jo(n){const e={},t=o(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const i=o(n,["name"]);i!=null&&s(e,["name"],i);const r=o(n,["done"]);r!=null&&s(e,["done"],r);const l=o(n,["error"]);return l!=null&&s(e,["error"],ft(l)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var H;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(H||(H={}));class ee{constructor(e,t,i,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,i,r)}init(e,t,i){var r,l;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t?.sdkHttpResponse,this.idxInternal=0;let a={config:{}};!i||Object.keys(i).length===0?a={config:{}}:typeof i=="object"?a=Object.assign({},i):a=i,a.config&&(a.config.pageToken=t.nextPageToken),this.paramsInternal=a,this.pageInternalSize=(l=(r=a.config)===null||r===void 0?void 0:r.pageSize)!==null&&l!==void 0?l:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ei extends B{constructor(e){super(),this.apiClient=e,this.create=async t=>{if(this.apiClient.isVertexAI()){const r=Date.now().toString();if(Array.isArray(t.src))throw new Error("InlinedRequest[] is not supported in Vertex AI. Please use Google Cloud Storage URI or BigQuery URI instead.");if(t.config=t.config||{},t.config.displayName===void 0&&(t.config.displayName="genaiBatchJob_${timestampStr}"),t.config.dest===void 0&&typeof t.src=="string")if(t.src.startsWith("gs://")&&t.src.endsWith(".jsonl"))t.config.dest=`${t.src.slice(0,-6)}/dest`;else if(t.src.startsWith("bq://"))t.config.dest=`${t.src}_dest_${r}`;else throw new Error("Unsupported source:"+t.src)}return await this.createInternal(t)},this.list=async(t={})=>new ee(H.PAGED_ITEM_BATCH_JOBS,i=>this.listInternal(i),await this.listInternal(t),t)}async createInternal(e){var t,i,r,l;let a,f="",c={};if(this.apiClient.isVertexAI()){const u=wo(this.apiClient,e);return f=C("batchPredictionJobs",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>Te(d))}else{const u=So(this.apiClient,e);return f=C("{model}:batchGenerateContent",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(d=>ye(d))}}async get(e){var t,i,r,l;let a,f="",c={};if(this.apiClient.isVertexAI()){const u=No(this.apiClient,e);return f=C("batchPredictionJobs/{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>Te(d))}else{const u=Eo(this.apiClient,e);return f=C("batches/{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(d=>ye(d))}}async cancel(e){var t,i,r,l;let a="",f={};if(this.apiClient.isVertexAI()){const c=Do(this.apiClient,e);a=C("batchPredictionJobs/{name}:cancel",c._url),f=c._query,delete c.config,delete c._url,delete c._query,await this.apiClient.request({path:a,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}else{const c=_o(this.apiClient,e);a=C("batches/{name}:cancel",c._url),f=c._query,delete c.config,delete c._url,delete c._query,await this.apiClient.request({path:a,queryParams:f,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal})}}async listInternal(e){var t,i,r,l;let a,f="",c={};if(this.apiClient.isVertexAI()){const u=Uo(e);return f=C("batchPredictionJobs",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=Oo(d),m=new Mn;return Object.assign(m,p),m})}else{const u=Ao(e);return f=C("batches",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=bo(d),m=new Mn;return Object.assign(m,p),m})}}async delete(e){var t,i,r,l;let a,f="",c={};if(this.apiClient.isVertexAI()){const u=Fo(this.apiClient,e);return f=C("batchPredictionJobs/{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>jo(d))}else{const u=Mo(this.apiClient,e);return f=C("batches/{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>Xo(d))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ni(n){const e={},t=o(n,["fps"]);t!=null&&s(e,["fps"],t);const i=o(n,["endOffset"]);i!=null&&s(e,["endOffset"],i);const r=o(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function ti(n){const e={};if(o(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=o(n,["data"]);t!=null&&s(e,["data"],t);const i=o(n,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function oi(n){const e={};if(o(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=o(n,["fileUri"]);t!=null&&s(e,["fileUri"],t);const i=o(n,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function ii(n){const e={},t=o(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],ni(t));const i=o(n,["thought"]);i!=null&&s(e,["thought"],i);const r=o(n,["inlineData"]);r!=null&&s(e,["inlineData"],ti(r));const l=o(n,["fileData"]);l!=null&&s(e,["fileData"],oi(l));const a=o(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const f=o(n,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);const c=o(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const u=o(n,["functionCall"]);u!=null&&s(e,["functionCall"],u);const d=o(n,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=o(n,["text"]);return p!=null&&s(e,["text"],p),e}function wn(n){const e={},t=o(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>ii(l))),s(e,["parts"],r)}const i=o(n,["role"]);return i!=null&&s(e,["role"],i),e}function si(n){const e={},t=o(n,["behavior"]);t!=null&&s(e,["behavior"],t);const i=o(n,["description"]);i!=null&&s(e,["description"],i);const r=o(n,["name"]);r!=null&&s(e,["name"],r);const l=o(n,["parameters"]);l!=null&&s(e,["parameters"],l);const a=o(n,["parametersJsonSchema"]);a!=null&&s(e,["parametersJsonSchema"],a);const f=o(n,["response"]);f!=null&&s(e,["response"],f);const c=o(n,["responseJsonSchema"]);return c!=null&&s(e,["responseJsonSchema"],c),e}function ri(n){const e={},t=o(n,["startTime"]);t!=null&&s(e,["startTime"],t);const i=o(n,["endTime"]);return i!=null&&s(e,["endTime"],i),e}function li(n){const e={},t=o(n,["timeRangeFilter"]);return t!=null&&s(e,["timeRangeFilter"],ri(t)),e}function ai(n){const e={},t=o(n,["mode"]);t!=null&&s(e,["mode"],t);const i=o(n,["dynamicThreshold"]);return i!=null&&s(e,["dynamicThreshold"],i),e}function ui(n){const e={},t=o(n,["dynamicRetrievalConfig"]);return t!=null&&s(e,["dynamicRetrievalConfig"],ai(t)),e}function fi(){return{}}function ci(n){const e={},t=o(n,["functionDeclarations"]);if(t!=null){let c=t;Array.isArray(c)&&(c=c.map(u=>si(u))),s(e,["functionDeclarations"],c)}if(o(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=o(n,["googleSearch"]);i!=null&&s(e,["googleSearch"],li(i));const r=o(n,["googleSearchRetrieval"]);if(r!=null&&s(e,["googleSearchRetrieval"],ui(r)),o(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(o(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");o(n,["urlContext"])!=null&&s(e,["urlContext"],fi());const a=o(n,["codeExecution"]);a!=null&&s(e,["codeExecution"],a);const f=o(n,["computerUse"]);return f!=null&&s(e,["computerUse"],f),e}function di(n){const e={},t=o(n,["mode"]);t!=null&&s(e,["mode"],t);const i=o(n,["allowedFunctionNames"]);return i!=null&&s(e,["allowedFunctionNames"],i),e}function pi(n){const e={},t=o(n,["latitude"]);t!=null&&s(e,["latitude"],t);const i=o(n,["longitude"]);return i!=null&&s(e,["longitude"],i),e}function mi(n){const e={},t=o(n,["latLng"]);t!=null&&s(e,["latLng"],pi(t));const i=o(n,["languageCode"]);return i!=null&&s(e,["languageCode"],i),e}function gi(n){const e={},t=o(n,["functionCallingConfig"]);t!=null&&s(e,["functionCallingConfig"],di(t));const i=o(n,["retrievalConfig"]);return i!=null&&s(e,["retrievalConfig"],mi(i)),e}function hi(n,e){const t={},i=o(n,["ttl"]);e!==void 0&&i!=null&&s(e,["ttl"],i);const r=o(n,["expireTime"]);e!==void 0&&r!=null&&s(e,["expireTime"],r);const l=o(n,["displayName"]);e!==void 0&&l!=null&&s(e,["displayName"],l);const a=o(n,["contents"]);if(e!==void 0&&a!=null){let d=F(a);Array.isArray(d)&&(d=d.map(p=>wn(p))),s(e,["contents"],d)}const f=o(n,["systemInstruction"]);e!==void 0&&f!=null&&s(e,["systemInstruction"],wn(U(f)));const c=o(n,["tools"]);if(e!==void 0&&c!=null){let d=c;Array.isArray(d)&&(d=d.map(p=>ci(p))),s(e,["tools"],d)}const u=o(n,["toolConfig"]);if(e!==void 0&&u!=null&&s(e,["toolConfig"],gi(u)),o(n,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function yi(n,e){const t={},i=o(e,["model"]);i!=null&&s(t,["model"],Xn(n,i));const r=o(e,["config"]);return r!=null&&s(t,["config"],hi(r,t)),t}function Ti(n,e){const t={},i=o(e,["name"]);i!=null&&s(t,["_url","name"],G(n,i));const r=o(e,["config"]);return r!=null&&s(t,["config"],r),t}function Ci(n,e){const t={},i=o(e,["name"]);i!=null&&s(t,["_url","name"],G(n,i));const r=o(e,["config"]);return r!=null&&s(t,["config"],r),t}function vi(n,e){const t={},i=o(n,["ttl"]);e!==void 0&&i!=null&&s(e,["ttl"],i);const r=o(n,["expireTime"]);return e!==void 0&&r!=null&&s(e,["expireTime"],r),t}function Si(n,e){const t={},i=o(e,["name"]);i!=null&&s(t,["_url","name"],G(n,i));const r=o(e,["config"]);return r!=null&&s(t,["config"],vi(r,t)),t}function Ei(n,e){const t={},i=o(n,["pageSize"]);e!==void 0&&i!=null&&s(e,["_query","pageSize"],i);const r=o(n,["pageToken"]);return e!==void 0&&r!=null&&s(e,["_query","pageToken"],r),t}function _i(n){const e={},t=o(n,["config"]);return t!=null&&s(e,["config"],Ei(t,e)),e}function Ii(n){const e={},t=o(n,["fps"]);t!=null&&s(e,["fps"],t);const i=o(n,["endOffset"]);i!=null&&s(e,["endOffset"],i);const r=o(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function Ai(n){const e={},t=o(n,["displayName"]);t!=null&&s(e,["displayName"],t);const i=o(n,["data"]);i!=null&&s(e,["data"],i);const r=o(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function Mi(n){const e={},t=o(n,["displayName"]);t!=null&&s(e,["displayName"],t);const i=o(n,["fileUri"]);i!=null&&s(e,["fileUri"],i);const r=o(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function Ri(n){const e={},t=o(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],Ii(t));const i=o(n,["thought"]);i!=null&&s(e,["thought"],i);const r=o(n,["inlineData"]);r!=null&&s(e,["inlineData"],Ai(r));const l=o(n,["fileData"]);l!=null&&s(e,["fileData"],Mi(l));const a=o(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const f=o(n,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);const c=o(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const u=o(n,["functionCall"]);u!=null&&s(e,["functionCall"],u);const d=o(n,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=o(n,["text"]);return p!=null&&s(e,["text"],p),e}function Nn(n){const e={},t=o(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>Ri(l))),s(e,["parts"],r)}const i=o(n,["role"]);return i!=null&&s(e,["role"],i),e}function Pi(n){const e={};if(o(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=o(n,["description"]);t!=null&&s(e,["description"],t);const i=o(n,["name"]);i!=null&&s(e,["name"],i);const r=o(n,["parameters"]);r!=null&&s(e,["parameters"],r);const l=o(n,["parametersJsonSchema"]);l!=null&&s(e,["parametersJsonSchema"],l);const a=o(n,["response"]);a!=null&&s(e,["response"],a);const f=o(n,["responseJsonSchema"]);return f!=null&&s(e,["responseJsonSchema"],f),e}function xi(n){const e={},t=o(n,["startTime"]);t!=null&&s(e,["startTime"],t);const i=o(n,["endTime"]);return i!=null&&s(e,["endTime"],i),e}function wi(n){const e={},t=o(n,["timeRangeFilter"]);return t!=null&&s(e,["timeRangeFilter"],xi(t)),e}function Ni(n){const e={},t=o(n,["mode"]);t!=null&&s(e,["mode"],t);const i=o(n,["dynamicThreshold"]);return i!=null&&s(e,["dynamicThreshold"],i),e}function Di(n){const e={},t=o(n,["dynamicRetrievalConfig"]);return t!=null&&s(e,["dynamicRetrievalConfig"],Ni(t)),e}function ki(){return{}}function Ui(n){const e={},t=o(n,["apiKeyString"]);return t!=null&&s(e,["apiKeyString"],t),e}function Fi(n){const e={},t=o(n,["apiKeyConfig"]);t!=null&&s(e,["apiKeyConfig"],Ui(t));const i=o(n,["authType"]);i!=null&&s(e,["authType"],i);const r=o(n,["googleServiceAccountConfig"]);r!=null&&s(e,["googleServiceAccountConfig"],r);const l=o(n,["httpBasicAuthConfig"]);l!=null&&s(e,["httpBasicAuthConfig"],l);const a=o(n,["oauthConfig"]);a!=null&&s(e,["oauthConfig"],a);const f=o(n,["oidcConfig"]);return f!=null&&s(e,["oidcConfig"],f),e}function Li(n){const e={},t=o(n,["authConfig"]);return t!=null&&s(e,["authConfig"],Fi(t)),e}function Vi(){return{}}function Gi(n){const e={},t=o(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(m=>Pi(m))),s(e,["functionDeclarations"],p)}const i=o(n,["retrieval"]);i!=null&&s(e,["retrieval"],i);const r=o(n,["googleSearch"]);r!=null&&s(e,["googleSearch"],wi(r));const l=o(n,["googleSearchRetrieval"]);l!=null&&s(e,["googleSearchRetrieval"],Di(l)),o(n,["enterpriseWebSearch"])!=null&&s(e,["enterpriseWebSearch"],ki());const f=o(n,["googleMaps"]);f!=null&&s(e,["googleMaps"],Li(f)),o(n,["urlContext"])!=null&&s(e,["urlContext"],Vi());const u=o(n,["codeExecution"]);u!=null&&s(e,["codeExecution"],u);const d=o(n,["computerUse"]);return d!=null&&s(e,["computerUse"],d),e}function qi(n){const e={},t=o(n,["mode"]);t!=null&&s(e,["mode"],t);const i=o(n,["allowedFunctionNames"]);return i!=null&&s(e,["allowedFunctionNames"],i),e}function Hi(n){const e={},t=o(n,["latitude"]);t!=null&&s(e,["latitude"],t);const i=o(n,["longitude"]);return i!=null&&s(e,["longitude"],i),e}function Bi(n){const e={},t=o(n,["latLng"]);t!=null&&s(e,["latLng"],Hi(t));const i=o(n,["languageCode"]);return i!=null&&s(e,["languageCode"],i),e}function Ji(n){const e={},t=o(n,["functionCallingConfig"]);t!=null&&s(e,["functionCallingConfig"],qi(t));const i=o(n,["retrievalConfig"]);return i!=null&&s(e,["retrievalConfig"],Bi(i)),e}function $i(n,e){const t={},i=o(n,["ttl"]);e!==void 0&&i!=null&&s(e,["ttl"],i);const r=o(n,["expireTime"]);e!==void 0&&r!=null&&s(e,["expireTime"],r);const l=o(n,["displayName"]);e!==void 0&&l!=null&&s(e,["displayName"],l);const a=o(n,["contents"]);if(e!==void 0&&a!=null){let p=F(a);Array.isArray(p)&&(p=p.map(m=>Nn(m))),s(e,["contents"],p)}const f=o(n,["systemInstruction"]);e!==void 0&&f!=null&&s(e,["systemInstruction"],Nn(U(f)));const c=o(n,["tools"]);if(e!==void 0&&c!=null){let p=c;Array.isArray(p)&&(p=p.map(m=>Gi(m))),s(e,["tools"],p)}const u=o(n,["toolConfig"]);e!==void 0&&u!=null&&s(e,["toolConfig"],Ji(u));const d=o(n,["kmsKeyName"]);return e!==void 0&&d!=null&&s(e,["encryption_spec","kmsKeyName"],d),t}function Yi(n,e){const t={},i=o(e,["model"]);i!=null&&s(t,["model"],Xn(n,i));const r=o(e,["config"]);return r!=null&&s(t,["config"],$i(r,t)),t}function Ki(n,e){const t={},i=o(e,["name"]);i!=null&&s(t,["_url","name"],G(n,i));const r=o(e,["config"]);return r!=null&&s(t,["config"],r),t}function Wi(n,e){const t={},i=o(e,["name"]);i!=null&&s(t,["_url","name"],G(n,i));const r=o(e,["config"]);return r!=null&&s(t,["config"],r),t}function zi(n,e){const t={},i=o(n,["ttl"]);e!==void 0&&i!=null&&s(e,["ttl"],i);const r=o(n,["expireTime"]);return e!==void 0&&r!=null&&s(e,["expireTime"],r),t}function bi(n,e){const t={},i=o(e,["name"]);i!=null&&s(t,["_url","name"],G(n,i));const r=o(e,["config"]);return r!=null&&s(t,["config"],zi(r,t)),t}function Xi(n,e){const t={},i=o(n,["pageSize"]);e!==void 0&&i!=null&&s(e,["_query","pageSize"],i);const r=o(n,["pageToken"]);return e!==void 0&&r!=null&&s(e,["_query","pageToken"],r),t}function Qi(n){const e={},t=o(n,["config"]);return t!=null&&s(e,["config"],Xi(t,e)),e}function oe(n){const e={},t=o(n,["name"]);t!=null&&s(e,["name"],t);const i=o(n,["displayName"]);i!=null&&s(e,["displayName"],i);const r=o(n,["model"]);r!=null&&s(e,["model"],r);const l=o(n,["createTime"]);l!=null&&s(e,["createTime"],l);const a=o(n,["updateTime"]);a!=null&&s(e,["updateTime"],a);const f=o(n,["expireTime"]);f!=null&&s(e,["expireTime"],f);const c=o(n,["usageMetadata"]);return c!=null&&s(e,["usageMetadata"],c),e}function Zi(){return{}}function Oi(n){const e={},t=o(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const i=o(n,["nextPageToken"]);i!=null&&s(e,["nextPageToken"],i);const r=o(n,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>oe(a))),s(e,["cachedContents"],l)}return e}function ie(n){const e={},t=o(n,["name"]);t!=null&&s(e,["name"],t);const i=o(n,["displayName"]);i!=null&&s(e,["displayName"],i);const r=o(n,["model"]);r!=null&&s(e,["model"],r);const l=o(n,["createTime"]);l!=null&&s(e,["createTime"],l);const a=o(n,["updateTime"]);a!=null&&s(e,["updateTime"],a);const f=o(n,["expireTime"]);f!=null&&s(e,["expireTime"],f);const c=o(n,["usageMetadata"]);return c!=null&&s(e,["usageMetadata"],c),e}function ji(){return{}}function es(n){const e={},t=o(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const i=o(n,["nextPageToken"]);i!=null&&s(e,["nextPageToken"],i);const r=o(n,["cachedContents"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>ie(a))),s(e,["cachedContents"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ns extends B{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new ee(H.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(t),t)}async create(e){var t,i,r,l;let a,f="",c={};if(this.apiClient.isVertexAI()){const u=Yi(this.apiClient,e);return f=C("cachedContents",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>ie(d))}else{const u=yi(this.apiClient,e);return f=C("cachedContents",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(d=>oe(d))}}async get(e){var t,i,r,l;let a,f="",c={};if(this.apiClient.isVertexAI()){const u=Ki(this.apiClient,e);return f=C("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>ie(d))}else{const u=Ti(this.apiClient,e);return f=C("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(d=>oe(d))}}async delete(e){var t,i,r,l;let a,f="",c={};if(this.apiClient.isVertexAI()){const u=Wi(this.apiClient,e);return f=C("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(()=>{const d=ji(),p=new In;return Object.assign(p,d),p})}else{const u=Ci(this.apiClient,e);return f=C("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(()=>{const d=Zi(),p=new In;return Object.assign(p,d),p})}}async update(e){var t,i,r,l;let a,f="",c={};if(this.apiClient.isVertexAI()){const u=bi(this.apiClient,e);return f=C("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>ie(d))}else{const u=Si(this.apiClient,e);return f=C("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(d=>oe(d))}}async listInternal(e){var t,i,r,l;let a,f="",c={};if(this.apiClient.isVertexAI()){const u=Qi(e);return f=C("cachedContents",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=es(d),m=new An;return Object.assign(m,p),m})}else{const u=_i(e);return f=C("cachedContents",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=Oi(d),m=new An;return Object.assign(m,p),m})}}}function Dn(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function D(n){return this instanceof D?(this.v=n,this):new D(n)}function K(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,l=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",a),r[Symbol.asyncIterator]=function(){return this},r;function a(g){return function(h){return Promise.resolve(h).then(g,p)}}function f(g,h){i[g]&&(r[g]=function(y){return new Promise(function(T,E){l.push([g,y,T,E])>1||c(g,y)})},h&&(r[g]=h(r[g])))}function c(g,h){try{u(i[g](h))}catch(y){m(l[0][3],y)}}function u(g){g.value instanceof D?Promise.resolve(g.value.v).then(d,p):m(l[0][2],g)}function d(g){c("next",g)}function p(g){c("throw",g)}function m(g,h){g(h),l.shift(),l.length&&c(l[0][0],l[0][1])}}function j(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Dn=="function"?Dn(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(l){t[l]=n[l]&&function(a){return new Promise(function(f,c){a=n[l](a),r(f,c,a.done,a.value)})}}function r(l,a,f,c){Promise.resolve(c).then(function(u){l({value:u,done:f})},a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ts(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:ct(t)}function ct(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0||!e.thought&&e.text!==void 0&&e.text==="")return!1;return!0}function os(n){if(n.length!==0){for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function kn(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let i=0;for(;i<t;)if(n[i].role==="user")e.push(n[i]),i++;else{const r=[];let l=!0;for(;i<t&&n[i].role==="model";)r.push(n[i]),l&&!ct(n[i])&&(l=!1),i++;l?e.push(...r):e.pop()}return e}class is{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new ss(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class ss{constructor(e,t,i,r={},l=[]){this.apiClient=e,this.modelsModule=t,this.model=i,this.config=r,this.history=l,this.sendPromise=Promise.resolve(),os(l)}async sendMessage(e){var t;await this.sendPromise;const i=U(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var l,a,f;const c=await r,u=(a=(l=c.candidates)===null||l===void 0?void 0:l[0])===null||a===void 0?void 0:a.content,d=c.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let m=[];d!=null&&(m=(f=d.slice(p))!==null&&f!==void 0?f:[]);const g=u?[u]:[];this.recordHistory(i,g,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var t;await this.sendPromise;const i=U(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const l=await r;return this.processStreamResponse(l,i)}getHistory(e=!1){const t=e?kn(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var i,r;return K(this,arguments,function*(){var a,f,c,u;const d=[];try{for(var p=!0,m=j(e),g;g=yield D(m.next()),a=g.done,!a;p=!0){u=g.value,p=!1;const h=u;if(ts(h)){const y=(r=(i=h.candidates)===null||i===void 0?void 0:i[0])===null||r===void 0?void 0:r.content;y!==void 0&&d.push(y)}yield yield D(h)}}catch(h){f={error:h}}finally{try{!p&&!a&&(c=m.return)&&(yield D(c.call(m)))}finally{if(f)throw f.error}}this.recordHistory(t,d)})}recordHistory(e,t,i){let r=[];t.length>0&&t.every(l=>l.role!==void 0)?r=t:r.push({role:"model",parts:[]}),i&&i.length>0?this.history.push(...kn(i)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ae extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,ae.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rs(n,e){const t={},i=o(n,["pageSize"]);e!==void 0&&i!=null&&s(e,["_query","pageSize"],i);const r=o(n,["pageToken"]);return e!==void 0&&r!=null&&s(e,["_query","pageToken"],r),t}function ls(n){const e={},t=o(n,["config"]);return t!=null&&s(e,["config"],rs(t,e)),e}function as(n){const e={},t=o(n,["details"]);t!=null&&s(e,["details"],t);const i=o(n,["message"]);i!=null&&s(e,["message"],i);const r=o(n,["code"]);return r!=null&&s(e,["code"],r),e}function us(n){const e={},t=o(n,["name"]);t!=null&&s(e,["name"],t);const i=o(n,["displayName"]);i!=null&&s(e,["displayName"],i);const r=o(n,["mimeType"]);r!=null&&s(e,["mimeType"],r);const l=o(n,["sizeBytes"]);l!=null&&s(e,["sizeBytes"],l);const a=o(n,["createTime"]);a!=null&&s(e,["createTime"],a);const f=o(n,["expirationTime"]);f!=null&&s(e,["expirationTime"],f);const c=o(n,["updateTime"]);c!=null&&s(e,["updateTime"],c);const u=o(n,["sha256Hash"]);u!=null&&s(e,["sha256Hash"],u);const d=o(n,["uri"]);d!=null&&s(e,["uri"],d);const p=o(n,["downloadUri"]);p!=null&&s(e,["downloadUri"],p);const m=o(n,["state"]);m!=null&&s(e,["state"],m);const g=o(n,["source"]);g!=null&&s(e,["source"],g);const h=o(n,["videoMetadata"]);h!=null&&s(e,["videoMetadata"],h);const y=o(n,["error"]);return y!=null&&s(e,["error"],as(y)),e}function fs(n){const e={},t=o(n,["file"]);t!=null&&s(e,["file"],us(t));const i=o(n,["config"]);return i!=null&&s(e,["config"],i),e}function cs(n){const e={},t=o(n,["name"]);t!=null&&s(e,["_url","file"],tt(t));const i=o(n,["config"]);return i!=null&&s(e,["config"],i),e}function ds(n){const e={},t=o(n,["name"]);t!=null&&s(e,["_url","file"],tt(t));const i=o(n,["config"]);return i!=null&&s(e,["config"],i),e}function ps(n){const e={},t=o(n,["details"]);t!=null&&s(e,["details"],t);const i=o(n,["message"]);i!=null&&s(e,["message"],i);const r=o(n,["code"]);return r!=null&&s(e,["code"],r),e}function Ce(n){const e={},t=o(n,["name"]);t!=null&&s(e,["name"],t);const i=o(n,["displayName"]);i!=null&&s(e,["displayName"],i);const r=o(n,["mimeType"]);r!=null&&s(e,["mimeType"],r);const l=o(n,["sizeBytes"]);l!=null&&s(e,["sizeBytes"],l);const a=o(n,["createTime"]);a!=null&&s(e,["createTime"],a);const f=o(n,["expirationTime"]);f!=null&&s(e,["expirationTime"],f);const c=o(n,["updateTime"]);c!=null&&s(e,["updateTime"],c);const u=o(n,["sha256Hash"]);u!=null&&s(e,["sha256Hash"],u);const d=o(n,["uri"]);d!=null&&s(e,["uri"],d);const p=o(n,["downloadUri"]);p!=null&&s(e,["downloadUri"],p);const m=o(n,["state"]);m!=null&&s(e,["state"],m);const g=o(n,["source"]);g!=null&&s(e,["source"],g);const h=o(n,["videoMetadata"]);h!=null&&s(e,["videoMetadata"],h);const y=o(n,["error"]);return y!=null&&s(e,["error"],ps(y)),e}function ms(n){const e={},t=o(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const i=o(n,["nextPageToken"]);i!=null&&s(e,["nextPageToken"],i);const r=o(n,["files"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>Ce(a))),s(e,["files"],l)}return e}function gs(n){const e={},t=o(n,["sdkHttpResponse"]);return t!=null&&s(e,["sdkHttpResponse"],t),e}function hs(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ys extends B{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new ee(H.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>Ce(t))}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,i;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=ls(e);return l=C("files",f._url),a=f._query,delete f.config,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:c.headers},d})),r.then(c=>{const u=ms(c),d=new Ut;return Object.assign(d,u),d})}}async createInternal(e){var t,i;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=fs(e);return l=C("upload/v1beta/files",f._url),a=f._query,delete f.config,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(c=>{const u=gs(c),d=new Ft;return Object.assign(d,u),d})}}async get(e){var t,i;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=cs(e);return l=C("files/{file}",f._url),a=f._query,delete f.config,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(f),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(c=>Ce(c))}}async delete(e){var t,i;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=ds(e);return l=C("files/{file}",f._url),a=f._query,delete f.config,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(f),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(()=>{const c=hs(),u=new Lt;return Object.assign(u,c),u})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ts(n){const e={},t=o(n,["voiceName"]);return t!=null&&s(e,["voiceName"],t),e}function dt(n){const e={},t=o(n,["prebuiltVoiceConfig"]);return t!=null&&s(e,["prebuiltVoiceConfig"],Ts(t)),e}function Cs(n){const e={},t=o(n,["speaker"]);t!=null&&s(e,["speaker"],t);const i=o(n,["voiceConfig"]);return i!=null&&s(e,["voiceConfig"],dt(i)),e}function vs(n){const e={},t=o(n,["speakerVoiceConfigs"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>Cs(r))),s(e,["speakerVoiceConfigs"],i)}return e}function Ss(n){const e={},t=o(n,["voiceConfig"]);t!=null&&s(e,["voiceConfig"],dt(t));const i=o(n,["multiSpeakerVoiceConfig"]);i!=null&&s(e,["multiSpeakerVoiceConfig"],vs(i));const r=o(n,["languageCode"]);return r!=null&&s(e,["languageCode"],r),e}function Es(n){const e={},t=o(n,["fps"]);t!=null&&s(e,["fps"],t);const i=o(n,["endOffset"]);i!=null&&s(e,["endOffset"],i);const r=o(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function _s(n){const e={};if(o(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=o(n,["data"]);t!=null&&s(e,["data"],t);const i=o(n,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function Is(n){const e={};if(o(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=o(n,["fileUri"]);t!=null&&s(e,["fileUri"],t);const i=o(n,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function As(n){const e={},t=o(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],Es(t));const i=o(n,["thought"]);i!=null&&s(e,["thought"],i);const r=o(n,["inlineData"]);r!=null&&s(e,["inlineData"],_s(r));const l=o(n,["fileData"]);l!=null&&s(e,["fileData"],Is(l));const a=o(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const f=o(n,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);const c=o(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const u=o(n,["functionCall"]);u!=null&&s(e,["functionCall"],u);const d=o(n,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=o(n,["text"]);return p!=null&&s(e,["text"],p),e}function Ms(n){const e={},t=o(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>As(l))),s(e,["parts"],r)}const i=o(n,["role"]);return i!=null&&s(e,["role"],i),e}function Rs(n){const e={},t=o(n,["behavior"]);t!=null&&s(e,["behavior"],t);const i=o(n,["description"]);i!=null&&s(e,["description"],i);const r=o(n,["name"]);r!=null&&s(e,["name"],r);const l=o(n,["parameters"]);l!=null&&s(e,["parameters"],l);const a=o(n,["parametersJsonSchema"]);a!=null&&s(e,["parametersJsonSchema"],a);const f=o(n,["response"]);f!=null&&s(e,["response"],f);const c=o(n,["responseJsonSchema"]);return c!=null&&s(e,["responseJsonSchema"],c),e}function Ps(n){const e={},t=o(n,["startTime"]);t!=null&&s(e,["startTime"],t);const i=o(n,["endTime"]);return i!=null&&s(e,["endTime"],i),e}function xs(n){const e={},t=o(n,["timeRangeFilter"]);return t!=null&&s(e,["timeRangeFilter"],Ps(t)),e}function ws(n){const e={},t=o(n,["mode"]);t!=null&&s(e,["mode"],t);const i=o(n,["dynamicThreshold"]);return i!=null&&s(e,["dynamicThreshold"],i),e}function Ns(n){const e={},t=o(n,["dynamicRetrievalConfig"]);return t!=null&&s(e,["dynamicRetrievalConfig"],ws(t)),e}function Ds(){return{}}function ks(n){const e={},t=o(n,["functionDeclarations"]);if(t!=null){let c=t;Array.isArray(c)&&(c=c.map(u=>Rs(u))),s(e,["functionDeclarations"],c)}if(o(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=o(n,["googleSearch"]);i!=null&&s(e,["googleSearch"],xs(i));const r=o(n,["googleSearchRetrieval"]);if(r!=null&&s(e,["googleSearchRetrieval"],Ns(r)),o(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(o(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");o(n,["urlContext"])!=null&&s(e,["urlContext"],Ds());const a=o(n,["codeExecution"]);a!=null&&s(e,["codeExecution"],a);const f=o(n,["computerUse"]);return f!=null&&s(e,["computerUse"],f),e}function Us(n){const e={},t=o(n,["handle"]);if(t!=null&&s(e,["handle"],t),o(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Un(){return{}}function Fs(n){const e={},t=o(n,["disabled"]);t!=null&&s(e,["disabled"],t);const i=o(n,["startOfSpeechSensitivity"]);i!=null&&s(e,["startOfSpeechSensitivity"],i);const r=o(n,["endOfSpeechSensitivity"]);r!=null&&s(e,["endOfSpeechSensitivity"],r);const l=o(n,["prefixPaddingMs"]);l!=null&&s(e,["prefixPaddingMs"],l);const a=o(n,["silenceDurationMs"]);return a!=null&&s(e,["silenceDurationMs"],a),e}function Ls(n){const e={},t=o(n,["automaticActivityDetection"]);t!=null&&s(e,["automaticActivityDetection"],Fs(t));const i=o(n,["activityHandling"]);i!=null&&s(e,["activityHandling"],i);const r=o(n,["turnCoverage"]);return r!=null&&s(e,["turnCoverage"],r),e}function Vs(n){const e={},t=o(n,["targetTokens"]);return t!=null&&s(e,["targetTokens"],t),e}function Gs(n){const e={},t=o(n,["triggerTokens"]);t!=null&&s(e,["triggerTokens"],t);const i=o(n,["slidingWindow"]);return i!=null&&s(e,["slidingWindow"],Vs(i)),e}function qs(n){const e={},t=o(n,["proactiveAudio"]);return t!=null&&s(e,["proactiveAudio"],t),e}function Hs(n,e){const t={},i=o(n,["generationConfig"]);e!==void 0&&i!=null&&s(e,["setup","generationConfig"],i);const r=o(n,["responseModalities"]);e!==void 0&&r!=null&&s(e,["setup","generationConfig","responseModalities"],r);const l=o(n,["temperature"]);e!==void 0&&l!=null&&s(e,["setup","generationConfig","temperature"],l);const a=o(n,["topP"]);e!==void 0&&a!=null&&s(e,["setup","generationConfig","topP"],a);const f=o(n,["topK"]);e!==void 0&&f!=null&&s(e,["setup","generationConfig","topK"],f);const c=o(n,["maxOutputTokens"]);e!==void 0&&c!=null&&s(e,["setup","generationConfig","maxOutputTokens"],c);const u=o(n,["mediaResolution"]);e!==void 0&&u!=null&&s(e,["setup","generationConfig","mediaResolution"],u);const d=o(n,["seed"]);e!==void 0&&d!=null&&s(e,["setup","generationConfig","seed"],d);const p=o(n,["speechConfig"]);e!==void 0&&p!=null&&s(e,["setup","generationConfig","speechConfig"],Ss(Re(p)));const m=o(n,["enableAffectiveDialog"]);e!==void 0&&m!=null&&s(e,["setup","generationConfig","enableAffectiveDialog"],m);const g=o(n,["systemInstruction"]);e!==void 0&&g!=null&&s(e,["setup","systemInstruction"],Ms(U(g)));const h=o(n,["tools"]);if(e!==void 0&&h!=null){let I=b(h);Array.isArray(I)&&(I=I.map(R=>ks(z(R)))),s(e,["setup","tools"],I)}const y=o(n,["sessionResumption"]);e!==void 0&&y!=null&&s(e,["setup","sessionResumption"],Us(y));const T=o(n,["inputAudioTranscription"]);e!==void 0&&T!=null&&s(e,["setup","inputAudioTranscription"],Un());const E=o(n,["outputAudioTranscription"]);e!==void 0&&E!=null&&s(e,["setup","outputAudioTranscription"],Un());const v=o(n,["realtimeInputConfig"]);e!==void 0&&v!=null&&s(e,["setup","realtimeInputConfig"],Ls(v));const S=o(n,["contextWindowCompression"]);e!==void 0&&S!=null&&s(e,["setup","contextWindowCompression"],Gs(S));const A=o(n,["proactivity"]);return e!==void 0&&A!=null&&s(e,["setup","proactivity"],qs(A)),t}function Bs(n,e){const t={},i=o(e,["model"]);i!=null&&s(t,["setup","model"],x(n,i));const r=o(e,["config"]);return r!=null&&s(t,["config"],Hs(r,t)),t}function Js(){return{}}function $s(){return{}}function Ys(n){const e={},t=o(n,["media"]);t!=null&&s(e,["mediaChunks"],Qn(t));const i=o(n,["audio"]);i!=null&&s(e,["audio"],On(i));const r=o(n,["audioStreamEnd"]);r!=null&&s(e,["audioStreamEnd"],r);const l=o(n,["video"]);l!=null&&s(e,["video"],Zn(l));const a=o(n,["text"]);return a!=null&&s(e,["text"],a),o(n,["activityStart"])!=null&&s(e,["activityStart"],Js()),o(n,["activityEnd"])!=null&&s(e,["activityEnd"],$s()),e}function pt(n){const e={},t=o(n,["text"]);t!=null&&s(e,["text"],t);const i=o(n,["weight"]);return i!=null&&s(e,["weight"],i),e}function Ks(n){const e={},t=o(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>pt(r))),s(e,["weightedPrompts"],i)}return e}function mt(n){const e={},t=o(n,["temperature"]);t!=null&&s(e,["temperature"],t);const i=o(n,["topK"]);i!=null&&s(e,["topK"],i);const r=o(n,["seed"]);r!=null&&s(e,["seed"],r);const l=o(n,["guidance"]);l!=null&&s(e,["guidance"],l);const a=o(n,["bpm"]);a!=null&&s(e,["bpm"],a);const f=o(n,["density"]);f!=null&&s(e,["density"],f);const c=o(n,["brightness"]);c!=null&&s(e,["brightness"],c);const u=o(n,["scale"]);u!=null&&s(e,["scale"],u);const d=o(n,["muteBass"]);d!=null&&s(e,["muteBass"],d);const p=o(n,["muteDrums"]);p!=null&&s(e,["muteDrums"],p);const m=o(n,["onlyBassAndDrums"]);m!=null&&s(e,["onlyBassAndDrums"],m);const g=o(n,["musicGenerationMode"]);return g!=null&&s(e,["musicGenerationMode"],g),e}function Ws(n){const e={},t=o(n,["musicGenerationConfig"]);return t!=null&&s(e,["musicGenerationConfig"],mt(t)),e}function gt(n){const e={},t=o(n,["model"]);return t!=null&&s(e,["model"],t),e}function ht(n){const e={},t=o(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>pt(r))),s(e,["weightedPrompts"],i)}return e}function ve(n){const e={},t=o(n,["setup"]);t!=null&&s(e,["setup"],gt(t));const i=o(n,["clientContent"]);i!=null&&s(e,["clientContent"],ht(i));const r=o(n,["musicGenerationConfig"]);r!=null&&s(e,["musicGenerationConfig"],mt(r));const l=o(n,["playbackControl"]);return l!=null&&s(e,["playbackControl"],l),e}function zs(n){const e={},t=o(n,["voiceName"]);return t!=null&&s(e,["voiceName"],t),e}function bs(n){const e={},t=o(n,["prebuiltVoiceConfig"]);return t!=null&&s(e,["prebuiltVoiceConfig"],zs(t)),e}function Xs(n){const e={},t=o(n,["voiceConfig"]);if(t!=null&&s(e,["voiceConfig"],bs(t)),o(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=o(n,["languageCode"]);return i!=null&&s(e,["languageCode"],i),e}function Qs(n){const e={},t=o(n,["fps"]);t!=null&&s(e,["fps"],t);const i=o(n,["endOffset"]);i!=null&&s(e,["endOffset"],i);const r=o(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function Zs(n){const e={},t=o(n,["displayName"]);t!=null&&s(e,["displayName"],t);const i=o(n,["data"]);i!=null&&s(e,["data"],i);const r=o(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function Os(n){const e={},t=o(n,["displayName"]);t!=null&&s(e,["displayName"],t);const i=o(n,["fileUri"]);i!=null&&s(e,["fileUri"],i);const r=o(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function js(n){const e={},t=o(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],Qs(t));const i=o(n,["thought"]);i!=null&&s(e,["thought"],i);const r=o(n,["inlineData"]);r!=null&&s(e,["inlineData"],Zs(r));const l=o(n,["fileData"]);l!=null&&s(e,["fileData"],Os(l));const a=o(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const f=o(n,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);const c=o(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const u=o(n,["functionCall"]);u!=null&&s(e,["functionCall"],u);const d=o(n,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=o(n,["text"]);return p!=null&&s(e,["text"],p),e}function er(n){const e={},t=o(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>js(l))),s(e,["parts"],r)}const i=o(n,["role"]);return i!=null&&s(e,["role"],i),e}function nr(n){const e={};if(o(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=o(n,["description"]);t!=null&&s(e,["description"],t);const i=o(n,["name"]);i!=null&&s(e,["name"],i);const r=o(n,["parameters"]);r!=null&&s(e,["parameters"],r);const l=o(n,["parametersJsonSchema"]);l!=null&&s(e,["parametersJsonSchema"],l);const a=o(n,["response"]);a!=null&&s(e,["response"],a);const f=o(n,["responseJsonSchema"]);return f!=null&&s(e,["responseJsonSchema"],f),e}function tr(n){const e={},t=o(n,["startTime"]);t!=null&&s(e,["startTime"],t);const i=o(n,["endTime"]);return i!=null&&s(e,["endTime"],i),e}function or(n){const e={},t=o(n,["timeRangeFilter"]);return t!=null&&s(e,["timeRangeFilter"],tr(t)),e}function ir(n){const e={},t=o(n,["mode"]);t!=null&&s(e,["mode"],t);const i=o(n,["dynamicThreshold"]);return i!=null&&s(e,["dynamicThreshold"],i),e}function sr(n){const e={},t=o(n,["dynamicRetrievalConfig"]);return t!=null&&s(e,["dynamicRetrievalConfig"],ir(t)),e}function rr(){return{}}function lr(n){const e={},t=o(n,["apiKeyString"]);return t!=null&&s(e,["apiKeyString"],t),e}function ar(n){const e={},t=o(n,["apiKeyConfig"]);t!=null&&s(e,["apiKeyConfig"],lr(t));const i=o(n,["authType"]);i!=null&&s(e,["authType"],i);const r=o(n,["googleServiceAccountConfig"]);r!=null&&s(e,["googleServiceAccountConfig"],r);const l=o(n,["httpBasicAuthConfig"]);l!=null&&s(e,["httpBasicAuthConfig"],l);const a=o(n,["oauthConfig"]);a!=null&&s(e,["oauthConfig"],a);const f=o(n,["oidcConfig"]);return f!=null&&s(e,["oidcConfig"],f),e}function ur(n){const e={},t=o(n,["authConfig"]);return t!=null&&s(e,["authConfig"],ar(t)),e}function fr(){return{}}function cr(n){const e={},t=o(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(m=>nr(m))),s(e,["functionDeclarations"],p)}const i=o(n,["retrieval"]);i!=null&&s(e,["retrieval"],i);const r=o(n,["googleSearch"]);r!=null&&s(e,["googleSearch"],or(r));const l=o(n,["googleSearchRetrieval"]);l!=null&&s(e,["googleSearchRetrieval"],sr(l)),o(n,["enterpriseWebSearch"])!=null&&s(e,["enterpriseWebSearch"],rr());const f=o(n,["googleMaps"]);f!=null&&s(e,["googleMaps"],ur(f)),o(n,["urlContext"])!=null&&s(e,["urlContext"],fr());const u=o(n,["codeExecution"]);u!=null&&s(e,["codeExecution"],u);const d=o(n,["computerUse"]);return d!=null&&s(e,["computerUse"],d),e}function dr(n){const e={},t=o(n,["handle"]);t!=null&&s(e,["handle"],t);const i=o(n,["transparent"]);return i!=null&&s(e,["transparent"],i),e}function Fn(){return{}}function pr(n){const e={},t=o(n,["disabled"]);t!=null&&s(e,["disabled"],t);const i=o(n,["startOfSpeechSensitivity"]);i!=null&&s(e,["startOfSpeechSensitivity"],i);const r=o(n,["endOfSpeechSensitivity"]);r!=null&&s(e,["endOfSpeechSensitivity"],r);const l=o(n,["prefixPaddingMs"]);l!=null&&s(e,["prefixPaddingMs"],l);const a=o(n,["silenceDurationMs"]);return a!=null&&s(e,["silenceDurationMs"],a),e}function mr(n){const e={},t=o(n,["automaticActivityDetection"]);t!=null&&s(e,["automaticActivityDetection"],pr(t));const i=o(n,["activityHandling"]);i!=null&&s(e,["activityHandling"],i);const r=o(n,["turnCoverage"]);return r!=null&&s(e,["turnCoverage"],r),e}function gr(n){const e={},t=o(n,["targetTokens"]);return t!=null&&s(e,["targetTokens"],t),e}function hr(n){const e={},t=o(n,["triggerTokens"]);t!=null&&s(e,["triggerTokens"],t);const i=o(n,["slidingWindow"]);return i!=null&&s(e,["slidingWindow"],gr(i)),e}function yr(n){const e={},t=o(n,["proactiveAudio"]);return t!=null&&s(e,["proactiveAudio"],t),e}function Tr(n,e){const t={},i=o(n,["generationConfig"]);e!==void 0&&i!=null&&s(e,["setup","generationConfig"],i);const r=o(n,["responseModalities"]);e!==void 0&&r!=null&&s(e,["setup","generationConfig","responseModalities"],r);const l=o(n,["temperature"]);e!==void 0&&l!=null&&s(e,["setup","generationConfig","temperature"],l);const a=o(n,["topP"]);e!==void 0&&a!=null&&s(e,["setup","generationConfig","topP"],a);const f=o(n,["topK"]);e!==void 0&&f!=null&&s(e,["setup","generationConfig","topK"],f);const c=o(n,["maxOutputTokens"]);e!==void 0&&c!=null&&s(e,["setup","generationConfig","maxOutputTokens"],c);const u=o(n,["mediaResolution"]);e!==void 0&&u!=null&&s(e,["setup","generationConfig","mediaResolution"],u);const d=o(n,["seed"]);e!==void 0&&d!=null&&s(e,["setup","generationConfig","seed"],d);const p=o(n,["speechConfig"]);e!==void 0&&p!=null&&s(e,["setup","generationConfig","speechConfig"],Xs(Re(p)));const m=o(n,["enableAffectiveDialog"]);e!==void 0&&m!=null&&s(e,["setup","generationConfig","enableAffectiveDialog"],m);const g=o(n,["systemInstruction"]);e!==void 0&&g!=null&&s(e,["setup","systemInstruction"],er(U(g)));const h=o(n,["tools"]);if(e!==void 0&&h!=null){let I=b(h);Array.isArray(I)&&(I=I.map(R=>cr(z(R)))),s(e,["setup","tools"],I)}const y=o(n,["sessionResumption"]);e!==void 0&&y!=null&&s(e,["setup","sessionResumption"],dr(y));const T=o(n,["inputAudioTranscription"]);e!==void 0&&T!=null&&s(e,["setup","inputAudioTranscription"],Fn());const E=o(n,["outputAudioTranscription"]);e!==void 0&&E!=null&&s(e,["setup","outputAudioTranscription"],Fn());const v=o(n,["realtimeInputConfig"]);e!==void 0&&v!=null&&s(e,["setup","realtimeInputConfig"],mr(v));const S=o(n,["contextWindowCompression"]);e!==void 0&&S!=null&&s(e,["setup","contextWindowCompression"],hr(S));const A=o(n,["proactivity"]);return e!==void 0&&A!=null&&s(e,["setup","proactivity"],yr(A)),t}function Cr(n,e){const t={},i=o(e,["model"]);i!=null&&s(t,["setup","model"],x(n,i));const r=o(e,["config"]);return r!=null&&s(t,["config"],Tr(r,t)),t}function vr(){return{}}function Sr(){return{}}function Er(n){const e={},t=o(n,["media"]);t!=null&&s(e,["mediaChunks"],Qn(t));const i=o(n,["audio"]);i!=null&&s(e,["audio"],On(i));const r=o(n,["audioStreamEnd"]);r!=null&&s(e,["audioStreamEnd"],r);const l=o(n,["video"]);l!=null&&s(e,["video"],Zn(l));const a=o(n,["text"]);return a!=null&&s(e,["text"],a),o(n,["activityStart"])!=null&&s(e,["activityStart"],vr()),o(n,["activityEnd"])!=null&&s(e,["activityEnd"],Sr()),e}function _r(){return{}}function Ir(n){const e={},t=o(n,["fps"]);t!=null&&s(e,["fps"],t);const i=o(n,["endOffset"]);i!=null&&s(e,["endOffset"],i);const r=o(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function Ar(n){const e={},t=o(n,["data"]);t!=null&&s(e,["data"],t);const i=o(n,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function Mr(n){const e={},t=o(n,["fileUri"]);t!=null&&s(e,["fileUri"],t);const i=o(n,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function Rr(n){const e={},t=o(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],Ir(t));const i=o(n,["thought"]);i!=null&&s(e,["thought"],i);const r=o(n,["inlineData"]);r!=null&&s(e,["inlineData"],Ar(r));const l=o(n,["fileData"]);l!=null&&s(e,["fileData"],Mr(l));const a=o(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const f=o(n,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);const c=o(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const u=o(n,["functionCall"]);u!=null&&s(e,["functionCall"],u);const d=o(n,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=o(n,["text"]);return p!=null&&s(e,["text"],p),e}function Pr(n){const e={},t=o(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>Rr(l))),s(e,["parts"],r)}const i=o(n,["role"]);return i!=null&&s(e,["role"],i),e}function Ln(n){const e={},t=o(n,["text"]);t!=null&&s(e,["text"],t);const i=o(n,["finished"]);return i!=null&&s(e,["finished"],i),e}function xr(n){const e={},t=o(n,["retrievedUrl"]);t!=null&&s(e,["retrievedUrl"],t);const i=o(n,["urlRetrievalStatus"]);return i!=null&&s(e,["urlRetrievalStatus"],i),e}function wr(n){const e={},t=o(n,["urlMetadata"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>xr(r))),s(e,["urlMetadata"],i)}return e}function Nr(n){const e={},t=o(n,["modelTurn"]);t!=null&&s(e,["modelTurn"],Pr(t));const i=o(n,["turnComplete"]);i!=null&&s(e,["turnComplete"],i);const r=o(n,["interrupted"]);r!=null&&s(e,["interrupted"],r);const l=o(n,["groundingMetadata"]);l!=null&&s(e,["groundingMetadata"],l);const a=o(n,["generationComplete"]);a!=null&&s(e,["generationComplete"],a);const f=o(n,["inputTranscription"]);f!=null&&s(e,["inputTranscription"],Ln(f));const c=o(n,["outputTranscription"]);c!=null&&s(e,["outputTranscription"],Ln(c));const u=o(n,["urlContextMetadata"]);return u!=null&&s(e,["urlContextMetadata"],wr(u)),e}function Dr(n){const e={},t=o(n,["id"]);t!=null&&s(e,["id"],t);const i=o(n,["args"]);i!=null&&s(e,["args"],i);const r=o(n,["name"]);return r!=null&&s(e,["name"],r),e}function kr(n){const e={},t=o(n,["functionCalls"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>Dr(r))),s(e,["functionCalls"],i)}return e}function Ur(n){const e={},t=o(n,["ids"]);return t!=null&&s(e,["ids"],t),e}function ne(n){const e={},t=o(n,["modality"]);t!=null&&s(e,["modality"],t);const i=o(n,["tokenCount"]);return i!=null&&s(e,["tokenCount"],i),e}function Fr(n){const e={},t=o(n,["promptTokenCount"]);t!=null&&s(e,["promptTokenCount"],t);const i=o(n,["cachedContentTokenCount"]);i!=null&&s(e,["cachedContentTokenCount"],i);const r=o(n,["responseTokenCount"]);r!=null&&s(e,["responseTokenCount"],r);const l=o(n,["toolUsePromptTokenCount"]);l!=null&&s(e,["toolUsePromptTokenCount"],l);const a=o(n,["thoughtsTokenCount"]);a!=null&&s(e,["thoughtsTokenCount"],a);const f=o(n,["totalTokenCount"]);f!=null&&s(e,["totalTokenCount"],f);const c=o(n,["promptTokensDetails"]);if(c!=null){let m=c;Array.isArray(m)&&(m=m.map(g=>ne(g))),s(e,["promptTokensDetails"],m)}const u=o(n,["cacheTokensDetails"]);if(u!=null){let m=u;Array.isArray(m)&&(m=m.map(g=>ne(g))),s(e,["cacheTokensDetails"],m)}const d=o(n,["responseTokensDetails"]);if(d!=null){let m=d;Array.isArray(m)&&(m=m.map(g=>ne(g))),s(e,["responseTokensDetails"],m)}const p=o(n,["toolUsePromptTokensDetails"]);if(p!=null){let m=p;Array.isArray(m)&&(m=m.map(g=>ne(g))),s(e,["toolUsePromptTokensDetails"],m)}return e}function Lr(n){const e={},t=o(n,["timeLeft"]);return t!=null&&s(e,["timeLeft"],t),e}function Vr(n){const e={},t=o(n,["newHandle"]);t!=null&&s(e,["newHandle"],t);const i=o(n,["resumable"]);i!=null&&s(e,["resumable"],i);const r=o(n,["lastConsumedClientMessageIndex"]);return r!=null&&s(e,["lastConsumedClientMessageIndex"],r),e}function Gr(n){const e={};o(n,["setupComplete"])!=null&&s(e,["setupComplete"],_r());const i=o(n,["serverContent"]);i!=null&&s(e,["serverContent"],Nr(i));const r=o(n,["toolCall"]);r!=null&&s(e,["toolCall"],kr(r));const l=o(n,["toolCallCancellation"]);l!=null&&s(e,["toolCallCancellation"],Ur(l));const a=o(n,["usageMetadata"]);a!=null&&s(e,["usageMetadata"],Fr(a));const f=o(n,["goAway"]);f!=null&&s(e,["goAway"],Lr(f));const c=o(n,["sessionResumptionUpdate"]);return c!=null&&s(e,["sessionResumptionUpdate"],Vr(c)),e}function qr(){return{}}function Hr(n){const e={},t=o(n,["text"]);t!=null&&s(e,["text"],t);const i=o(n,["weight"]);return i!=null&&s(e,["weight"],i),e}function Br(n){const e={},t=o(n,["weightedPrompts"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>Hr(r))),s(e,["weightedPrompts"],i)}return e}function Jr(n){const e={},t=o(n,["temperature"]);t!=null&&s(e,["temperature"],t);const i=o(n,["topK"]);i!=null&&s(e,["topK"],i);const r=o(n,["seed"]);r!=null&&s(e,["seed"],r);const l=o(n,["guidance"]);l!=null&&s(e,["guidance"],l);const a=o(n,["bpm"]);a!=null&&s(e,["bpm"],a);const f=o(n,["density"]);f!=null&&s(e,["density"],f);const c=o(n,["brightness"]);c!=null&&s(e,["brightness"],c);const u=o(n,["scale"]);u!=null&&s(e,["scale"],u);const d=o(n,["muteBass"]);d!=null&&s(e,["muteBass"],d);const p=o(n,["muteDrums"]);p!=null&&s(e,["muteDrums"],p);const m=o(n,["onlyBassAndDrums"]);m!=null&&s(e,["onlyBassAndDrums"],m);const g=o(n,["musicGenerationMode"]);return g!=null&&s(e,["musicGenerationMode"],g),e}function $r(n){const e={},t=o(n,["clientContent"]);t!=null&&s(e,["clientContent"],Br(t));const i=o(n,["musicGenerationConfig"]);return i!=null&&s(e,["musicGenerationConfig"],Jr(i)),e}function Yr(n){const e={},t=o(n,["data"]);t!=null&&s(e,["data"],t);const i=o(n,["mimeType"]);i!=null&&s(e,["mimeType"],i);const r=o(n,["sourceMetadata"]);return r!=null&&s(e,["sourceMetadata"],$r(r)),e}function Kr(n){const e={},t=o(n,["audioChunks"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>Yr(r))),s(e,["audioChunks"],i)}return e}function Wr(n){const e={},t=o(n,["text"]);t!=null&&s(e,["text"],t);const i=o(n,["filteredReason"]);return i!=null&&s(e,["filteredReason"],i),e}function zr(n){const e={};o(n,["setupComplete"])!=null&&s(e,["setupComplete"],qr());const i=o(n,["serverContent"]);i!=null&&s(e,["serverContent"],Kr(i));const r=o(n,["filteredPrompt"]);return r!=null&&s(e,["filteredPrompt"],Wr(r)),e}function br(n){const e={},t=o(n,["sessionId"]);return t!=null&&s(e,["sessionId"],t),e}function Xr(n){const e={},t=o(n,["fps"]);t!=null&&s(e,["fps"],t);const i=o(n,["endOffset"]);i!=null&&s(e,["endOffset"],i);const r=o(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function Qr(n){const e={},t=o(n,["displayName"]);t!=null&&s(e,["displayName"],t);const i=o(n,["data"]);i!=null&&s(e,["data"],i);const r=o(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function Zr(n){const e={},t=o(n,["displayName"]);t!=null&&s(e,["displayName"],t);const i=o(n,["fileUri"]);i!=null&&s(e,["fileUri"],i);const r=o(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function Or(n){const e={},t=o(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],Xr(t));const i=o(n,["thought"]);i!=null&&s(e,["thought"],i);const r=o(n,["inlineData"]);r!=null&&s(e,["inlineData"],Qr(r));const l=o(n,["fileData"]);l!=null&&s(e,["fileData"],Zr(l));const a=o(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const f=o(n,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);const c=o(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const u=o(n,["functionCall"]);u!=null&&s(e,["functionCall"],u);const d=o(n,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=o(n,["text"]);return p!=null&&s(e,["text"],p),e}function jr(n){const e={},t=o(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>Or(l))),s(e,["parts"],r)}const i=o(n,["role"]);return i!=null&&s(e,["role"],i),e}function Vn(n){const e={},t=o(n,["text"]);t!=null&&s(e,["text"],t);const i=o(n,["finished"]);return i!=null&&s(e,["finished"],i),e}function el(n){const e={},t=o(n,["modelTurn"]);t!=null&&s(e,["modelTurn"],jr(t));const i=o(n,["turnComplete"]);i!=null&&s(e,["turnComplete"],i);const r=o(n,["interrupted"]);r!=null&&s(e,["interrupted"],r);const l=o(n,["groundingMetadata"]);l!=null&&s(e,["groundingMetadata"],l);const a=o(n,["generationComplete"]);a!=null&&s(e,["generationComplete"],a);const f=o(n,["inputTranscription"]);f!=null&&s(e,["inputTranscription"],Vn(f));const c=o(n,["outputTranscription"]);return c!=null&&s(e,["outputTranscription"],Vn(c)),e}function nl(n){const e={},t=o(n,["args"]);t!=null&&s(e,["args"],t);const i=o(n,["name"]);return i!=null&&s(e,["name"],i),e}function tl(n){const e={},t=o(n,["functionCalls"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>nl(r))),s(e,["functionCalls"],i)}return e}function ol(n){const e={},t=o(n,["ids"]);return t!=null&&s(e,["ids"],t),e}function te(n){const e={},t=o(n,["modality"]);t!=null&&s(e,["modality"],t);const i=o(n,["tokenCount"]);return i!=null&&s(e,["tokenCount"],i),e}function il(n){const e={},t=o(n,["promptTokenCount"]);t!=null&&s(e,["promptTokenCount"],t);const i=o(n,["cachedContentTokenCount"]);i!=null&&s(e,["cachedContentTokenCount"],i);const r=o(n,["candidatesTokenCount"]);r!=null&&s(e,["responseTokenCount"],r);const l=o(n,["toolUsePromptTokenCount"]);l!=null&&s(e,["toolUsePromptTokenCount"],l);const a=o(n,["thoughtsTokenCount"]);a!=null&&s(e,["thoughtsTokenCount"],a);const f=o(n,["totalTokenCount"]);f!=null&&s(e,["totalTokenCount"],f);const c=o(n,["promptTokensDetails"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(h=>te(h))),s(e,["promptTokensDetails"],g)}const u=o(n,["cacheTokensDetails"]);if(u!=null){let g=u;Array.isArray(g)&&(g=g.map(h=>te(h))),s(e,["cacheTokensDetails"],g)}const d=o(n,["candidatesTokensDetails"]);if(d!=null){let g=d;Array.isArray(g)&&(g=g.map(h=>te(h))),s(e,["responseTokensDetails"],g)}const p=o(n,["toolUsePromptTokensDetails"]);if(p!=null){let g=p;Array.isArray(g)&&(g=g.map(h=>te(h))),s(e,["toolUsePromptTokensDetails"],g)}const m=o(n,["trafficType"]);return m!=null&&s(e,["trafficType"],m),e}function sl(n){const e={},t=o(n,["timeLeft"]);return t!=null&&s(e,["timeLeft"],t),e}function rl(n){const e={},t=o(n,["newHandle"]);t!=null&&s(e,["newHandle"],t);const i=o(n,["resumable"]);i!=null&&s(e,["resumable"],i);const r=o(n,["lastConsumedClientMessageIndex"]);return r!=null&&s(e,["lastConsumedClientMessageIndex"],r),e}function ll(n){const e={},t=o(n,["setupComplete"]);t!=null&&s(e,["setupComplete"],br(t));const i=o(n,["serverContent"]);i!=null&&s(e,["serverContent"],el(i));const r=o(n,["toolCall"]);r!=null&&s(e,["toolCall"],tl(r));const l=o(n,["toolCallCancellation"]);l!=null&&s(e,["toolCallCancellation"],ol(l));const a=o(n,["usageMetadata"]);a!=null&&s(e,["usageMetadata"],il(a));const f=o(n,["goAway"]);f!=null&&s(e,["goAway"],sl(f));const c=o(n,["sessionResumptionUpdate"]);return c!=null&&s(e,["sessionResumptionUpdate"],rl(c)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function al(n){const e={},t=o(n,["fps"]);t!=null&&s(e,["fps"],t);const i=o(n,["endOffset"]);i!=null&&s(e,["endOffset"],i);const r=o(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function ul(n){const e={};if(o(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=o(n,["data"]);t!=null&&s(e,["data"],t);const i=o(n,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function fl(n){const e={};if(o(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=o(n,["fileUri"]);t!=null&&s(e,["fileUri"],t);const i=o(n,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function cl(n){const e={},t=o(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],al(t));const i=o(n,["thought"]);i!=null&&s(e,["thought"],i);const r=o(n,["inlineData"]);r!=null&&s(e,["inlineData"],ul(r));const l=o(n,["fileData"]);l!=null&&s(e,["fileData"],fl(l));const a=o(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const f=o(n,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);const c=o(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const u=o(n,["functionCall"]);u!=null&&s(e,["functionCall"],u);const d=o(n,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=o(n,["text"]);return p!=null&&s(e,["text"],p),e}function ue(n){const e={},t=o(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>cl(l))),s(e,["parts"],r)}const i=o(n,["role"]);return i!=null&&s(e,["role"],i),e}function dl(n){const e={},t=o(n,["anyOf"]);t!=null&&s(e,["anyOf"],t);const i=o(n,["default"]);i!=null&&s(e,["default"],i);const r=o(n,["description"]);r!=null&&s(e,["description"],r);const l=o(n,["enum"]);l!=null&&s(e,["enum"],l);const a=o(n,["example"]);a!=null&&s(e,["example"],a);const f=o(n,["format"]);f!=null&&s(e,["format"],f);const c=o(n,["items"]);c!=null&&s(e,["items"],c);const u=o(n,["maxItems"]);u!=null&&s(e,["maxItems"],u);const d=o(n,["maxLength"]);d!=null&&s(e,["maxLength"],d);const p=o(n,["maxProperties"]);p!=null&&s(e,["maxProperties"],p);const m=o(n,["maximum"]);m!=null&&s(e,["maximum"],m);const g=o(n,["minItems"]);g!=null&&s(e,["minItems"],g);const h=o(n,["minLength"]);h!=null&&s(e,["minLength"],h);const y=o(n,["minProperties"]);y!=null&&s(e,["minProperties"],y);const T=o(n,["minimum"]);T!=null&&s(e,["minimum"],T);const E=o(n,["nullable"]);E!=null&&s(e,["nullable"],E);const v=o(n,["pattern"]);v!=null&&s(e,["pattern"],v);const S=o(n,["properties"]);S!=null&&s(e,["properties"],S);const A=o(n,["propertyOrdering"]);A!=null&&s(e,["propertyOrdering"],A);const I=o(n,["required"]);I!=null&&s(e,["required"],I);const R=o(n,["title"]);R!=null&&s(e,["title"],R);const P=o(n,["type"]);return P!=null&&s(e,["type"],P),e}function pl(n){const e={};if(o(n,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const t=o(n,["category"]);t!=null&&s(e,["category"],t);const i=o(n,["threshold"]);return i!=null&&s(e,["threshold"],i),e}function ml(n){const e={},t=o(n,["behavior"]);t!=null&&s(e,["behavior"],t);const i=o(n,["description"]);i!=null&&s(e,["description"],i);const r=o(n,["name"]);r!=null&&s(e,["name"],r);const l=o(n,["parameters"]);l!=null&&s(e,["parameters"],l);const a=o(n,["parametersJsonSchema"]);a!=null&&s(e,["parametersJsonSchema"],a);const f=o(n,["response"]);f!=null&&s(e,["response"],f);const c=o(n,["responseJsonSchema"]);return c!=null&&s(e,["responseJsonSchema"],c),e}function gl(n){const e={},t=o(n,["startTime"]);t!=null&&s(e,["startTime"],t);const i=o(n,["endTime"]);return i!=null&&s(e,["endTime"],i),e}function hl(n){const e={},t=o(n,["timeRangeFilter"]);return t!=null&&s(e,["timeRangeFilter"],gl(t)),e}function yl(n){const e={},t=o(n,["mode"]);t!=null&&s(e,["mode"],t);const i=o(n,["dynamicThreshold"]);return i!=null&&s(e,["dynamicThreshold"],i),e}function Tl(n){const e={},t=o(n,["dynamicRetrievalConfig"]);return t!=null&&s(e,["dynamicRetrievalConfig"],yl(t)),e}function Cl(){return{}}function vl(n){const e={},t=o(n,["functionDeclarations"]);if(t!=null){let c=t;Array.isArray(c)&&(c=c.map(u=>ml(u))),s(e,["functionDeclarations"],c)}if(o(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=o(n,["googleSearch"]);i!=null&&s(e,["googleSearch"],hl(i));const r=o(n,["googleSearchRetrieval"]);if(r!=null&&s(e,["googleSearchRetrieval"],Tl(r)),o(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(o(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");o(n,["urlContext"])!=null&&s(e,["urlContext"],Cl());const a=o(n,["codeExecution"]);a!=null&&s(e,["codeExecution"],a);const f=o(n,["computerUse"]);return f!=null&&s(e,["computerUse"],f),e}function Sl(n){const e={},t=o(n,["mode"]);t!=null&&s(e,["mode"],t);const i=o(n,["allowedFunctionNames"]);return i!=null&&s(e,["allowedFunctionNames"],i),e}function El(n){const e={},t=o(n,["latitude"]);t!=null&&s(e,["latitude"],t);const i=o(n,["longitude"]);return i!=null&&s(e,["longitude"],i),e}function _l(n){const e={},t=o(n,["latLng"]);t!=null&&s(e,["latLng"],El(t));const i=o(n,["languageCode"]);return i!=null&&s(e,["languageCode"],i),e}function Il(n){const e={},t=o(n,["functionCallingConfig"]);t!=null&&s(e,["functionCallingConfig"],Sl(t));const i=o(n,["retrievalConfig"]);return i!=null&&s(e,["retrievalConfig"],_l(i)),e}function Al(n){const e={},t=o(n,["voiceName"]);return t!=null&&s(e,["voiceName"],t),e}function yt(n){const e={},t=o(n,["prebuiltVoiceConfig"]);return t!=null&&s(e,["prebuiltVoiceConfig"],Al(t)),e}function Ml(n){const e={},t=o(n,["speaker"]);t!=null&&s(e,["speaker"],t);const i=o(n,["voiceConfig"]);return i!=null&&s(e,["voiceConfig"],yt(i)),e}function Rl(n){const e={},t=o(n,["speakerVoiceConfigs"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>Ml(r))),s(e,["speakerVoiceConfigs"],i)}return e}function Pl(n){const e={},t=o(n,["voiceConfig"]);t!=null&&s(e,["voiceConfig"],yt(t));const i=o(n,["multiSpeakerVoiceConfig"]);i!=null&&s(e,["multiSpeakerVoiceConfig"],Rl(i));const r=o(n,["languageCode"]);return r!=null&&s(e,["languageCode"],r),e}function xl(n){const e={},t=o(n,["includeThoughts"]);t!=null&&s(e,["includeThoughts"],t);const i=o(n,["thinkingBudget"]);return i!=null&&s(e,["thinkingBudget"],i),e}function wl(n,e,t){const i={},r=o(e,["systemInstruction"]);t!==void 0&&r!=null&&s(t,["systemInstruction"],ue(U(r)));const l=o(e,["temperature"]);l!=null&&s(i,["temperature"],l);const a=o(e,["topP"]);a!=null&&s(i,["topP"],a);const f=o(e,["topK"]);f!=null&&s(i,["topK"],f);const c=o(e,["candidateCount"]);c!=null&&s(i,["candidateCount"],c);const u=o(e,["maxOutputTokens"]);u!=null&&s(i,["maxOutputTokens"],u);const d=o(e,["stopSequences"]);d!=null&&s(i,["stopSequences"],d);const p=o(e,["responseLogprobs"]);p!=null&&s(i,["responseLogprobs"],p);const m=o(e,["logprobs"]);m!=null&&s(i,["logprobs"],m);const g=o(e,["presencePenalty"]);g!=null&&s(i,["presencePenalty"],g);const h=o(e,["frequencyPenalty"]);h!=null&&s(i,["frequencyPenalty"],h);const y=o(e,["seed"]);y!=null&&s(i,["seed"],y);const T=o(e,["responseMimeType"]);T!=null&&s(i,["responseMimeType"],T);const E=o(e,["responseSchema"]);E!=null&&s(i,["responseSchema"],dl(Ae(E)));const v=o(e,["responseJsonSchema"]);if(v!=null&&s(i,["responseJsonSchema"],v),o(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(o(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const S=o(e,["safetySettings"]);if(t!==void 0&&S!=null){let w=S;Array.isArray(w)&&(w=w.map(L=>pl(L))),s(t,["safetySettings"],w)}const A=o(e,["tools"]);if(t!==void 0&&A!=null){let w=b(A);Array.isArray(w)&&(w=w.map(L=>vl(z(L)))),s(t,["tools"],w)}const I=o(e,["toolConfig"]);if(t!==void 0&&I!=null&&s(t,["toolConfig"],Il(I)),o(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const R=o(e,["cachedContent"]);t!==void 0&&R!=null&&s(t,["cachedContent"],G(n,R));const P=o(e,["responseModalities"]);P!=null&&s(i,["responseModalities"],P);const k=o(e,["mediaResolution"]);k!=null&&s(i,["mediaResolution"],k);const M=o(e,["speechConfig"]);if(M!=null&&s(i,["speechConfig"],Pl(Me(M))),o(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const N=o(e,["thinkingConfig"]);return N!=null&&s(i,["thinkingConfig"],xl(N)),i}function Gn(n,e){const t={},i=o(e,["model"]);i!=null&&s(t,["_url","model"],x(n,i));const r=o(e,["contents"]);if(r!=null){let a=F(r);Array.isArray(a)&&(a=a.map(f=>ue(f))),s(t,["contents"],a)}const l=o(e,["config"]);return l!=null&&s(t,["generationConfig"],wl(n,l,t)),t}function Nl(n,e){const t={},i=o(n,["taskType"]);e!==void 0&&i!=null&&s(e,["requests[]","taskType"],i);const r=o(n,["title"]);e!==void 0&&r!=null&&s(e,["requests[]","title"],r);const l=o(n,["outputDimensionality"]);if(e!==void 0&&l!=null&&s(e,["requests[]","outputDimensionality"],l),o(n,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(o(n,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function Dl(n,e){const t={},i=o(e,["model"]);i!=null&&s(t,["_url","model"],x(n,i));const r=o(e,["contents"]);r!=null&&s(t,["requests[]","content"],et(n,r));const l=o(e,["config"]);l!=null&&s(t,["config"],Nl(l,t));const a=o(e,["model"]);return a!==void 0&&s(t,["requests[]","model"],x(n,a)),t}function kl(n,e){const t={};if(o(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(o(n,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=o(n,["numberOfImages"]);e!==void 0&&i!=null&&s(e,["parameters","sampleCount"],i);const r=o(n,["aspectRatio"]);e!==void 0&&r!=null&&s(e,["parameters","aspectRatio"],r);const l=o(n,["guidanceScale"]);if(e!==void 0&&l!=null&&s(e,["parameters","guidanceScale"],l),o(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=o(n,["safetyFilterLevel"]);e!==void 0&&a!=null&&s(e,["parameters","safetySetting"],a);const f=o(n,["personGeneration"]);e!==void 0&&f!=null&&s(e,["parameters","personGeneration"],f);const c=o(n,["includeSafetyAttributes"]);e!==void 0&&c!=null&&s(e,["parameters","includeSafetyAttributes"],c);const u=o(n,["includeRaiReason"]);e!==void 0&&u!=null&&s(e,["parameters","includeRaiReason"],u);const d=o(n,["language"]);e!==void 0&&d!=null&&s(e,["parameters","language"],d);const p=o(n,["outputMimeType"]);e!==void 0&&p!=null&&s(e,["parameters","outputOptions","mimeType"],p);const m=o(n,["outputCompressionQuality"]);if(e!==void 0&&m!=null&&s(e,["parameters","outputOptions","compressionQuality"],m),o(n,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");const g=o(n,["imageSize"]);if(e!==void 0&&g!=null&&s(e,["parameters","sampleImageSize"],g),o(n,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function Ul(n,e){const t={},i=o(e,["model"]);i!=null&&s(t,["_url","model"],x(n,i));const r=o(e,["prompt"]);r!=null&&s(t,["instances[0]","prompt"],r);const l=o(e,["config"]);return l!=null&&s(t,["config"],kl(l,t)),t}function Fl(n,e){const t={},i=o(e,["model"]);i!=null&&s(t,["_url","name"],x(n,i));const r=o(e,["config"]);return r!=null&&s(t,["config"],r),t}function Ll(n,e,t){const i={},r=o(e,["pageSize"]);t!==void 0&&r!=null&&s(t,["_query","pageSize"],r);const l=o(e,["pageToken"]);t!==void 0&&l!=null&&s(t,["_query","pageToken"],l);const a=o(e,["filter"]);t!==void 0&&a!=null&&s(t,["_query","filter"],a);const f=o(e,["queryBase"]);return t!==void 0&&f!=null&&s(t,["_url","models_url"],ot(n,f)),i}function Vl(n,e){const t={},i=o(e,["config"]);return i!=null&&s(t,["config"],Ll(n,i,t)),t}function Gl(n,e){const t={},i=o(n,["displayName"]);e!==void 0&&i!=null&&s(e,["displayName"],i);const r=o(n,["description"]);e!==void 0&&r!=null&&s(e,["description"],r);const l=o(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&s(e,["defaultCheckpointId"],l),t}function ql(n,e){const t={},i=o(e,["model"]);i!=null&&s(t,["_url","name"],x(n,i));const r=o(e,["config"]);return r!=null&&s(t,["config"],Gl(r,t)),t}function Hl(n,e){const t={},i=o(e,["model"]);i!=null&&s(t,["_url","name"],x(n,i));const r=o(e,["config"]);return r!=null&&s(t,["config"],r),t}function Bl(n){const e={};if(o(n,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(o(n,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(o(n,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function Jl(n,e){const t={},i=o(e,["model"]);i!=null&&s(t,["_url","model"],x(n,i));const r=o(e,["contents"]);if(r!=null){let a=F(r);Array.isArray(a)&&(a=a.map(f=>ue(f))),s(t,["contents"],a)}const l=o(e,["config"]);return l!=null&&s(t,["config"],Bl(l)),t}function $l(n){const e={};if(o(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=o(n,["imageBytes"]);t!=null&&s(e,["bytesBase64Encoded"],J(t));const i=o(n,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function Yl(n,e){const t={},i=o(n,["numberOfVideos"]);if(e!==void 0&&i!=null&&s(e,["parameters","sampleCount"],i),o(n,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(o(n,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=o(n,["durationSeconds"]);if(e!==void 0&&r!=null&&s(e,["parameters","durationSeconds"],r),o(n,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const l=o(n,["aspectRatio"]);if(e!==void 0&&l!=null&&s(e,["parameters","aspectRatio"],l),o(n,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const a=o(n,["personGeneration"]);if(e!==void 0&&a!=null&&s(e,["parameters","personGeneration"],a),o(n,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const f=o(n,["negativePrompt"]);e!==void 0&&f!=null&&s(e,["parameters","negativePrompt"],f);const c=o(n,["enhancePrompt"]);if(e!==void 0&&c!=null&&s(e,["parameters","enhancePrompt"],c),o(n,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");if(o(n,["lastFrame"])!==void 0)throw new Error("lastFrame parameter is not supported in Gemini API.");if(o(n,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function Kl(n,e){const t={},i=o(e,["model"]);i!=null&&s(t,["_url","model"],x(n,i));const r=o(e,["prompt"]);r!=null&&s(t,["instances[0]","prompt"],r);const l=o(e,["image"]);if(l!=null&&s(t,["instances[0]","image"],$l(l)),o(e,["video"])!==void 0)throw new Error("video parameter is not supported in Gemini API.");const a=o(e,["config"]);return a!=null&&s(t,["config"],Yl(a,t)),t}function Wl(n){const e={},t=o(n,["fps"]);t!=null&&s(e,["fps"],t);const i=o(n,["endOffset"]);i!=null&&s(e,["endOffset"],i);const r=o(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function zl(n){const e={},t=o(n,["displayName"]);t!=null&&s(e,["displayName"],t);const i=o(n,["data"]);i!=null&&s(e,["data"],i);const r=o(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function bl(n){const e={},t=o(n,["displayName"]);t!=null&&s(e,["displayName"],t);const i=o(n,["fileUri"]);i!=null&&s(e,["fileUri"],i);const r=o(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function Xl(n){const e={},t=o(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],Wl(t));const i=o(n,["thought"]);i!=null&&s(e,["thought"],i);const r=o(n,["inlineData"]);r!=null&&s(e,["inlineData"],zl(r));const l=o(n,["fileData"]);l!=null&&s(e,["fileData"],bl(l));const a=o(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const f=o(n,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);const c=o(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const u=o(n,["functionCall"]);u!=null&&s(e,["functionCall"],u);const d=o(n,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=o(n,["text"]);return p!=null&&s(e,["text"],p),e}function Q(n){const e={},t=o(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>Xl(l))),s(e,["parts"],r)}const i=o(n,["role"]);return i!=null&&s(e,["role"],i),e}function Ql(n){const e={},t=o(n,["anyOf"]);t!=null&&s(e,["anyOf"],t);const i=o(n,["default"]);i!=null&&s(e,["default"],i);const r=o(n,["description"]);r!=null&&s(e,["description"],r);const l=o(n,["enum"]);l!=null&&s(e,["enum"],l);const a=o(n,["example"]);a!=null&&s(e,["example"],a);const f=o(n,["format"]);f!=null&&s(e,["format"],f);const c=o(n,["items"]);c!=null&&s(e,["items"],c);const u=o(n,["maxItems"]);u!=null&&s(e,["maxItems"],u);const d=o(n,["maxLength"]);d!=null&&s(e,["maxLength"],d);const p=o(n,["maxProperties"]);p!=null&&s(e,["maxProperties"],p);const m=o(n,["maximum"]);m!=null&&s(e,["maximum"],m);const g=o(n,["minItems"]);g!=null&&s(e,["minItems"],g);const h=o(n,["minLength"]);h!=null&&s(e,["minLength"],h);const y=o(n,["minProperties"]);y!=null&&s(e,["minProperties"],y);const T=o(n,["minimum"]);T!=null&&s(e,["minimum"],T);const E=o(n,["nullable"]);E!=null&&s(e,["nullable"],E);const v=o(n,["pattern"]);v!=null&&s(e,["pattern"],v);const S=o(n,["properties"]);S!=null&&s(e,["properties"],S);const A=o(n,["propertyOrdering"]);A!=null&&s(e,["propertyOrdering"],A);const I=o(n,["required"]);I!=null&&s(e,["required"],I);const R=o(n,["title"]);R!=null&&s(e,["title"],R);const P=o(n,["type"]);return P!=null&&s(e,["type"],P),e}function Zl(n){const e={},t=o(n,["featureSelectionPreference"]);return t!=null&&s(e,["featureSelectionPreference"],t),e}function Ol(n){const e={},t=o(n,["method"]);t!=null&&s(e,["method"],t);const i=o(n,["category"]);i!=null&&s(e,["category"],i);const r=o(n,["threshold"]);return r!=null&&s(e,["threshold"],r),e}function jl(n){const e={};if(o(n,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=o(n,["description"]);t!=null&&s(e,["description"],t);const i=o(n,["name"]);i!=null&&s(e,["name"],i);const r=o(n,["parameters"]);r!=null&&s(e,["parameters"],r);const l=o(n,["parametersJsonSchema"]);l!=null&&s(e,["parametersJsonSchema"],l);const a=o(n,["response"]);a!=null&&s(e,["response"],a);const f=o(n,["responseJsonSchema"]);return f!=null&&s(e,["responseJsonSchema"],f),e}function ea(n){const e={},t=o(n,["startTime"]);t!=null&&s(e,["startTime"],t);const i=o(n,["endTime"]);return i!=null&&s(e,["endTime"],i),e}function na(n){const e={},t=o(n,["timeRangeFilter"]);return t!=null&&s(e,["timeRangeFilter"],ea(t)),e}function ta(n){const e={},t=o(n,["mode"]);t!=null&&s(e,["mode"],t);const i=o(n,["dynamicThreshold"]);return i!=null&&s(e,["dynamicThreshold"],i),e}function oa(n){const e={},t=o(n,["dynamicRetrievalConfig"]);return t!=null&&s(e,["dynamicRetrievalConfig"],ta(t)),e}function ia(){return{}}function sa(n){const e={},t=o(n,["apiKeyString"]);return t!=null&&s(e,["apiKeyString"],t),e}function ra(n){const e={},t=o(n,["apiKeyConfig"]);t!=null&&s(e,["apiKeyConfig"],sa(t));const i=o(n,["authType"]);i!=null&&s(e,["authType"],i);const r=o(n,["googleServiceAccountConfig"]);r!=null&&s(e,["googleServiceAccountConfig"],r);const l=o(n,["httpBasicAuthConfig"]);l!=null&&s(e,["httpBasicAuthConfig"],l);const a=o(n,["oauthConfig"]);a!=null&&s(e,["oauthConfig"],a);const f=o(n,["oidcConfig"]);return f!=null&&s(e,["oidcConfig"],f),e}function la(n){const e={},t=o(n,["authConfig"]);return t!=null&&s(e,["authConfig"],ra(t)),e}function aa(){return{}}function Tt(n){const e={},t=o(n,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(m=>jl(m))),s(e,["functionDeclarations"],p)}const i=o(n,["retrieval"]);i!=null&&s(e,["retrieval"],i);const r=o(n,["googleSearch"]);r!=null&&s(e,["googleSearch"],na(r));const l=o(n,["googleSearchRetrieval"]);l!=null&&s(e,["googleSearchRetrieval"],oa(l)),o(n,["enterpriseWebSearch"])!=null&&s(e,["enterpriseWebSearch"],ia());const f=o(n,["googleMaps"]);f!=null&&s(e,["googleMaps"],la(f)),o(n,["urlContext"])!=null&&s(e,["urlContext"],aa());const u=o(n,["codeExecution"]);u!=null&&s(e,["codeExecution"],u);const d=o(n,["computerUse"]);return d!=null&&s(e,["computerUse"],d),e}function ua(n){const e={},t=o(n,["mode"]);t!=null&&s(e,["mode"],t);const i=o(n,["allowedFunctionNames"]);return i!=null&&s(e,["allowedFunctionNames"],i),e}function fa(n){const e={},t=o(n,["latitude"]);t!=null&&s(e,["latitude"],t);const i=o(n,["longitude"]);return i!=null&&s(e,["longitude"],i),e}function ca(n){const e={},t=o(n,["latLng"]);t!=null&&s(e,["latLng"],fa(t));const i=o(n,["languageCode"]);return i!=null&&s(e,["languageCode"],i),e}function da(n){const e={},t=o(n,["functionCallingConfig"]);t!=null&&s(e,["functionCallingConfig"],ua(t));const i=o(n,["retrievalConfig"]);return i!=null&&s(e,["retrievalConfig"],ca(i)),e}function pa(n){const e={},t=o(n,["voiceName"]);return t!=null&&s(e,["voiceName"],t),e}function ma(n){const e={},t=o(n,["prebuiltVoiceConfig"]);return t!=null&&s(e,["prebuiltVoiceConfig"],pa(t)),e}function ga(n){const e={},t=o(n,["voiceConfig"]);if(t!=null&&s(e,["voiceConfig"],ma(t)),o(n,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const i=o(n,["languageCode"]);return i!=null&&s(e,["languageCode"],i),e}function ha(n){const e={},t=o(n,["includeThoughts"]);t!=null&&s(e,["includeThoughts"],t);const i=o(n,["thinkingBudget"]);return i!=null&&s(e,["thinkingBudget"],i),e}function ya(n,e,t){const i={},r=o(e,["systemInstruction"]);t!==void 0&&r!=null&&s(t,["systemInstruction"],Q(U(r)));const l=o(e,["temperature"]);l!=null&&s(i,["temperature"],l);const a=o(e,["topP"]);a!=null&&s(i,["topP"],a);const f=o(e,["topK"]);f!=null&&s(i,["topK"],f);const c=o(e,["candidateCount"]);c!=null&&s(i,["candidateCount"],c);const u=o(e,["maxOutputTokens"]);u!=null&&s(i,["maxOutputTokens"],u);const d=o(e,["stopSequences"]);d!=null&&s(i,["stopSequences"],d);const p=o(e,["responseLogprobs"]);p!=null&&s(i,["responseLogprobs"],p);const m=o(e,["logprobs"]);m!=null&&s(i,["logprobs"],m);const g=o(e,["presencePenalty"]);g!=null&&s(i,["presencePenalty"],g);const h=o(e,["frequencyPenalty"]);h!=null&&s(i,["frequencyPenalty"],h);const y=o(e,["seed"]);y!=null&&s(i,["seed"],y);const T=o(e,["responseMimeType"]);T!=null&&s(i,["responseMimeType"],T);const E=o(e,["responseSchema"]);E!=null&&s(i,["responseSchema"],Ql(Ae(E)));const v=o(e,["responseJsonSchema"]);v!=null&&s(i,["responseJsonSchema"],v);const S=o(e,["routingConfig"]);S!=null&&s(i,["routingConfig"],S);const A=o(e,["modelSelectionConfig"]);A!=null&&s(i,["modelConfig"],Zl(A));const I=o(e,["safetySettings"]);if(t!==void 0&&I!=null){let V=I;Array.isArray(V)&&(V=V.map(ce=>Ol(ce))),s(t,["safetySettings"],V)}const R=o(e,["tools"]);if(t!==void 0&&R!=null){let V=b(R);Array.isArray(V)&&(V=V.map(ce=>Tt(z(ce)))),s(t,["tools"],V)}const P=o(e,["toolConfig"]);t!==void 0&&P!=null&&s(t,["toolConfig"],da(P));const k=o(e,["labels"]);t!==void 0&&k!=null&&s(t,["labels"],k);const M=o(e,["cachedContent"]);t!==void 0&&M!=null&&s(t,["cachedContent"],G(n,M));const N=o(e,["responseModalities"]);N!=null&&s(i,["responseModalities"],N);const w=o(e,["mediaResolution"]);w!=null&&s(i,["mediaResolution"],w);const L=o(e,["speechConfig"]);L!=null&&s(i,["speechConfig"],ga(Me(L)));const xe=o(e,["audioTimestamp"]);xe!=null&&s(i,["audioTimestamp"],xe);const we=o(e,["thinkingConfig"]);return we!=null&&s(i,["thinkingConfig"],ha(we)),i}function qn(n,e){const t={},i=o(e,["model"]);i!=null&&s(t,["_url","model"],x(n,i));const r=o(e,["contents"]);if(r!=null){let a=F(r);Array.isArray(a)&&(a=a.map(f=>Q(f))),s(t,["contents"],a)}const l=o(e,["config"]);return l!=null&&s(t,["generationConfig"],ya(n,l,t)),t}function Ta(n,e){const t={},i=o(n,["taskType"]);e!==void 0&&i!=null&&s(e,["instances[]","task_type"],i);const r=o(n,["title"]);e!==void 0&&r!=null&&s(e,["instances[]","title"],r);const l=o(n,["outputDimensionality"]);e!==void 0&&l!=null&&s(e,["parameters","outputDimensionality"],l);const a=o(n,["mimeType"]);e!==void 0&&a!=null&&s(e,["instances[]","mimeType"],a);const f=o(n,["autoTruncate"]);return e!==void 0&&f!=null&&s(e,["parameters","autoTruncate"],f),t}function Ca(n,e){const t={},i=o(e,["model"]);i!=null&&s(t,["_url","model"],x(n,i));const r=o(e,["contents"]);r!=null&&s(t,["instances[]","content"],et(n,r));const l=o(e,["config"]);return l!=null&&s(t,["config"],Ta(l,t)),t}function va(n,e){const t={},i=o(n,["outputGcsUri"]);e!==void 0&&i!=null&&s(e,["parameters","storageUri"],i);const r=o(n,["negativePrompt"]);e!==void 0&&r!=null&&s(e,["parameters","negativePrompt"],r);const l=o(n,["numberOfImages"]);e!==void 0&&l!=null&&s(e,["parameters","sampleCount"],l);const a=o(n,["aspectRatio"]);e!==void 0&&a!=null&&s(e,["parameters","aspectRatio"],a);const f=o(n,["guidanceScale"]);e!==void 0&&f!=null&&s(e,["parameters","guidanceScale"],f);const c=o(n,["seed"]);e!==void 0&&c!=null&&s(e,["parameters","seed"],c);const u=o(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&s(e,["parameters","safetySetting"],u);const d=o(n,["personGeneration"]);e!==void 0&&d!=null&&s(e,["parameters","personGeneration"],d);const p=o(n,["includeSafetyAttributes"]);e!==void 0&&p!=null&&s(e,["parameters","includeSafetyAttributes"],p);const m=o(n,["includeRaiReason"]);e!==void 0&&m!=null&&s(e,["parameters","includeRaiReason"],m);const g=o(n,["language"]);e!==void 0&&g!=null&&s(e,["parameters","language"],g);const h=o(n,["outputMimeType"]);e!==void 0&&h!=null&&s(e,["parameters","outputOptions","mimeType"],h);const y=o(n,["outputCompressionQuality"]);e!==void 0&&y!=null&&s(e,["parameters","outputOptions","compressionQuality"],y);const T=o(n,["addWatermark"]);e!==void 0&&T!=null&&s(e,["parameters","addWatermark"],T);const E=o(n,["imageSize"]);e!==void 0&&E!=null&&s(e,["parameters","sampleImageSize"],E);const v=o(n,["enhancePrompt"]);return e!==void 0&&v!=null&&s(e,["parameters","enhancePrompt"],v),t}function Sa(n,e){const t={},i=o(e,["model"]);i!=null&&s(t,["_url","model"],x(n,i));const r=o(e,["prompt"]);r!=null&&s(t,["instances[0]","prompt"],r);const l=o(e,["config"]);return l!=null&&s(t,["config"],va(l,t)),t}function Z(n){const e={},t=o(n,["gcsUri"]);t!=null&&s(e,["gcsUri"],t);const i=o(n,["imageBytes"]);i!=null&&s(e,["bytesBase64Encoded"],J(i));const r=o(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function Ea(n){const e={},t=o(n,["maskMode"]);t!=null&&s(e,["maskMode"],t);const i=o(n,["segmentationClasses"]);i!=null&&s(e,["maskClasses"],i);const r=o(n,["maskDilation"]);return r!=null&&s(e,["dilation"],r),e}function _a(n){const e={},t=o(n,["controlType"]);t!=null&&s(e,["controlType"],t);const i=o(n,["enableControlImageComputation"]);return i!=null&&s(e,["computeControl"],i),e}function Ia(n){const e={},t=o(n,["styleDescription"]);return t!=null&&s(e,["styleDescription"],t),e}function Aa(n){const e={},t=o(n,["subjectType"]);t!=null&&s(e,["subjectType"],t);const i=o(n,["subjectDescription"]);return i!=null&&s(e,["subjectDescription"],i),e}function Ma(n){const e={},t=o(n,["referenceImage"]);t!=null&&s(e,["referenceImage"],Z(t));const i=o(n,["referenceId"]);i!=null&&s(e,["referenceId"],i);const r=o(n,["referenceType"]);r!=null&&s(e,["referenceType"],r);const l=o(n,["maskImageConfig"]);l!=null&&s(e,["maskImageConfig"],Ea(l));const a=o(n,["controlImageConfig"]);a!=null&&s(e,["controlImageConfig"],_a(a));const f=o(n,["styleImageConfig"]);f!=null&&s(e,["styleImageConfig"],Ia(f));const c=o(n,["subjectImageConfig"]);return c!=null&&s(e,["subjectImageConfig"],Aa(c)),e}function Ra(n,e){const t={},i=o(n,["outputGcsUri"]);e!==void 0&&i!=null&&s(e,["parameters","storageUri"],i);const r=o(n,["negativePrompt"]);e!==void 0&&r!=null&&s(e,["parameters","negativePrompt"],r);const l=o(n,["numberOfImages"]);e!==void 0&&l!=null&&s(e,["parameters","sampleCount"],l);const a=o(n,["aspectRatio"]);e!==void 0&&a!=null&&s(e,["parameters","aspectRatio"],a);const f=o(n,["guidanceScale"]);e!==void 0&&f!=null&&s(e,["parameters","guidanceScale"],f);const c=o(n,["seed"]);e!==void 0&&c!=null&&s(e,["parameters","seed"],c);const u=o(n,["safetyFilterLevel"]);e!==void 0&&u!=null&&s(e,["parameters","safetySetting"],u);const d=o(n,["personGeneration"]);e!==void 0&&d!=null&&s(e,["parameters","personGeneration"],d);const p=o(n,["includeSafetyAttributes"]);e!==void 0&&p!=null&&s(e,["parameters","includeSafetyAttributes"],p);const m=o(n,["includeRaiReason"]);e!==void 0&&m!=null&&s(e,["parameters","includeRaiReason"],m);const g=o(n,["language"]);e!==void 0&&g!=null&&s(e,["parameters","language"],g);const h=o(n,["outputMimeType"]);e!==void 0&&h!=null&&s(e,["parameters","outputOptions","mimeType"],h);const y=o(n,["outputCompressionQuality"]);e!==void 0&&y!=null&&s(e,["parameters","outputOptions","compressionQuality"],y);const T=o(n,["addWatermark"]);e!==void 0&&T!=null&&s(e,["parameters","addWatermark"],T);const E=o(n,["editMode"]);e!==void 0&&E!=null&&s(e,["parameters","editMode"],E);const v=o(n,["baseSteps"]);return e!==void 0&&v!=null&&s(e,["parameters","editConfig","baseSteps"],v),t}function Pa(n,e){const t={},i=o(e,["model"]);i!=null&&s(t,["_url","model"],x(n,i));const r=o(e,["prompt"]);r!=null&&s(t,["instances[0]","prompt"],r);const l=o(e,["referenceImages"]);if(l!=null){let f=l;Array.isArray(f)&&(f=f.map(c=>Ma(c))),s(t,["instances[0]","referenceImages"],f)}const a=o(e,["config"]);return a!=null&&s(t,["config"],Ra(a,t)),t}function xa(n,e){const t={},i=o(n,["includeRaiReason"]);e!==void 0&&i!=null&&s(e,["parameters","includeRaiReason"],i);const r=o(n,["outputMimeType"]);e!==void 0&&r!=null&&s(e,["parameters","outputOptions","mimeType"],r);const l=o(n,["outputCompressionQuality"]);e!==void 0&&l!=null&&s(e,["parameters","outputOptions","compressionQuality"],l);const a=o(n,["enhanceInputImage"]);e!==void 0&&a!=null&&s(e,["parameters","upscaleConfig","enhanceInputImage"],a);const f=o(n,["imagePreservationFactor"]);e!==void 0&&f!=null&&s(e,["parameters","upscaleConfig","imagePreservationFactor"],f);const c=o(n,["numberOfImages"]);e!==void 0&&c!=null&&s(e,["parameters","sampleCount"],c);const u=o(n,["mode"]);return e!==void 0&&u!=null&&s(e,["parameters","mode"],u),t}function wa(n,e){const t={},i=o(e,["model"]);i!=null&&s(t,["_url","model"],x(n,i));const r=o(e,["image"]);r!=null&&s(t,["instances[0]","image"],Z(r));const l=o(e,["upscaleFactor"]);l!=null&&s(t,["parameters","upscaleConfig","upscaleFactor"],l);const a=o(e,["config"]);return a!=null&&s(t,["config"],xa(a,t)),t}function Na(n){const e={},t=o(n,["productImage"]);return t!=null&&s(e,["image"],Z(t)),e}function Da(n,e){const t={},i=o(n,["prompt"]);e!==void 0&&i!=null&&s(e,["instances[0]","prompt"],i);const r=o(n,["personImage"]);e!==void 0&&r!=null&&s(e,["instances[0]","personImage","image"],Z(r));const l=o(n,["productImages"]);if(e!==void 0&&l!=null){let a=l;Array.isArray(a)&&(a=a.map(f=>Na(f))),s(e,["instances[0]","productImages"],a)}return t}function ka(n,e){const t={},i=o(n,["numberOfImages"]);e!==void 0&&i!=null&&s(e,["parameters","sampleCount"],i);const r=o(n,["baseSteps"]);e!==void 0&&r!=null&&s(e,["parameters","editConfig","baseSteps"],r);const l=o(n,["outputGcsUri"]);e!==void 0&&l!=null&&s(e,["parameters","storageUri"],l);const a=o(n,["seed"]);e!==void 0&&a!=null&&s(e,["parameters","seed"],a);const f=o(n,["safetyFilterLevel"]);e!==void 0&&f!=null&&s(e,["parameters","safetySetting"],f);const c=o(n,["personGeneration"]);e!==void 0&&c!=null&&s(e,["parameters","personGeneration"],c);const u=o(n,["outputMimeType"]);e!==void 0&&u!=null&&s(e,["parameters","outputOptions","mimeType"],u);const d=o(n,["outputCompressionQuality"]);e!==void 0&&d!=null&&s(e,["parameters","outputOptions","compressionQuality"],d);const p=o(n,["enhancePrompt"]);return e!==void 0&&p!=null&&s(e,["parameters","enhancePrompt"],p),t}function Ua(n,e){const t={},i=o(e,["model"]);i!=null&&s(t,["_url","model"],x(n,i));const r=o(e,["source"]);r!=null&&s(t,["config"],Da(r,t));const l=o(e,["config"]);return l!=null&&s(t,["config"],ka(l,t)),t}function Fa(n,e){const t={},i=o(e,["model"]);i!=null&&s(t,["_url","name"],x(n,i));const r=o(e,["config"]);return r!=null&&s(t,["config"],r),t}function La(n,e,t){const i={},r=o(e,["pageSize"]);t!==void 0&&r!=null&&s(t,["_query","pageSize"],r);const l=o(e,["pageToken"]);t!==void 0&&l!=null&&s(t,["_query","pageToken"],l);const a=o(e,["filter"]);t!==void 0&&a!=null&&s(t,["_query","filter"],a);const f=o(e,["queryBase"]);return t!==void 0&&f!=null&&s(t,["_url","models_url"],ot(n,f)),i}function Va(n,e){const t={},i=o(e,["config"]);return i!=null&&s(t,["config"],La(n,i,t)),t}function Ga(n,e){const t={},i=o(n,["displayName"]);e!==void 0&&i!=null&&s(e,["displayName"],i);const r=o(n,["description"]);e!==void 0&&r!=null&&s(e,["description"],r);const l=o(n,["defaultCheckpointId"]);return e!==void 0&&l!=null&&s(e,["defaultCheckpointId"],l),t}function qa(n,e){const t={},i=o(e,["model"]);i!=null&&s(t,["_url","model"],x(n,i));const r=o(e,["config"]);return r!=null&&s(t,["config"],Ga(r,t)),t}function Ha(n,e){const t={},i=o(e,["model"]);i!=null&&s(t,["_url","name"],x(n,i));const r=o(e,["config"]);return r!=null&&s(t,["config"],r),t}function Ba(n,e){const t={},i=o(n,["systemInstruction"]);e!==void 0&&i!=null&&s(e,["systemInstruction"],Q(U(i)));const r=o(n,["tools"]);if(e!==void 0&&r!=null){let a=r;Array.isArray(a)&&(a=a.map(f=>Tt(f))),s(e,["tools"],a)}const l=o(n,["generationConfig"]);return e!==void 0&&l!=null&&s(e,["generationConfig"],l),t}function Ja(n,e){const t={},i=o(e,["model"]);i!=null&&s(t,["_url","model"],x(n,i));const r=o(e,["contents"]);if(r!=null){let a=F(r);Array.isArray(a)&&(a=a.map(f=>Q(f))),s(t,["contents"],a)}const l=o(e,["config"]);return l!=null&&s(t,["config"],Ba(l,t)),t}function $a(n,e){const t={},i=o(e,["model"]);i!=null&&s(t,["_url","model"],x(n,i));const r=o(e,["contents"]);if(r!=null){let a=F(r);Array.isArray(a)&&(a=a.map(f=>Q(f))),s(t,["contents"],a)}const l=o(e,["config"]);return l!=null&&s(t,["config"],l),t}function Ya(n){const e={},t=o(n,["uri"]);t!=null&&s(e,["gcsUri"],t);const i=o(n,["videoBytes"]);i!=null&&s(e,["bytesBase64Encoded"],J(i));const r=o(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function Ka(n,e){const t={},i=o(n,["numberOfVideos"]);e!==void 0&&i!=null&&s(e,["parameters","sampleCount"],i);const r=o(n,["outputGcsUri"]);e!==void 0&&r!=null&&s(e,["parameters","storageUri"],r);const l=o(n,["fps"]);e!==void 0&&l!=null&&s(e,["parameters","fps"],l);const a=o(n,["durationSeconds"]);e!==void 0&&a!=null&&s(e,["parameters","durationSeconds"],a);const f=o(n,["seed"]);e!==void 0&&f!=null&&s(e,["parameters","seed"],f);const c=o(n,["aspectRatio"]);e!==void 0&&c!=null&&s(e,["parameters","aspectRatio"],c);const u=o(n,["resolution"]);e!==void 0&&u!=null&&s(e,["parameters","resolution"],u);const d=o(n,["personGeneration"]);e!==void 0&&d!=null&&s(e,["parameters","personGeneration"],d);const p=o(n,["pubsubTopic"]);e!==void 0&&p!=null&&s(e,["parameters","pubsubTopic"],p);const m=o(n,["negativePrompt"]);e!==void 0&&m!=null&&s(e,["parameters","negativePrompt"],m);const g=o(n,["enhancePrompt"]);e!==void 0&&g!=null&&s(e,["parameters","enhancePrompt"],g);const h=o(n,["generateAudio"]);e!==void 0&&h!=null&&s(e,["parameters","generateAudio"],h);const y=o(n,["lastFrame"]);e!==void 0&&y!=null&&s(e,["instances[0]","lastFrame"],Z(y));const T=o(n,["compressionQuality"]);return e!==void 0&&T!=null&&s(e,["parameters","compressionQuality"],T),t}function Wa(n,e){const t={},i=o(e,["model"]);i!=null&&s(t,["_url","model"],x(n,i));const r=o(e,["prompt"]);r!=null&&s(t,["instances[0]","prompt"],r);const l=o(e,["image"]);l!=null&&s(t,["instances[0]","image"],Z(l));const a=o(e,["video"]);a!=null&&s(t,["instances[0]","video"],Ya(a));const f=o(e,["config"]);return f!=null&&s(t,["config"],Ka(f,t)),t}function za(n){const e={},t=o(n,["fps"]);t!=null&&s(e,["fps"],t);const i=o(n,["endOffset"]);i!=null&&s(e,["endOffset"],i);const r=o(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function ba(n){const e={},t=o(n,["data"]);t!=null&&s(e,["data"],t);const i=o(n,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function Xa(n){const e={},t=o(n,["fileUri"]);t!=null&&s(e,["fileUri"],t);const i=o(n,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function Qa(n){const e={},t=o(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],za(t));const i=o(n,["thought"]);i!=null&&s(e,["thought"],i);const r=o(n,["inlineData"]);r!=null&&s(e,["inlineData"],ba(r));const l=o(n,["fileData"]);l!=null&&s(e,["fileData"],Xa(l));const a=o(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const f=o(n,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);const c=o(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const u=o(n,["functionCall"]);u!=null&&s(e,["functionCall"],u);const d=o(n,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=o(n,["text"]);return p!=null&&s(e,["text"],p),e}function Za(n){const e={},t=o(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>Qa(l))),s(e,["parts"],r)}const i=o(n,["role"]);return i!=null&&s(e,["role"],i),e}function Oa(n){const e={},t=o(n,["citationSources"]);return t!=null&&s(e,["citations"],t),e}function ja(n){const e={},t=o(n,["retrievedUrl"]);t!=null&&s(e,["retrievedUrl"],t);const i=o(n,["urlRetrievalStatus"]);return i!=null&&s(e,["urlRetrievalStatus"],i),e}function eu(n){const e={},t=o(n,["urlMetadata"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>ja(r))),s(e,["urlMetadata"],i)}return e}function nu(n){const e={},t=o(n,["content"]);t!=null&&s(e,["content"],Za(t));const i=o(n,["citationMetadata"]);i!=null&&s(e,["citationMetadata"],Oa(i));const r=o(n,["tokenCount"]);r!=null&&s(e,["tokenCount"],r);const l=o(n,["finishReason"]);l!=null&&s(e,["finishReason"],l);const a=o(n,["urlContextMetadata"]);a!=null&&s(e,["urlContextMetadata"],eu(a));const f=o(n,["avgLogprobs"]);f!=null&&s(e,["avgLogprobs"],f);const c=o(n,["groundingMetadata"]);c!=null&&s(e,["groundingMetadata"],c);const u=o(n,["index"]);u!=null&&s(e,["index"],u);const d=o(n,["logprobsResult"]);d!=null&&s(e,["logprobsResult"],d);const p=o(n,["safetyRatings"]);return p!=null&&s(e,["safetyRatings"],p),e}function Hn(n){const e={},t=o(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const i=o(n,["candidates"]);if(i!=null){let c=i;Array.isArray(c)&&(c=c.map(u=>nu(u))),s(e,["candidates"],c)}const r=o(n,["modelVersion"]);r!=null&&s(e,["modelVersion"],r);const l=o(n,["promptFeedback"]);l!=null&&s(e,["promptFeedback"],l);const a=o(n,["responseId"]);a!=null&&s(e,["responseId"],a);const f=o(n,["usageMetadata"]);return f!=null&&s(e,["usageMetadata"],f),e}function tu(n){const e={},t=o(n,["values"]);return t!=null&&s(e,["values"],t),e}function ou(){return{}}function iu(n){const e={},t=o(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const i=o(n,["embeddings"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(a=>tu(a))),s(e,["embeddings"],l)}return o(n,["metadata"])!=null&&s(e,["metadata"],ou()),e}function su(n){const e={},t=o(n,["bytesBase64Encoded"]);t!=null&&s(e,["imageBytes"],J(t));const i=o(n,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function Ct(n){const e={},t=o(n,["safetyAttributes","categories"]);t!=null&&s(e,["categories"],t);const i=o(n,["safetyAttributes","scores"]);i!=null&&s(e,["scores"],i);const r=o(n,["contentType"]);return r!=null&&s(e,["contentType"],r),e}function ru(n){const e={},t=o(n,["_self"]);t!=null&&s(e,["image"],su(t));const i=o(n,["raiFilteredReason"]);i!=null&&s(e,["raiFilteredReason"],i);const r=o(n,["_self"]);return r!=null&&s(e,["safetyAttributes"],Ct(r)),e}function lu(n){const e={},t=o(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const i=o(n,["predictions"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(a=>ru(a))),s(e,["generatedImages"],l)}const r=o(n,["positivePromptSafetyAttributes"]);return r!=null&&s(e,["positivePromptSafetyAttributes"],Ct(r)),e}function au(n){const e={},t=o(n,["baseModel"]);t!=null&&s(e,["baseModel"],t);const i=o(n,["createTime"]);i!=null&&s(e,["createTime"],i);const r=o(n,["updateTime"]);return r!=null&&s(e,["updateTime"],r),e}function Se(n){const e={},t=o(n,["name"]);t!=null&&s(e,["name"],t);const i=o(n,["displayName"]);i!=null&&s(e,["displayName"],i);const r=o(n,["description"]);r!=null&&s(e,["description"],r);const l=o(n,["version"]);l!=null&&s(e,["version"],l);const a=o(n,["_self"]);a!=null&&s(e,["tunedModelInfo"],au(a));const f=o(n,["inputTokenLimit"]);f!=null&&s(e,["inputTokenLimit"],f);const c=o(n,["outputTokenLimit"]);c!=null&&s(e,["outputTokenLimit"],c);const u=o(n,["supportedGenerationMethods"]);return u!=null&&s(e,["supportedActions"],u),e}function uu(n){const e={},t=o(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const i=o(n,["nextPageToken"]);i!=null&&s(e,["nextPageToken"],i);const r=o(n,["_self"]);if(r!=null){let l=it(r);Array.isArray(l)&&(l=l.map(a=>Se(a))),s(e,["models"],l)}return e}function fu(){return{}}function cu(n){const e={},t=o(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const i=o(n,["totalTokens"]);i!=null&&s(e,["totalTokens"],i);const r=o(n,["cachedContentTokenCount"]);return r!=null&&s(e,["cachedContentTokenCount"],r),e}function du(n){const e={},t=o(n,["video","uri"]);t!=null&&s(e,["uri"],t);const i=o(n,["video","encodedVideo"]);i!=null&&s(e,["videoBytes"],J(i));const r=o(n,["encoding"]);return r!=null&&s(e,["mimeType"],r),e}function pu(n){const e={},t=o(n,["_self"]);return t!=null&&s(e,["video"],du(t)),e}function mu(n){const e={},t=o(n,["generatedSamples"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(a=>pu(a))),s(e,["generatedVideos"],l)}const i=o(n,["raiMediaFilteredCount"]);i!=null&&s(e,["raiMediaFilteredCount"],i);const r=o(n,["raiMediaFilteredReasons"]);return r!=null&&s(e,["raiMediaFilteredReasons"],r),e}function gu(n){const e={},t=o(n,["name"]);t!=null&&s(e,["name"],t);const i=o(n,["metadata"]);i!=null&&s(e,["metadata"],i);const r=o(n,["done"]);r!=null&&s(e,["done"],r);const l=o(n,["error"]);l!=null&&s(e,["error"],l);const a=o(n,["response","generateVideoResponse"]);return a!=null&&s(e,["response"],mu(a)),e}function hu(n){const e={},t=o(n,["fps"]);t!=null&&s(e,["fps"],t);const i=o(n,["endOffset"]);i!=null&&s(e,["endOffset"],i);const r=o(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function yu(n){const e={},t=o(n,["displayName"]);t!=null&&s(e,["displayName"],t);const i=o(n,["data"]);i!=null&&s(e,["data"],i);const r=o(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function Tu(n){const e={},t=o(n,["displayName"]);t!=null&&s(e,["displayName"],t);const i=o(n,["fileUri"]);i!=null&&s(e,["fileUri"],i);const r=o(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function Cu(n){const e={},t=o(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],hu(t));const i=o(n,["thought"]);i!=null&&s(e,["thought"],i);const r=o(n,["inlineData"]);r!=null&&s(e,["inlineData"],yu(r));const l=o(n,["fileData"]);l!=null&&s(e,["fileData"],Tu(l));const a=o(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const f=o(n,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);const c=o(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const u=o(n,["functionCall"]);u!=null&&s(e,["functionCall"],u);const d=o(n,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=o(n,["text"]);return p!=null&&s(e,["text"],p),e}function vu(n){const e={},t=o(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>Cu(l))),s(e,["parts"],r)}const i=o(n,["role"]);return i!=null&&s(e,["role"],i),e}function Su(n){const e={},t=o(n,["citations"]);return t!=null&&s(e,["citations"],t),e}function Eu(n){const e={},t=o(n,["retrievedUrl"]);t!=null&&s(e,["retrievedUrl"],t);const i=o(n,["urlRetrievalStatus"]);return i!=null&&s(e,["urlRetrievalStatus"],i),e}function _u(n){const e={},t=o(n,["urlMetadata"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>Eu(r))),s(e,["urlMetadata"],i)}return e}function Iu(n){const e={},t=o(n,["content"]);t!=null&&s(e,["content"],vu(t));const i=o(n,["citationMetadata"]);i!=null&&s(e,["citationMetadata"],Su(i));const r=o(n,["finishMessage"]);r!=null&&s(e,["finishMessage"],r);const l=o(n,["finishReason"]);l!=null&&s(e,["finishReason"],l);const a=o(n,["urlContextMetadata"]);a!=null&&s(e,["urlContextMetadata"],_u(a));const f=o(n,["avgLogprobs"]);f!=null&&s(e,["avgLogprobs"],f);const c=o(n,["groundingMetadata"]);c!=null&&s(e,["groundingMetadata"],c);const u=o(n,["index"]);u!=null&&s(e,["index"],u);const d=o(n,["logprobsResult"]);d!=null&&s(e,["logprobsResult"],d);const p=o(n,["safetyRatings"]);return p!=null&&s(e,["safetyRatings"],p),e}function Bn(n){const e={},t=o(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const i=o(n,["candidates"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(d=>Iu(d))),s(e,["candidates"],u)}const r=o(n,["createTime"]);r!=null&&s(e,["createTime"],r);const l=o(n,["modelVersion"]);l!=null&&s(e,["modelVersion"],l);const a=o(n,["promptFeedback"]);a!=null&&s(e,["promptFeedback"],a);const f=o(n,["responseId"]);f!=null&&s(e,["responseId"],f);const c=o(n,["usageMetadata"]);return c!=null&&s(e,["usageMetadata"],c),e}function Au(n){const e={},t=o(n,["truncated"]);t!=null&&s(e,["truncated"],t);const i=o(n,["token_count"]);return i!=null&&s(e,["tokenCount"],i),e}function Mu(n){const e={},t=o(n,["values"]);t!=null&&s(e,["values"],t);const i=o(n,["statistics"]);return i!=null&&s(e,["statistics"],Au(i)),e}function Ru(n){const e={},t=o(n,["billableCharacterCount"]);return t!=null&&s(e,["billableCharacterCount"],t),e}function Pu(n){const e={},t=o(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const i=o(n,["predictions[]","embeddings"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(a=>Mu(a))),s(e,["embeddings"],l)}const r=o(n,["metadata"]);return r!=null&&s(e,["metadata"],Ru(r)),e}function xu(n){const e={},t=o(n,["gcsUri"]);t!=null&&s(e,["gcsUri"],t);const i=o(n,["bytesBase64Encoded"]);i!=null&&s(e,["imageBytes"],J(i));const r=o(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function vt(n){const e={},t=o(n,["safetyAttributes","categories"]);t!=null&&s(e,["categories"],t);const i=o(n,["safetyAttributes","scores"]);i!=null&&s(e,["scores"],i);const r=o(n,["contentType"]);return r!=null&&s(e,["contentType"],r),e}function fe(n){const e={},t=o(n,["_self"]);t!=null&&s(e,["image"],xu(t));const i=o(n,["raiFilteredReason"]);i!=null&&s(e,["raiFilteredReason"],i);const r=o(n,["_self"]);r!=null&&s(e,["safetyAttributes"],vt(r));const l=o(n,["prompt"]);return l!=null&&s(e,["enhancedPrompt"],l),e}function wu(n){const e={},t=o(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const i=o(n,["predictions"]);if(i!=null){let l=i;Array.isArray(l)&&(l=l.map(a=>fe(a))),s(e,["generatedImages"],l)}const r=o(n,["positivePromptSafetyAttributes"]);return r!=null&&s(e,["positivePromptSafetyAttributes"],vt(r)),e}function Nu(n){const e={},t=o(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const i=o(n,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>fe(l))),s(e,["generatedImages"],r)}return e}function Du(n){const e={},t=o(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const i=o(n,["predictions"]);if(i!=null){let r=i;Array.isArray(r)&&(r=r.map(l=>fe(l))),s(e,["generatedImages"],r)}return e}function ku(n){const e={},t=o(n,["predictions"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>fe(r))),s(e,["generatedImages"],i)}return e}function Uu(n){const e={},t=o(n,["endpoint"]);t!=null&&s(e,["name"],t);const i=o(n,["deployedModelId"]);return i!=null&&s(e,["deployedModelId"],i),e}function Fu(n){const e={},t=o(n,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&s(e,["baseModel"],t);const i=o(n,["createTime"]);i!=null&&s(e,["createTime"],i);const r=o(n,["updateTime"]);return r!=null&&s(e,["updateTime"],r),e}function Lu(n){const e={},t=o(n,["checkpointId"]);t!=null&&s(e,["checkpointId"],t);const i=o(n,["epoch"]);i!=null&&s(e,["epoch"],i);const r=o(n,["step"]);return r!=null&&s(e,["step"],r),e}function Ee(n){const e={},t=o(n,["name"]);t!=null&&s(e,["name"],t);const i=o(n,["displayName"]);i!=null&&s(e,["displayName"],i);const r=o(n,["description"]);r!=null&&s(e,["description"],r);const l=o(n,["versionId"]);l!=null&&s(e,["version"],l);const a=o(n,["deployedModels"]);if(a!=null){let p=a;Array.isArray(p)&&(p=p.map(m=>Uu(m))),s(e,["endpoints"],p)}const f=o(n,["labels"]);f!=null&&s(e,["labels"],f);const c=o(n,["_self"]);c!=null&&s(e,["tunedModelInfo"],Fu(c));const u=o(n,["defaultCheckpointId"]);u!=null&&s(e,["defaultCheckpointId"],u);const d=o(n,["checkpoints"]);if(d!=null){let p=d;Array.isArray(p)&&(p=p.map(m=>Lu(m))),s(e,["checkpoints"],p)}return e}function Vu(n){const e={},t=o(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const i=o(n,["nextPageToken"]);i!=null&&s(e,["nextPageToken"],i);const r=o(n,["_self"]);if(r!=null){let l=it(r);Array.isArray(l)&&(l=l.map(a=>Ee(a))),s(e,["models"],l)}return e}function Gu(){return{}}function qu(n){const e={},t=o(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const i=o(n,["totalTokens"]);return i!=null&&s(e,["totalTokens"],i),e}function Hu(n){const e={},t=o(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const i=o(n,["tokensInfo"]);return i!=null&&s(e,["tokensInfo"],i),e}function Bu(n){const e={},t=o(n,["gcsUri"]);t!=null&&s(e,["uri"],t);const i=o(n,["bytesBase64Encoded"]);i!=null&&s(e,["videoBytes"],J(i));const r=o(n,["mimeType"]);return r!=null&&s(e,["mimeType"],r),e}function Ju(n){const e={},t=o(n,["_self"]);return t!=null&&s(e,["video"],Bu(t)),e}function $u(n){const e={},t=o(n,["videos"]);if(t!=null){let l=t;Array.isArray(l)&&(l=l.map(a=>Ju(a))),s(e,["generatedVideos"],l)}const i=o(n,["raiMediaFilteredCount"]);i!=null&&s(e,["raiMediaFilteredCount"],i);const r=o(n,["raiMediaFilteredReasons"]);return r!=null&&s(e,["raiMediaFilteredReasons"],r),e}function Yu(n){const e={},t=o(n,["name"]);t!=null&&s(e,["name"],t);const i=o(n,["metadata"]);i!=null&&s(e,["metadata"],i);const r=o(n,["done"]);r!=null&&s(e,["done"],r);const l=o(n,["error"]);l!=null&&s(e,["error"],l);const a=o(n,["response"]);return a!=null&&s(e,["response"],$u(a)),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ku="Content-Type",Wu="X-Server-Timeout",zu="User-Agent",_e="x-goog-api-client",bu="1.13.0",Xu=`google-genai-sdk/${bu}`,Qu="v1beta1",Zu="v1beta",Jn=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class Ou{constructor(e){var t,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:Qu,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:Zu,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,i){const r=[this.getRequestUrlInternal(t)];return i&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,i);if(e.queryParams)for(const[a,f]of Object.entries(e.queryParams))r.searchParams.append(a,String(f));let l={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else l.body=e.body;return l=await this.includeExtraHttpOptionsToRequestInit(l,t,e.abortSignal),this.unaryApiCall(r,l,e.httpMethod)}patchHttpOptions(e,t){const i=JSON.parse(JSON.stringify(e));for(const[r,l]of Object.entries(t))typeof l=="object"?i[r]=Object.assign(Object.assign({},i[r]),l):l!==void 0&&(i[r]=l);return i}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,t,i);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let l={};return l.body=e.body,l=await this.includeExtraHttpOptionsToRequestInit(l,t,e.abortSignal),this.streamApiCall(r,l,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,i){if(t&&t.timeout||i){const r=new AbortController,l=r.signal;if(t.timeout&&t?.timeout>0){const a=setTimeout(()=>r.abort(),t.timeout);a&&typeof a.unref=="function"&&a.unref()}i&&i.addEventListener("abort",()=>{r.abort()}),e.signal=l}return t&&t.extraBody!==null&&ju(e,t.extraBody),e.headers=await this.getHeadersInternal(t),e}async unaryApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async r=>(await $n(r),new ge(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async r=>(await $n(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){var t;return K(this,arguments,function*(){const r=(t=e?.body)===null||t===void 0?void 0:t.getReader(),l=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let a="";for(;;){const{done:f,value:c}=yield D(r.read());if(f){if(a.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const u=l.decode(c,{stream:!0});try{const p=JSON.parse(u);if("error"in p){const m=JSON.parse(JSON.stringify(p.error)),g=m.status,h=m.code,y=`got status: ${g}. ${JSON.stringify(p)}`;if(h>=400&&h<600)throw new ae({message:y,status:h})}}catch(p){if(p.name==="ApiError")throw p}a+=u;let d=a.match(Jn);for(;d;){const p=d[1];try{const m=new Response(p,{headers:e?.headers,status:e?.status,statusText:e?.statusText});yield yield D(new ge(m)),a=a.slice(d[0].length),d=a.match(Jn)}catch(m){throw new Error(`exception parsing stream chunk ${p}. ${m}`)}}}}finally{r.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},t=Xu+" "+this.clientOptions.userAgentExtra;return e[zu]=t,e[_e]=t,e[Ku]="application/json",e}async getHeadersInternal(e){const t=new Headers;if(e&&e.headers){for(const[i,r]of Object.entries(e.headers))t.append(i,r);e.timeout&&e.timeout>0&&t.append(Wu,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(t),t}async uploadFile(e,t){var i;const r={};t!=null&&(r.mimeType=t.mimeType,r.name=t.name,r.displayName=t.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const l=this.clientOptions.uploader,a=await l.stat(e);r.sizeBytes=String(a.size);const f=(i=t?.mimeType)!==null&&i!==void 0?i:a.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=f;const c=await this.fetchUploadUrl(r,t);return l.upload(e,c,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t){var i;let r={};t?.httpOptions?r=t.httpOptions:r={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const l={file:e},a=await this.request({path:C("upload/v1beta/files",l._url),body:JSON.stringify(l),httpMethod:"POST",httpOptions:r});if(!a||!a?.headers)throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const f=(i=a?.headers)===null||i===void 0?void 0:i["x-goog-upload-url"];if(f===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return f}}async function $n(n){var e;if(n===void 0)throw new Error("response is undefined");if(!n.ok){const t=n.status;let i;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?i=await n.json():i={error:{message:await n.text(),code:n.status,status:n.statusText}};const r=JSON.stringify(i);throw t>=400&&t<600?new ae({message:r,status:t}):new Error(r)}}function ju(n,e){if(!e||Object.keys(e).length===0)return;if(n.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof n.body=="string"&&n.body.length>0)try{const l=JSON.parse(n.body);if(typeof l=="object"&&l!==null&&!Array.isArray(l))t=l;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function i(l,a){const f=Object.assign({},l);for(const c in a)if(Object.prototype.hasOwnProperty.call(a,c)){const u=a[c],d=f[c];u&&typeof u=="object"&&!Array.isArray(u)&&d&&typeof d=="object"&&!Array.isArray(d)?f[c]=i(d,u):(d&&u&&typeof d!=typeof u&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof d}, New type: ${typeof u}. Overwriting.`),f[c]=u)}return f}const r=i(t,e);n.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ef="mcp_used/unknown";let nf=!1;function St(n){for(const e of n)if(tf(e)||typeof e=="object"&&"inputSchema"in e)return!0;return nf}function Et(n){var e;const t=(e=n[_e])!==null&&e!==void 0?e:"";n[_e]=(t+` ${ef}`).trimStart()}function tf(n){return n!==null&&typeof n=="object"&&n instanceof Pe}function of(n,e=100){return K(this,arguments,function*(){let i,r=0;for(;r<e;){const l=yield D(n.listTools({cursor:i}));for(const a of l.tools)yield yield D(a),r++;if(!l.nextCursor)break;i=l.nextCursor}})}class Pe{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new Pe(e,t)}async initialize(){var e,t,i,r;if(this.mcpTools.length>0)return;const l={},a=[];for(const d of this.mcpClients)try{for(var f=!0,c=(t=void 0,j(of(d))),u;u=await c.next(),e=u.done,!e;f=!0){r=u.value,f=!1;const p=r;a.push(p);const m=p.name;if(l[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);l[m]=d}}catch(p){t={error:p}}finally{try{!f&&!e&&(i=c.return)&&await i.call(c)}finally{if(t)throw t.error}}this.mcpTools=a,this.functionNameToMcpClient=l}async tool(){return await this.initialize(),Wt(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const i of e)if(i.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[i.name];let l;this.config.timeout&&(l={timeout:this.config.timeout});const a=await r.callTool({name:i.name,arguments:i.args},void 0,l);t.push({functionResponse:{name:i.name,response:a.isError?{error:a}:a}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function sf(n,e,t){const i=new Gt;let r;t.data instanceof Blob?r=JSON.parse(await t.data.text()):r=JSON.parse(t.data);const l=zr(r);Object.assign(i,l),e(i)}class rf{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i}async connect(e){var t,i;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),l=this.apiClient.getApiVersion(),a=uf(this.apiClient.getDefaultHeaders()),f=this.apiClient.getApiKey(),c=`${r}/ws/google.ai.generativelanguage.${l}.GenerativeService.BidiGenerateMusic?key=${f}`;let u=()=>{};const d=new Promise(S=>{u=S}),p=e.callbacks,m=function(){u({})},g=this.apiClient,h={onopen:m,onmessage:S=>{sf(g,p.onmessage,S)},onerror:(t=p?.onerror)!==null&&t!==void 0?t:function(S){},onclose:(i=p?.onclose)!==null&&i!==void 0?i:function(S){}},y=this.webSocketFactory.create(c,af(a),h);y.connect(),await d;const T=x(this.apiClient,e.model),E=gt({model:T}),v=ve({setup:E});return y.send(JSON.stringify(v)),new lf(y,this.apiClient)}}class lf{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=Ks(e),i=ht(t);this.conn.send(JSON.stringify({clientContent:i}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=Ws(e),i=ve(t);this.conn.send(JSON.stringify(i))}sendPlaybackControl(e){const t=ve({playbackControl:e});this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl($.PLAY)}pause(){this.sendPlaybackControl($.PAUSE)}stop(){this.sendPlaybackControl($.STOP)}resetContext(){this.sendPlaybackControl($.RESET_CONTEXT)}close(){this.conn.close()}}function af(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function uf(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ff="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function cf(n,e,t){const i=new Vt;let r;t.data instanceof Blob?r=await t.data.text():t.data instanceof ArrayBuffer?r=new TextDecoder().decode(t.data):r=t.data;const l=JSON.parse(r);if(n.isVertexAI()){const a=ll(l);Object.assign(i,a)}else{const a=Gr(l);Object.assign(i,a)}e(i)}class df{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i,this.music=new rf(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,i,r,l,a,f;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const c=this.apiClient.getWebsocketBaseUrl(),u=this.apiClient.getApiVersion();let d;const p=this.apiClient.getHeaders();e.config&&e.config.tools&&St(e.config.tools)&&Et(p);const m=hf(p);if(this.apiClient.isVertexAI())d=`${c}/ws/google.cloud.aiplatform.${u}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m);else{const M=this.apiClient.getApiKey();let N="BidiGenerateContent",w="key";M?.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),u!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),N="BidiGenerateContentConstrained",w="access_token"),d=`${c}/ws/google.ai.generativelanguage.${u}.GenerativeService.${N}?${w}=${M}`}let g=()=>{};const h=new Promise(M=>{g=M}),y=e.callbacks,T=function(){var M;(M=y?.onopen)===null||M===void 0||M.call(y),g({})},E=this.apiClient,v={onopen:T,onmessage:M=>{cf(E,y.onmessage,M)},onerror:(t=y?.onerror)!==null&&t!==void 0?t:function(M){},onclose:(i=y?.onclose)!==null&&i!==void 0?i:function(M){}},S=this.webSocketFactory.create(d,gf(m),v);S.connect(),await h;let A=x(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&A.startsWith("publishers/")){const M=this.apiClient.getProject(),N=this.apiClient.getLocation();A=`projects/${M}/locations/${N}/`+A}let I={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[se.AUDIO]}:e.config.responseModalities=[se.AUDIO]),!((l=e.config)===null||l===void 0)&&l.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const R=(f=(a=e.config)===null||a===void 0?void 0:a.tools)!==null&&f!==void 0?f:[],P=[];for(const M of R)if(this.isCallableTool(M)){const N=M;P.push(await N.tool())}else P.push(M);P.length>0&&(e.config.tools=P);const k={model:A,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?I=Cr(this.apiClient,k):I=Bs(this.apiClient,k),delete I.config,S.send(JSON.stringify(I)),new mf(S,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const pf={turnComplete:!0};class mf{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let i=[];try{i=F(t.turns),e.isVertexAI()?i=i.map(r=>Q(r)):i=i.map(r=>ue(r))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:i,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let i=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?i=t.functionResponses:i=[t.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const l of i){if(typeof l!="object"||l===null||!("name"in l)||!("response"in l))throw new Error(`Could not parse function response, type '${typeof l}'.`);if(!e.isVertexAI()&&!("id"in l))throw new Error(ff)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},pf),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:Er(e)}:t={realtimeInput:Ys(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function gf(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function hf(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Yn=10;function Kn(n){var e,t,i;if(!((e=n?.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const a of(t=n?.tools)!==null&&t!==void 0?t:[])if(W(a)){r=!0;break}if(!r)return!0;const l=(i=n?.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls;return l&&(l<0||!Number.isInteger(l))||l==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",l),!0):!1}function W(n){return"callTool"in n&&typeof n.callTool=="function"}function yf(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>W(r)))!==null&&i!==void 0?i:!1}function Tf(n){var e,t,i;return(i=(t=(e=n.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(r=>!W(r)))!==null&&i!==void 0?i:!1}function Wn(n){var e;return!(!((e=n?.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Cf extends B{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var i,r,l,a,f;const c=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!yf(t)||Kn(t.config))return await this.generateContentInternal(c);if(Tf(t))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let u,d;const p=F(c.contents),m=(l=(r=(i=c.config)===null||i===void 0?void 0:i.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&l!==void 0?l:Yn;let g=0;for(;g<m&&(u=await this.generateContentInternal(c),!(!u.functionCalls||u.functionCalls.length===0));){const h=u.candidates[0].content,y=[];for(const T of(f=(a=t.config)===null||a===void 0?void 0:a.tools)!==null&&f!==void 0?f:[])if(W(T)){const v=await T.callTool(u.functionCalls);y.push(...v)}g++,d={role:"user",parts:y},c.contents=F(c.contents),c.contents.push(h),c.contents.push(d),Wn(c.config)&&(p.push(h),p.push(d))}return Wn(c.config)&&(u.automaticFunctionCallingHistory=p),u},this.generateContentStream=async t=>{if(this.maybeMoveToResponseJsonSchem(t),Kn(t.config)){const i=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(i)}else return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(i=>{var r;let l;const a=[];if(i?.generatedImages)for(const c of i.generatedImages)c&&c?.safetyAttributes&&((r=c?.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?l=c?.safetyAttributes:a.push(c);let f;return l?f={generatedImages:a,positivePromptSafetyAttributes:l,sdkHttpResponse:i.sdkHttpResponse}:f={generatedImages:a,sdkHttpResponse:i.sdkHttpResponse},f}),this.list=async t=>{var i;const a={config:Object.assign(Object.assign({},{queryBase:!0}),t?.config)};if(this.apiClient.isVertexAI()&&!a.config.queryBase){if(!((i=a.config)===null||i===void 0)&&i.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");a.config.filter="labels.tune-type:*"}return new ee(H.PAGED_ITEM_MODELS,f=>this.listInternal(f),await this.listInternal(a),a)},this.editImage=async t=>{const i={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(i.referenceImages=t.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(i)},this.upscaleImage=async t=>{let i={numberOfImages:1,mode:"upscale"};t.config&&(i=Object.assign(Object.assign({},i),t.config));const r={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:i};return await this.upscaleImageInternal(r)},this.generateVideos=async t=>await this.generateVideosInternal(t)}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,i,r;const l=(t=e.config)===null||t===void 0?void 0:t.tools;if(!l)return e;const a=await Promise.all(l.map(async c=>W(c)?await c.tool():c)),f={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:a})};if(f.config.tools=a,e.config&&e.config.tools&&St(e.config.tools)){const c=(r=(i=e.config.httpOptions)===null||i===void 0?void 0:i.headers)!==null&&r!==void 0?r:{};let u=Object.assign({},c);Object.keys(u).length===0&&(u=this.apiClient.getDefaultHeaders()),Et(u),f.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:u})}return f}async initAfcToolsMap(e){var t,i,r;const l=new Map;for(const a of(i=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&i!==void 0?i:[])if(W(a)){const f=a,c=await f.tool();for(const u of(r=c.functionDeclarations)!==null&&r!==void 0?r:[]){if(!u.name)throw new Error("Function declaration name is required.");if(l.has(u.name))throw new Error(`Duplicate tool declaration name: ${u.name}`);l.set(u.name,f)}}return l}async processAfcStream(e){var t,i,r;const l=(r=(i=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&r!==void 0?r:Yn;let a=!1,f=0;const c=await this.initAfcToolsMap(e);return function(u,d,p){var m,g;return K(this,arguments,function*(){for(var h,y,T,E;f<l;){a&&(f++,a=!1);const I=yield D(u.processParamsMaybeAddMcpUsage(p)),R=yield D(u.generateContentStreamInternal(I)),P=[],k=[];try{for(var v=!0,S=(y=void 0,j(R)),A;A=yield D(S.next()),h=A.done,!h;v=!0){E=A.value,v=!1;const M=E;if(yield yield D(M),M.candidates&&(!((m=M.candidates[0])===null||m===void 0)&&m.content)){k.push(M.candidates[0].content);for(const N of(g=M.candidates[0].content.parts)!==null&&g!==void 0?g:[])if(f<l&&N.functionCall){if(!N.functionCall.name)throw new Error("Function call name was not returned by the model.");if(d.has(N.functionCall.name)){const w=yield D(d.get(N.functionCall.name).callTool([N.functionCall]));P.push(...w)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${d.keys()}, mising tool: ${N.functionCall.name}`)}}}}catch(M){y={error:M}}finally{try{!v&&!h&&(T=S.return)&&(yield D(T.call(S)))}finally{if(y)throw y.error}}if(P.length>0){a=!0;const M=new O;M.candidates=[{content:{role:"user",parts:P}}],yield yield D(M);const N=[];N.push(...k),N.push({role:"user",parts:P});const w=F(p.contents).concat(N);p.contents=w}else break}})}(this,c,e)}async generateContentInternal(e){var t,i,r,l;let a,f="",c={};if(this.apiClient.isVertexAI()){const u=qn(this.apiClient,e);return f=C("{model}:generateContent",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=Bn(d),m=new O;return Object.assign(m,p),m})}else{const u=Gn(this.apiClient,e);return f=C("{model}:generateContent",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=Hn(d),m=new O;return Object.assign(m,p),m})}}async generateContentStreamInternal(e){var t,i,r,l;let a,f="",c={};if(this.apiClient.isVertexAI()){const u=qn(this.apiClient,e);return f=C("{model}:streamGenerateContent?alt=sse",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.requestStream({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),a.then(function(p){return K(this,arguments,function*(){var m,g,h,y;try{for(var T=!0,E=j(p),v;v=yield D(E.next()),m=v.done,!m;T=!0){y=v.value,T=!1;const S=y,A=Bn(yield D(S.json()));A.sdkHttpResponse={headers:S.headers};const I=new O;Object.assign(I,A),yield yield D(I)}}catch(S){g={error:S}}finally{try{!T&&!m&&(h=E.return)&&(yield D(h.call(E)))}finally{if(g)throw g.error}}})})}else{const u=Gn(this.apiClient,e);return f=C("{model}:streamGenerateContent?alt=sse",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.requestStream({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}),a.then(function(p){return K(this,arguments,function*(){var m,g,h,y;try{for(var T=!0,E=j(p),v;v=yield D(E.next()),m=v.done,!m;T=!0){y=v.value,T=!1;const S=y,A=Hn(yield D(S.json()));A.sdkHttpResponse={headers:S.headers};const I=new O;Object.assign(I,A),yield yield D(I)}}catch(S){g={error:S}}finally{try{!T&&!m&&(h=E.return)&&(yield D(h.call(E)))}finally{if(g)throw g.error}}})})}}async embedContent(e){var t,i,r,l;let a,f="",c={};if(this.apiClient.isVertexAI()){const u=Ca(this.apiClient,e);return f=C("{model}:predict",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=Pu(d),m=new yn;return Object.assign(m,p),m})}else{const u=Dl(this.apiClient,e);return f=C("{model}:batchEmbedContents",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=iu(d),m=new yn;return Object.assign(m,p),m})}}async generateImagesInternal(e){var t,i,r,l;let a,f="",c={};if(this.apiClient.isVertexAI()){const u=Sa(this.apiClient,e);return f=C("{model}:predict",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=wu(d),m=new Tn;return Object.assign(m,p),m})}else{const u=Ul(this.apiClient,e);return f=C("{model}:predict",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=lu(d),m=new Tn;return Object.assign(m,p),m})}}async editImageInternal(e){var t,i;let r,l="",a={};if(this.apiClient.isVertexAI()){const f=Pa(this.apiClient,e);return l=C("{model}:predict",f._url),a=f._query,delete f.config,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:c.headers},d})),r.then(c=>{const u=Nu(c),d=new wt;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,i;let r,l="",a={};if(this.apiClient.isVertexAI()){const f=wa(this.apiClient,e);return l=C("{model}:predict",f._url),a=f._query,delete f.config,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:c.headers},d})),r.then(c=>{const u=Du(c),d=new Nt;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,i;let r,l="",a={};if(this.apiClient.isVertexAI()){const f=Ua(this.apiClient,e);return l=C("{model}:predict",f._url),a=f._query,delete f.config,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r.then(c=>{const u=ku(c),d=new Dt;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,i,r,l;let a,f="",c={};if(this.apiClient.isVertexAI()){const u=Fa(this.apiClient,e);return f=C("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>Ee(d))}else{const u=Fl(this.apiClient,e);return f=C("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(d=>Se(d))}}async listInternal(e){var t,i,r,l;let a,f="",c={};if(this.apiClient.isVertexAI()){const u=Va(this.apiClient,e);return f=C("{models_url}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=Vu(d),m=new Cn;return Object.assign(m,p),m})}else{const u=Vl(this.apiClient,e);return f=C("{models_url}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=uu(d),m=new Cn;return Object.assign(m,p),m})}}async update(e){var t,i,r,l;let a,f="",c={};if(this.apiClient.isVertexAI()){const u=qa(this.apiClient,e);return f=C("{model}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>Ee(d))}else{const u=ql(this.apiClient,e);return f=C("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(d=>Se(d))}}async delete(e){var t,i,r,l;let a,f="",c={};if(this.apiClient.isVertexAI()){const u=Ha(this.apiClient,e);return f=C("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(()=>{const d=Gu(),p=new vn;return Object.assign(p,d),p})}else{const u=Hl(this.apiClient,e);return f=C("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(()=>{const d=fu(),p=new vn;return Object.assign(p,d),p})}}async countTokens(e){var t,i,r,l;let a,f="",c={};if(this.apiClient.isVertexAI()){const u=Ja(this.apiClient,e);return f=C("{model}:countTokens",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=qu(d),m=new Sn;return Object.assign(m,p),m})}else{const u=Jl(this.apiClient,e);return f=C("{model}:countTokens",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=cu(d),m=new Sn;return Object.assign(m,p),m})}}async computeTokens(e){var t,i;let r,l="",a={};if(this.apiClient.isVertexAI()){const f=$a(this.apiClient,e);return l=C("{model}:computeTokens",f._url),a=f._query,delete f.config,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:c.headers},d})),r.then(c=>{const u=Hu(c),d=new kt;return Object.assign(d,u),d})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,i,r,l;let a,f="",c={};if(this.apiClient.isVertexAI()){const u=Wa(this.apiClient,e);return f=C("{model}:predictLongRunning",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a.then(d=>{const p=Yu(d),m=new re;return Object.assign(m,p),m})}else{const u=Kl(this.apiClient,e);return f=C("{model}:predictLongRunning",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a.then(d=>{const p=gu(d),m=new re;return Object.assign(m,p),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vf(n){const e={},t=o(n,["operationName"]);t!=null&&s(e,["_url","operationName"],t);const i=o(n,["config"]);return i!=null&&s(e,["config"],i),e}function Sf(n){const e={},t=o(n,["operationName"]);t!=null&&s(e,["_url","operationName"],t);const i=o(n,["config"]);return i!=null&&s(e,["config"],i),e}function Ef(n){const e={},t=o(n,["operationName"]);t!=null&&s(e,["operationName"],t);const i=o(n,["resourceName"]);i!=null&&s(e,["_url","resourceName"],i);const r=o(n,["config"]);return r!=null&&s(e,["config"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _f extends B{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let l;i&&"httpOptions"in i&&(l=i.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:a,isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:r,isVertexAI:!1})}}async get(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=t.name.split("/operations/")[0];let l;i&&"httpOptions"in i&&(l=i.httpOptions);const a=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:r,config:{httpOptions:l}});return t._fromAPIResponse({apiResponse:a,isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:t.name,config:i});return t._fromAPIResponse({apiResponse:r,isVertexAI:!1})}}async getVideosOperationInternal(e){var t,i,r,l;let a,f="",c={};if(this.apiClient.isVertexAI()){const u=Sf(e);return f=C("{operationName}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json()),a}else{const u=vf(e);return f=C("{operationName}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json()),a}}async fetchPredictVideosOperationInternal(e){var t,i;let r,l="",a={};if(this.apiClient.isVertexAI()){const f=Ef(e);return l=C("{resourceName}:fetchPredictOperation",f._url),a=f._query,delete f.config,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function If(n){const e={},t=o(n,["voiceName"]);return t!=null&&s(e,["voiceName"],t),e}function _t(n){const e={},t=o(n,["prebuiltVoiceConfig"]);return t!=null&&s(e,["prebuiltVoiceConfig"],If(t)),e}function Af(n){const e={},t=o(n,["speaker"]);t!=null&&s(e,["speaker"],t);const i=o(n,["voiceConfig"]);return i!=null&&s(e,["voiceConfig"],_t(i)),e}function Mf(n){const e={},t=o(n,["speakerVoiceConfigs"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>Af(r))),s(e,["speakerVoiceConfigs"],i)}return e}function Rf(n){const e={},t=o(n,["voiceConfig"]);t!=null&&s(e,["voiceConfig"],_t(t));const i=o(n,["multiSpeakerVoiceConfig"]);i!=null&&s(e,["multiSpeakerVoiceConfig"],Mf(i));const r=o(n,["languageCode"]);return r!=null&&s(e,["languageCode"],r),e}function Pf(n){const e={},t=o(n,["fps"]);t!=null&&s(e,["fps"],t);const i=o(n,["endOffset"]);i!=null&&s(e,["endOffset"],i);const r=o(n,["startOffset"]);return r!=null&&s(e,["startOffset"],r),e}function xf(n){const e={};if(o(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=o(n,["data"]);t!=null&&s(e,["data"],t);const i=o(n,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function wf(n){const e={};if(o(n,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=o(n,["fileUri"]);t!=null&&s(e,["fileUri"],t);const i=o(n,["mimeType"]);return i!=null&&s(e,["mimeType"],i),e}function Nf(n){const e={},t=o(n,["videoMetadata"]);t!=null&&s(e,["videoMetadata"],Pf(t));const i=o(n,["thought"]);i!=null&&s(e,["thought"],i);const r=o(n,["inlineData"]);r!=null&&s(e,["inlineData"],xf(r));const l=o(n,["fileData"]);l!=null&&s(e,["fileData"],wf(l));const a=o(n,["thoughtSignature"]);a!=null&&s(e,["thoughtSignature"],a);const f=o(n,["codeExecutionResult"]);f!=null&&s(e,["codeExecutionResult"],f);const c=o(n,["executableCode"]);c!=null&&s(e,["executableCode"],c);const u=o(n,["functionCall"]);u!=null&&s(e,["functionCall"],u);const d=o(n,["functionResponse"]);d!=null&&s(e,["functionResponse"],d);const p=o(n,["text"]);return p!=null&&s(e,["text"],p),e}function Df(n){const e={},t=o(n,["parts"]);if(t!=null){let r=t;Array.isArray(r)&&(r=r.map(l=>Nf(l))),s(e,["parts"],r)}const i=o(n,["role"]);return i!=null&&s(e,["role"],i),e}function kf(n){const e={},t=o(n,["behavior"]);t!=null&&s(e,["behavior"],t);const i=o(n,["description"]);i!=null&&s(e,["description"],i);const r=o(n,["name"]);r!=null&&s(e,["name"],r);const l=o(n,["parameters"]);l!=null&&s(e,["parameters"],l);const a=o(n,["parametersJsonSchema"]);a!=null&&s(e,["parametersJsonSchema"],a);const f=o(n,["response"]);f!=null&&s(e,["response"],f);const c=o(n,["responseJsonSchema"]);return c!=null&&s(e,["responseJsonSchema"],c),e}function Uf(n){const e={},t=o(n,["startTime"]);t!=null&&s(e,["startTime"],t);const i=o(n,["endTime"]);return i!=null&&s(e,["endTime"],i),e}function Ff(n){const e={},t=o(n,["timeRangeFilter"]);return t!=null&&s(e,["timeRangeFilter"],Uf(t)),e}function Lf(n){const e={},t=o(n,["mode"]);t!=null&&s(e,["mode"],t);const i=o(n,["dynamicThreshold"]);return i!=null&&s(e,["dynamicThreshold"],i),e}function Vf(n){const e={},t=o(n,["dynamicRetrievalConfig"]);return t!=null&&s(e,["dynamicRetrievalConfig"],Lf(t)),e}function Gf(){return{}}function qf(n){const e={},t=o(n,["functionDeclarations"]);if(t!=null){let c=t;Array.isArray(c)&&(c=c.map(u=>kf(u))),s(e,["functionDeclarations"],c)}if(o(n,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const i=o(n,["googleSearch"]);i!=null&&s(e,["googleSearch"],Ff(i));const r=o(n,["googleSearchRetrieval"]);if(r!=null&&s(e,["googleSearchRetrieval"],Vf(r)),o(n,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");if(o(n,["googleMaps"])!==void 0)throw new Error("googleMaps parameter is not supported in Gemini API.");o(n,["urlContext"])!=null&&s(e,["urlContext"],Gf());const a=o(n,["codeExecution"]);a!=null&&s(e,["codeExecution"],a);const f=o(n,["computerUse"]);return f!=null&&s(e,["computerUse"],f),e}function Hf(n){const e={},t=o(n,["handle"]);if(t!=null&&s(e,["handle"],t),o(n,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function zn(){return{}}function Bf(n){const e={},t=o(n,["disabled"]);t!=null&&s(e,["disabled"],t);const i=o(n,["startOfSpeechSensitivity"]);i!=null&&s(e,["startOfSpeechSensitivity"],i);const r=o(n,["endOfSpeechSensitivity"]);r!=null&&s(e,["endOfSpeechSensitivity"],r);const l=o(n,["prefixPaddingMs"]);l!=null&&s(e,["prefixPaddingMs"],l);const a=o(n,["silenceDurationMs"]);return a!=null&&s(e,["silenceDurationMs"],a),e}function Jf(n){const e={},t=o(n,["automaticActivityDetection"]);t!=null&&s(e,["automaticActivityDetection"],Bf(t));const i=o(n,["activityHandling"]);i!=null&&s(e,["activityHandling"],i);const r=o(n,["turnCoverage"]);return r!=null&&s(e,["turnCoverage"],r),e}function $f(n){const e={},t=o(n,["targetTokens"]);return t!=null&&s(e,["targetTokens"],t),e}function Yf(n){const e={},t=o(n,["triggerTokens"]);t!=null&&s(e,["triggerTokens"],t);const i=o(n,["slidingWindow"]);return i!=null&&s(e,["slidingWindow"],$f(i)),e}function Kf(n){const e={},t=o(n,["proactiveAudio"]);return t!=null&&s(e,["proactiveAudio"],t),e}function Wf(n,e){const t={},i=o(n,["generationConfig"]);e!==void 0&&i!=null&&s(e,["setup","generationConfig"],i);const r=o(n,["responseModalities"]);e!==void 0&&r!=null&&s(e,["setup","generationConfig","responseModalities"],r);const l=o(n,["temperature"]);e!==void 0&&l!=null&&s(e,["setup","generationConfig","temperature"],l);const a=o(n,["topP"]);e!==void 0&&a!=null&&s(e,["setup","generationConfig","topP"],a);const f=o(n,["topK"]);e!==void 0&&f!=null&&s(e,["setup","generationConfig","topK"],f);const c=o(n,["maxOutputTokens"]);e!==void 0&&c!=null&&s(e,["setup","generationConfig","maxOutputTokens"],c);const u=o(n,["mediaResolution"]);e!==void 0&&u!=null&&s(e,["setup","generationConfig","mediaResolution"],u);const d=o(n,["seed"]);e!==void 0&&d!=null&&s(e,["setup","generationConfig","seed"],d);const p=o(n,["speechConfig"]);e!==void 0&&p!=null&&s(e,["setup","generationConfig","speechConfig"],Rf(Re(p)));const m=o(n,["enableAffectiveDialog"]);e!==void 0&&m!=null&&s(e,["setup","generationConfig","enableAffectiveDialog"],m);const g=o(n,["systemInstruction"]);e!==void 0&&g!=null&&s(e,["setup","systemInstruction"],Df(U(g)));const h=o(n,["tools"]);if(e!==void 0&&h!=null){let I=b(h);Array.isArray(I)&&(I=I.map(R=>qf(z(R)))),s(e,["setup","tools"],I)}const y=o(n,["sessionResumption"]);e!==void 0&&y!=null&&s(e,["setup","sessionResumption"],Hf(y));const T=o(n,["inputAudioTranscription"]);e!==void 0&&T!=null&&s(e,["setup","inputAudioTranscription"],zn());const E=o(n,["outputAudioTranscription"]);e!==void 0&&E!=null&&s(e,["setup","outputAudioTranscription"],zn());const v=o(n,["realtimeInputConfig"]);e!==void 0&&v!=null&&s(e,["setup","realtimeInputConfig"],Jf(v));const S=o(n,["contextWindowCompression"]);e!==void 0&&S!=null&&s(e,["setup","contextWindowCompression"],Yf(S));const A=o(n,["proactivity"]);return e!==void 0&&A!=null&&s(e,["setup","proactivity"],Kf(A)),t}function zf(n,e){const t={},i=o(e,["model"]);i!=null&&s(t,["setup","model"],x(n,i));const r=o(e,["config"]);return r!=null&&s(t,["config"],Wf(r,t)),t}function bf(n,e,t){const i={},r=o(e,["expireTime"]);t!==void 0&&r!=null&&s(t,["expireTime"],r);const l=o(e,["newSessionExpireTime"]);t!==void 0&&l!=null&&s(t,["newSessionExpireTime"],l);const a=o(e,["uses"]);t!==void 0&&a!=null&&s(t,["uses"],a);const f=o(e,["liveConnectConstraints"]);t!==void 0&&f!=null&&s(t,["bidiGenerateContentSetup"],zf(n,f));const c=o(e,["lockAdditionalFields"]);return t!==void 0&&c!=null&&s(t,["fieldMask"],c),i}function Xf(n,e){const t={},i=o(e,["config"]);return i!=null&&s(t,["config"],bf(n,i,t)),t}function Qf(n){const e={},t=o(n,["name"]);return t!=null&&s(e,["name"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Zf(n){const e=[];for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)){const i=n[t];if(typeof i=="object"&&i!=null&&Object.keys(i).length>0){const r=Object.keys(i).map(l=>`${t}.${l}`);e.push(...r)}else e.push(t)}return e.join(",")}function Of(n,e){let t=null;const i=n.bidiGenerateContentSetup;if(typeof i=="object"&&i!==null&&"setup"in i){const l=i.setup;typeof l=="object"&&l!==null?(n.bidiGenerateContentSetup=l,t=l):delete n.bidiGenerateContentSetup}else i!==void 0&&delete n.bidiGenerateContentSetup;const r=n.fieldMask;if(t){const l=Zf(t);if(Array.isArray(e?.lockAdditionalFields)&&e?.lockAdditionalFields.length===0)l?n.fieldMask=l:delete n.fieldMask;else if(e?.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const a=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let f=[];r.length>0&&(f=r.map(u=>a.includes(u)?`generationConfig.${u}`:u));const c=[];l&&c.push(l),f.length>0&&c.push(...f),c.length>0?n.fieldMask=c.join(","):delete n.fieldMask}else delete n.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?n.fieldMask=r.join(","):delete n.fieldMask;return n}class jf extends B{constructor(e){super(),this.apiClient=e}async create(e){var t,i;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const f=Xf(this.apiClient,e);l=C("auth_tokens",f._url),a=f._query,delete f.config,delete f._url,delete f._query;const c=Of(f,e.config);return r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(u=>u.json()),r.then(u=>Qf(u))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ec(n){const e={},t=o(n,["name"]);t!=null&&s(e,["_url","name"],t);const i=o(n,["config"]);return i!=null&&s(e,["config"],i),e}function nc(n,e){const t={},i=o(n,["pageSize"]);e!==void 0&&i!=null&&s(e,["_query","pageSize"],i);const r=o(n,["pageToken"]);e!==void 0&&r!=null&&s(e,["_query","pageToken"],r);const l=o(n,["filter"]);return e!==void 0&&l!=null&&s(e,["_query","filter"],l),t}function tc(n){const e={},t=o(n,["config"]);return t!=null&&s(e,["config"],nc(t,e)),e}function oc(n){const e={},t=o(n,["textInput"]);t!=null&&s(e,["textInput"],t);const i=o(n,["output"]);return i!=null&&s(e,["output"],i),e}function ic(n){const e={};if(o(n,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(o(n,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const t=o(n,["examples"]);if(t!=null){let i=t;Array.isArray(i)&&(i=i.map(r=>oc(r))),s(e,["examples","examples"],i)}return e}function sc(n,e){const t={};if(o(n,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=o(n,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&s(e,["displayName"],i),o(n,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const r=o(n,["epochCount"]);e!==void 0&&r!=null&&s(e,["tuningTask","hyperparameters","epochCount"],r);const l=o(n,["learningRateMultiplier"]);if(l!=null&&s(t,["tuningTask","hyperparameters","learningRateMultiplier"],l),o(n,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(o(n,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const a=o(n,["batchSize"]);e!==void 0&&a!=null&&s(e,["tuningTask","hyperparameters","batchSize"],a);const f=o(n,["learningRate"]);return e!==void 0&&f!=null&&s(e,["tuningTask","hyperparameters","learningRate"],f),t}function rc(n){const e={},t=o(n,["baseModel"]);t!=null&&s(e,["baseModel"],t);const i=o(n,["trainingDataset"]);i!=null&&s(e,["tuningTask","trainingData"],ic(i));const r=o(n,["config"]);return r!=null&&s(e,["config"],sc(r,e)),e}function lc(n){const e={},t=o(n,["name"]);t!=null&&s(e,["_url","name"],t);const i=o(n,["config"]);return i!=null&&s(e,["config"],i),e}function ac(n,e){const t={},i=o(n,["pageSize"]);e!==void 0&&i!=null&&s(e,["_query","pageSize"],i);const r=o(n,["pageToken"]);e!==void 0&&r!=null&&s(e,["_query","pageToken"],r);const l=o(n,["filter"]);return e!==void 0&&l!=null&&s(e,["_query","filter"],l),t}function uc(n){const e={},t=o(n,["config"]);return t!=null&&s(e,["config"],ac(t,e)),e}function fc(n,e){const t={},i=o(n,["gcsUri"]);e!==void 0&&i!=null&&s(e,["supervisedTuningSpec","trainingDatasetUri"],i);const r=o(n,["vertexDatasetResource"]);if(e!==void 0&&r!=null&&s(e,["supervisedTuningSpec","trainingDatasetUri"],r),o(n,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return t}function cc(n,e){const t={},i=o(n,["gcsUri"]);i!=null&&s(t,["validationDatasetUri"],i);const r=o(n,["vertexDatasetResource"]);return e!==void 0&&r!=null&&s(e,["supervisedTuningSpec","trainingDatasetUri"],r),t}function dc(n,e){const t={},i=o(n,["validationDataset"]);e!==void 0&&i!=null&&s(e,["supervisedTuningSpec"],cc(i,t));const r=o(n,["tunedModelDisplayName"]);e!==void 0&&r!=null&&s(e,["tunedModelDisplayName"],r);const l=o(n,["description"]);e!==void 0&&l!=null&&s(e,["description"],l);const a=o(n,["epochCount"]);e!==void 0&&a!=null&&s(e,["supervisedTuningSpec","hyperParameters","epochCount"],a);const f=o(n,["learningRateMultiplier"]);e!==void 0&&f!=null&&s(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],f);const c=o(n,["exportLastCheckpointOnly"]);e!==void 0&&c!=null&&s(e,["supervisedTuningSpec","exportLastCheckpointOnly"],c);const u=o(n,["adapterSize"]);if(e!==void 0&&u!=null&&s(e,["supervisedTuningSpec","hyperParameters","adapterSize"],u),o(n,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(o(n,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");return t}function pc(n){const e={},t=o(n,["baseModel"]);t!=null&&s(e,["baseModel"],t);const i=o(n,["trainingDataset"]);i!=null&&s(e,["supervisedTuningSpec","trainingDatasetUri"],fc(i,e));const r=o(n,["config"]);return r!=null&&s(e,["config"],dc(r,e)),e}function mc(n){const e={},t=o(n,["name"]);t!=null&&s(e,["model"],t);const i=o(n,["name"]);return i!=null&&s(e,["endpoint"],i),e}function It(n){const e={},t=o(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const i=o(n,["name"]);i!=null&&s(e,["name"],i);const r=o(n,["state"]);r!=null&&s(e,["state"],nt(r));const l=o(n,["createTime"]);l!=null&&s(e,["createTime"],l);const a=o(n,["tuningTask","startTime"]);a!=null&&s(e,["startTime"],a);const f=o(n,["tuningTask","completeTime"]);f!=null&&s(e,["endTime"],f);const c=o(n,["updateTime"]);c!=null&&s(e,["updateTime"],c);const u=o(n,["description"]);u!=null&&s(e,["description"],u);const d=o(n,["baseModel"]);d!=null&&s(e,["baseModel"],d);const p=o(n,["_self"]);p!=null&&s(e,["tunedModel"],mc(p));const m=o(n,["distillationSpec"]);m!=null&&s(e,["distillationSpec"],m);const g=o(n,["experiment"]);g!=null&&s(e,["experiment"],g);const h=o(n,["labels"]);h!=null&&s(e,["labels"],h);const y=o(n,["pipelineJob"]);y!=null&&s(e,["pipelineJob"],y);const T=o(n,["satisfiesPzi"]);T!=null&&s(e,["satisfiesPzi"],T);const E=o(n,["satisfiesPzs"]);E!=null&&s(e,["satisfiesPzs"],E);const v=o(n,["serviceAccount"]);v!=null&&s(e,["serviceAccount"],v);const S=o(n,["tunedModelDisplayName"]);return S!=null&&s(e,["tunedModelDisplayName"],S),e}function gc(n){const e={},t=o(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const i=o(n,["nextPageToken"]);i!=null&&s(e,["nextPageToken"],i);const r=o(n,["tunedModels"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>It(a))),s(e,["tuningJobs"],l)}return e}function hc(n){const e={},t=o(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const i=o(n,["name"]);i!=null&&s(e,["name"],i);const r=o(n,["metadata"]);r!=null&&s(e,["metadata"],r);const l=o(n,["done"]);l!=null&&s(e,["done"],l);const a=o(n,["error"]);return a!=null&&s(e,["error"],a),e}function yc(n){const e={},t=o(n,["checkpointId"]);t!=null&&s(e,["checkpointId"],t);const i=o(n,["epoch"]);i!=null&&s(e,["epoch"],i);const r=o(n,["step"]);r!=null&&s(e,["step"],r);const l=o(n,["endpoint"]);return l!=null&&s(e,["endpoint"],l),e}function Tc(n){const e={},t=o(n,["model"]);t!=null&&s(e,["model"],t);const i=o(n,["endpoint"]);i!=null&&s(e,["endpoint"],i);const r=o(n,["checkpoints"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>yc(a))),s(e,["checkpoints"],l)}return e}function Ie(n){const e={},t=o(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const i=o(n,["name"]);i!=null&&s(e,["name"],i);const r=o(n,["state"]);r!=null&&s(e,["state"],nt(r));const l=o(n,["createTime"]);l!=null&&s(e,["createTime"],l);const a=o(n,["startTime"]);a!=null&&s(e,["startTime"],a);const f=o(n,["endTime"]);f!=null&&s(e,["endTime"],f);const c=o(n,["updateTime"]);c!=null&&s(e,["updateTime"],c);const u=o(n,["error"]);u!=null&&s(e,["error"],u);const d=o(n,["description"]);d!=null&&s(e,["description"],d);const p=o(n,["baseModel"]);p!=null&&s(e,["baseModel"],p);const m=o(n,["tunedModel"]);m!=null&&s(e,["tunedModel"],Tc(m));const g=o(n,["supervisedTuningSpec"]);g!=null&&s(e,["supervisedTuningSpec"],g);const h=o(n,["tuningDataStats"]);h!=null&&s(e,["tuningDataStats"],h);const y=o(n,["encryptionSpec"]);y!=null&&s(e,["encryptionSpec"],y);const T=o(n,["partnerModelTuningSpec"]);T!=null&&s(e,["partnerModelTuningSpec"],T);const E=o(n,["distillationSpec"]);E!=null&&s(e,["distillationSpec"],E);const v=o(n,["experiment"]);v!=null&&s(e,["experiment"],v);const S=o(n,["labels"]);S!=null&&s(e,["labels"],S);const A=o(n,["pipelineJob"]);A!=null&&s(e,["pipelineJob"],A);const I=o(n,["satisfiesPzi"]);I!=null&&s(e,["satisfiesPzi"],I);const R=o(n,["satisfiesPzs"]);R!=null&&s(e,["satisfiesPzs"],R);const P=o(n,["serviceAccount"]);P!=null&&s(e,["serviceAccount"],P);const k=o(n,["tunedModelDisplayName"]);return k!=null&&s(e,["tunedModelDisplayName"],k),e}function Cc(n){const e={},t=o(n,["sdkHttpResponse"]);t!=null&&s(e,["sdkHttpResponse"],t);const i=o(n,["nextPageToken"]);i!=null&&s(e,["nextPageToken"],i);const r=o(n,["tuningJobs"]);if(r!=null){let l=r;Array.isArray(l)&&(l=l.map(a=>Ie(a))),s(e,["tuningJobs"],l)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vc extends B{constructor(e){super(),this.apiClient=e,this.get=async t=>await this.getInternal(t),this.list=async(t={})=>new ee(H.PAGED_ITEM_TUNING_JOBS,i=>this.listInternal(i),await this.listInternal(t),t),this.tune=async t=>{if(this.apiClient.isVertexAI())return await this.tuneInternal(t);{const i=await this.tuneMldevInternal(t);let r="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?r=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(r=i.name.split("/operations/")[0]),{name:r,state:me.JOB_STATE_QUEUED}}}}async getInternal(e){var t,i,r,l;let a,f="",c={};if(this.apiClient.isVertexAI()){const u=lc(e);return f=C("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>Ie(d))}else{const u=ec(e);return f=C("{name}",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>It(d))}}async listInternal(e){var t,i,r,l;let a,f="",c={};if(this.apiClient.isVertexAI()){const u=uc(e);return f=C("tuningJobs",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=Cc(d),m=new _n;return Object.assign(m,p),m})}else{const u=tc(e);return f=C("tunedModels",u._url),c=u._query,delete u.config,delete u._url,delete u._query,a=this.apiClient.request({path:f,queryParams:c,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(l=e.config)===null||l===void 0?void 0:l.abortSignal}).then(d=>d.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:d.headers},m})),a.then(d=>{const p=gc(d),m=new _n;return Object.assign(m,p),m})}}async tuneInternal(e){var t,i;let r,l="",a={};if(this.apiClient.isVertexAI()){const f=pc(e);return l=C("tuningJobs",f._url),a=f._query,delete f.config,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:c.headers},d})),r.then(c=>Ie(c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,i;let r,l="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const f=rc(e);return l=C("tunedModels",f._url),a=f._query,delete f.config,delete f._url,delete f._query,r=this.apiClient.request({path:l,queryParams:a,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(c=>c.json().then(u=>{const d=u;return d.sdkHttpResponse={headers:c.headers},d})),r.then(c=>hc(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Sc{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Ec=1024*1024*8,_c=3,Ic=1e3,Ac=2,de="x-goog-upload-status";async function Mc(n,e,t){var i,r,l;let a=0,f=0,c=new ge(new Response),u="upload";for(a=n.size;f<a;){const p=Math.min(Ec,a-f),m=n.slice(f,f+p);f+p>=a&&(u+=", finalize");let g=0,h=Ic;for(;g<_c&&(c=await t.request({path:"",body:m,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":u,"X-Goog-Upload-Offset":String(f),"Content-Length":String(p)}}}),!(!((i=c?.headers)===null||i===void 0)&&i[de]));)g++,await Pc(h),h=h*Ac;if(f+=p,((r=c?.headers)===null||r===void 0?void 0:r[de])!=="active")break;if(a<=f)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const d=await c?.json();if(((l=c?.headers)===null||l===void 0?void 0:l[de])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return d.file}async function Rc(n){return{size:n.size,type:n.type}}function Pc(n){return new Promise(e=>setTimeout(e,n))}class xc{async upload(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Mc(e,t,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Rc(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wc{create(e,t,i){return new Nc(e,t,i)}}class Nc{constructor(e,t,i){this.url=e,this.headers=t,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bn="x-goog-api-key";class Dc{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(bn)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(bn,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const kc="gl-node/";class Uc{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const i=xt(e.httpOptions,e.vertexai,void 0,void 0);i&&(e.httpOptions?e.httpOptions.baseUrl=i:e.httpOptions={baseUrl:i}),this.apiVersion=e.apiVersion;const r=new Dc(this.apiKey);this.apiClient=new Ou({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:kc+"web",uploader:new xc,downloader:new Sc}),this.models=new Cf(this.apiClient),this.live=new df(this.apiClient,r,new wc),this.batches=new ei(this.apiClient),this.chats=new is(this.models,this.apiClient),this.caches=new ns(this.apiClient),this.files=new ys(this.apiClient),this.operations=new _f(this.apiClient),this.authTokens=new jf(this.apiClient),this.tunings=new vc(this.apiClient)}}const Fc="Kunci API Google AI tidak dikonfigurasi. Harap atur kunci Anda di menu pengaturan (ikon roda gigi).",q=()=>{const n=localStorage.getItem("google-api-key");if(!n)throw new Error(Fc);return new Uc({apiKey:n})},At=async n=>({inlineData:{data:await new Promise(i=>{const r=new FileReader;r.onloadend=()=>i(r.result.split(",")[1]),r.readAsDataURL(n)}),mimeType:n.type}}),Lc="You are an expert code reviewer and teacher. Your goal is to explain code snippets in a way that is easy for other developers to understand. \n- Use clear and concise language.\n- Break down complex parts into simple steps.\n- Use markdown for formatting, including bullet points for lists and backticks for inline code. Do not use markdown code blocks (```) as the entire output will be rendered in a pre-formatted block.",Vc=async(n,e)=>{const t=q(),i=`Please explain the following code snippet:

${n}`,r=await t.models.generateContentStream({model:"gemini-2.5-flash",contents:i,config:{systemInstruction:Lc}});for await(const l of r)l.text&&e(l.text)},Gc=async n=>{const e=q(),{concept:t,file:i,style:r,aspectRatio:l,duration:a}=n,f=`You are a world-class prompt engineer for generative AI models. Your task is to take a user's simple concept OR a provided image and expand it into two separate, but related, highly detailed and effective prompts: one for image generation and one for video generation.

**Core Relationship:**
The video prompt's primary purpose is to **animate the static scene** created by the image prompt. First, conceptualize the detailed image prompt. Then, create a video prompt that brings that exact scene to life with movement, action, and transitions, while maintaining the same core subject, environment, and style. The video prompt should explicitly state its goal is to animate the image.

**Source of Inspiration:**
- If an image is provided, base the prompts on the image's content, style, and composition. The user's text concept should be ignored.
- If only a text concept is provided, use that as the basis for the prompts.

You MUST incorporate the user's specific requirements for style, aspect ratio, and duration into the final prompts.

**Image Prompt Rules:**
-   The image prompt will define the static scene.
-   Format as a single, dense paragraph.
-   Be highly descriptive, focusing on visual details, lighting, and composition.
-   Incorporate the specified Art Style and Image Aspect Ratio.

**Video Prompt Rules:**
-   This prompt will animate the scene from the image prompt.
-   Use Markdown for formatting: use double asterisks for bolding (**text**) and a single asterisk followed by a space for unordered list items (* item).
-   Structure the prompt with bolded section titles on new lines (e.g., **Subject:**, **Action:**, **Style & Mood:**).
-   Use bullet points for sub-details where appropriate. Do not nest bullet points.

**Output Format:**
-   You MUST return the output as a single, valid JSON object with two string keys: "imagePrompt" and "videoPrompt".
-   Do not include any other text, explanations, or markdown formatting outside of the JSON object itself.`;let c,u;if(i){const m=await At(i);c=`Analyze the provided image and generate prompts based on the following details:
      - Art Style: "${r}"
      - Image Aspect Ratio: "${l}"
      - Video Duration: "${a} seconds"`,u={parts:[m,{text:c}]}}else c=`Generate prompts based on the following details:
      - Concept: "${t}"
      - Art Style: "${r}"
      - Image Aspect Ratio: "${l}"
      - Video Duration: "${a} seconds"`,u=c;const p=(await e.models.generateContent({model:"gemini-2.5-flash",contents:u,config:{systemInstruction:f,responseMimeType:"application/json",responseSchema:{type:_.OBJECT,properties:{imagePrompt:{type:_.STRING,description:"A detailed prompt for a text-to-image model, formatted as a single dense paragraph."},videoPrompt:{type:_.STRING,description:"A detailed prompt for a text-to-video model, formatted with Markdown (bolding and bullet points), that animates the image prompt's scene."}},required:["imagePrompt","videoPrompt"]}}})).text;if(!p)throw new Error("API mengembalikan respons kosong.");return JSON.parse(p)},qc=async(n,e,t)=>{const i=q(),r=await At(n),l=`You are an expert AI assistant specializing in generating high-quality metadata for stock photography and digital assets. Your task is to analyze an image and produce a compelling title, a set of relevant keywords, and a detailed description based on the user's specific requirements.

**Instructions:**
1.  **Analyze the Image:** Carefully examine the image content, including subjects, setting, colors, mood, and potential concepts.
2.  **Generate Title:** Create a concise, descriptive title. The title should be approximately ${e.titleLength} characters long.
3.  **Generate Keywords:** Produce a list of approximately ${e.keywordCount} keywords. 
    - The keywords must be highly relevant to the image.
    - Adhere to the specified Keyword Format: "${e.keywordFormat}".
    - 'Single Only' means each keyword must be a single word.
    - 'Double Only' means each keyword should be a two-word phrase.
    - 'Mixed' means you can use a combination of single and multi-word keywords.
    ${e.includeKeywords?`- You MUST include keywords related to: "${e.includeKeywords}".`:""}
    ${e.excludeKeywords?`- You MUST NOT include keywords related to: "${e.excludeKeywords}".`:""}
4.  **Generate Description:** Write a detailed description of the image. The description should be approximately ${e.descriptionLength} characters long.

**Output Format:**
- You MUST return a single, valid JSON object with three keys: "title", "keywords" (an array of strings), and "description".
- Do not include any other text, explanations, or markdown formatting outside of the JSON object itself.`,a={text:"Generate metadata for the provided image based on my system instructions."},c=(await i.models.generateContent({model:t.id,contents:{parts:[r,a]},config:{systemInstruction:l,responseMimeType:"application/json",responseSchema:{type:_.OBJECT,properties:{title:{type:_.STRING,description:"The generated title for the image."},keywords:{type:_.ARRAY,items:{type:_.STRING},description:"An array of generated keywords."},description:{type:_.STRING,description:"The generated description for the image."}},required:["title","keywords","description"]}}})).text;if(!c)throw new Error("API mengembalikan respons kosong.");return{...JSON.parse(c),modelName:t.name}},Hc=async n=>{const e=q(),{topic:t,platform:i,tone:r,includeHashtags:l,includeEmojis:a}=n,f=`You are an expert social media manager. Your task is to generate a compelling social media post based on user-defined parameters.

**Instructions:**
1.  **Analyze the User's Topic:** Understand the core message and goal of the user's topic: "${t}".
2.  **Adhere to Platform Constraints:**
    -   **Platform:** ${i}. This is the most important constraint.
    -   **Twitter/X:** Be concise and impactful, strictly under 280 characters.
    -   **LinkedIn:** Use a professional and structured tone. Use line breaks for readability. Ideal for career, tech, and business topics.
    -   **Facebook:** Use a conversational and engaging tone. Can be slightly longer than Twitter.
    -   **Instagram:** Write a caption that is visually oriented and encourages engagement. Ask questions.
3.  **Apply Tone of Voice:** The tone must be "${r}".
4.  **Hashtags:** ${l?"Include relevant and popular hashtags. For Twitter and Instagram, place them at the end. For LinkedIn, integrate them naturally or at the end.":"Do not include any hashtags."}
5.  **Emojis:** ${a?"Include a few relevant emojis to increase engagement.":"Do not include any emojis."}

**Output:**
-   You MUST return only the text content of the post.
-   Do not include any other text, explanations, titles, or markdown formatting like quotes or code blocks.
-   The output should be a single block of text ready to be copied and pasted.`,d=(await e.models.generateContent({model:"gemini-2.5-flash",contents:"Generate a social media post for me.",config:{systemInstruction:f}})).text;if(!d)throw new Error("API mengembalikan respons kosong.");return d.trim()},Bc=async n=>{const e=q(),t=`You are an expert in Unix/Linux shell commands. Your task is to take a user's description of a task and provide the most appropriate and efficient shell command to accomplish it.

**Instructions:**
1.  **Analyze the User's Task:** Carefully understand the user's goal from their description: "${n}".
2.  **Provide the Command:** Generate the single, most accurate shell command.
3.  **Provide a Brief Explanation:** Write a concise, one or two-sentence explanation of what the command does and how it works.
4.  **Safety First:** If the described task is potentially destructive (e.g., involves 'rm -rf /' or other dangerous operations), instead of providing the command, your command should be an 'echo' statement warning the user, and the explanation should describe the potential danger.

**Output Format:**
- You MUST return a single, valid JSON object with two string keys: "command" and "explanation".
- Do not include any other text, notes, or markdown formatting outside of the JSON object itself.`,i=`Generate the Unix command for the following task: "${n}"`,l=(await e.models.generateContent({model:"gemini-2.5-flash",contents:i,config:{systemInstruction:t,responseMimeType:"application/json",responseSchema:{type:_.OBJECT,properties:{command:{type:_.STRING,description:"The generated Unix/Linux shell command."},explanation:{type:_.STRING,description:"A brief, one or two-sentence explanation of the command."}},required:["command","explanation"]}}})).text;if(!l)throw new Error("API mengembalikan respons kosong.");return JSON.parse(l)},Jc=async n=>{const e=q(),{count:t,duration:i,country:r,category:l,niche:a}=n,f=`**Role:** You are an expert YouTube content strategist specializing in viral short-form videos (${i} seconds) for the ${r} market.

**Task:** Generate ${t} highly viral video titles focused on the **"${l}"** category, specifically about **"${a}"**. All output text, including titles and analysis, MUST be in the primary language spoken in **${r}**.

**Output Format:** You MUST return a single, valid JSON object with two keys: "titles" (an array of all ${t} generated titles as strings) and "analysis" (an array of objects for the top 3 titles, where each object has "rank" (number), "title" (string), and "recommendation" (string, a detailed explanation in the language of ${r} of why the title is viral, covering YouTube algorithms, power words, CTR prediction, and emotional sentiment)).

**Constraints:**
-   All text, including titles and recommendations, must be in the language of the target country (${r}).
-   Focus on creating curiosity, urgency, or strong emotional reactions.
-   Keep titles concise and impactful.`,d=(await e.models.generateContent({model:"gemini-2.5-flash",contents:"Generate titles for me.",config:{systemInstruction:f,responseMimeType:"application/json",responseSchema:{type:_.OBJECT,properties:{titles:{type:_.ARRAY,items:{type:_.STRING},description:`An array of ${t} generated video titles.`},analysis:{type:_.ARRAY,items:{type:_.OBJECT,properties:{rank:{type:_.INTEGER,description:"The rank of the title."},title:{type:_.STRING,description:"The viral title."},recommendation:{type:_.STRING,description:"The detailed analysis for virality."}},required:["rank","title","recommendation"]},description:"An analysis of the top 3 viral titles."}},required:["titles","analysis"]}}})).text;if(!d)throw new Error("API mengembalikan respons kosong.");return JSON.parse(d)},$c=async n=>{const e=q(),{title:t,duration:i,country:r}=n,l=`**Role:** You are a seasoned screenwriter and short-form video expert for the ${r} market.

**Task:** Create a compelling ${i}-second video narrative script for the title: **"${t}"**. The entire output, including all script parts and notes, MUST be in the primary language spoken in **${r}**.

**Script Structure Requirements:**
-   **HOOK (0:00-0:05):** A captivating opening that grabs attention immediately.
-   **KONFLIK 1 (0:05-0:20):** Introduce the first layer of conflict or tension.
-   **KONFLIK 2 (0:20-0:35):** Escalate the conflict.
-   **TWIST (0:35-0:45):** Introduce an unexpected plot twist.
-   **KONFLIK 3 (0:45-0:55):** Show the consequences of the twist.
-   **CLOSING (0:55-${i}):** A concluding thought or call to action.
-   **PRODUCTION NOTES:** At the end, include a concise "Production Notes for ${i} seconds" section.

**Output Format:** You MUST return a single, valid JSON object with keys "hook", "konflik1", "konflik2", "twist", "konflik3", "closing", and "production_notes". Each key's value should be the corresponding text for that script section, written in the language of ${r}.`,a=`Create a narrative for the title: "${t}"`,c=(await e.models.generateContent({model:"gemini-2.5-flash",contents:a,config:{systemInstruction:l,responseMimeType:"application/json",responseSchema:{type:_.OBJECT,properties:{hook:{type:_.STRING},konflik1:{type:_.STRING},konflik2:{type:_.STRING},twist:{type:_.STRING},konflik3:{type:_.STRING},closing:{type:_.STRING},production_notes:{type:_.STRING}},required:["hook","konflik1","konflik2","twist","konflik3","closing","production_notes"]}}})).text;if(!c)throw new Error("API mengembalikan respons kosong.");return JSON.parse(c)},Yc=async(n,e,t)=>{const i=q(),r=Object.entries(n).filter(([u])=>u!=="production_notes").map(([u,d])=>`**${u.toUpperCase()}**: ${d}`).join(`

`),l=`**Role:** You are an AI creative director specializing in converting video scripts into prompts for AI image/video tools (like Google Imagen, Midjourney, RunwayML).

**Task:** For the provided video script for the title "${e}", break down each segment and generate specific prompts for visual and motion assets. The input script is in the primary language of ${t}.

**Input Script:**
${r}

**Output Format:** You MUST return a single, valid JSON array of objects. Each object represents a script segment and must have the following string keys: "segment_name" (e.g., "HOOK"), "timestamp" (e.g., "Seconds 0-5", translated to the language of ${t}), "narrator_script" (The narration text, which MUST be identical to the input script for that segment), "text_to_image_prompt" (A detailed prompt for an image generator, **in English**), and "image_to_video_prompt" (A detailed prompt for an animation/video generator, **in English**).

**Constraints:**
-   \`text_to_image_prompt\` and \`image_to_video_prompt\` must be in ENGLISH.
-   \`narrator_script\` must be in the language of ${t} and match the input.
-   \`timestamp\` must be in the language of ${t}.
-   Image/video prompts must be highly descriptive, focusing on mood, lighting, and composition.
-   Video prompts should include camera movement, animation, and duration.
-   Timestamps must correspond to a 60-second video structure.
`,c=(await i.models.generateContent({model:"gemini-2.5-flash",contents:"Generate production assets for the provided script.",config:{systemInstruction:l,responseMimeType:"application/json",responseSchema:{type:_.ARRAY,items:{type:_.OBJECT,properties:{segment_name:{type:_.STRING},timestamp:{type:_.STRING},narrator_script:{type:_.STRING},text_to_image_prompt:{type:_.STRING},image_to_video_prompt:{type:_.STRING}},required:["segment_name","timestamp","narrator_script","text_to_image_prompt","image_to_video_prompt"]}}}})).text;if(!c)throw new Error("API mengembalikan respons kosong.");return JSON.parse(c)},Kc=async(n,e)=>{const t=q(),i=`**Role:** You are a top-tier YouTube thumbnail designer and AI prompt engineer.

**Task:** Generate a comprehensive prompt for an AI image generator (e.g., Midjourney, Google Imagen) to create a highly viral YouTube thumbnail for the video titled: **"${n}"**. The video is for the ${e} market. Also provide analysis and notes.

**Output Format:** You MUST return a single, valid JSON object with three keys:
1.  **"analysis"**: An object with string keys "clickable", "emotional", "visual", and "optimized". The value for each key should be an explanation, in the language of ${e}, of how the thumbnail prompt achieves that goal.
2.  **"prompt"**: A single, detailed string containing the complete prompt for the AI image generator. This prompt MUST be in **English**.
3.  **"notes"**: An object with string keys "iteration", "ab_testing", and "adjust", providing actionable advice for the user, in the language of ${e}.`,r=`Generate thumbnail design for the title: "${n}"`,a=(await t.models.generateContent({model:"gemini-2.5-flash",contents:r,config:{systemInstruction:i,responseMimeType:"application/json",responseSchema:{type:_.OBJECT,properties:{analysis:{type:_.OBJECT,properties:{clickable:{type:_.STRING},emotional:{type:_.STRING},visual:{type:_.STRING},optimized:{type:_.STRING}},required:["clickable","emotional","visual","optimized"]},prompt:{type:_.STRING},notes:{type:_.OBJECT,properties:{iteration:{type:_.STRING},ab_testing:{type:_.STRING},adjust:{type:_.STRING}},required:["iteration","ab_testing","adjust"]}},required:["analysis","prompt","notes"]}}})).text;if(!a)throw new Error("API mengembalikan respons kosong.");return JSON.parse(a)};export{qc as a,Hc as b,Bc as c,Jc as d,Vc as e,$c as f,Gc as g,Yc as h,Kc as i};
