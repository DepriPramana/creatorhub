import{r as d,j as e}from"./index-BQuNFLeR.js";import{b as E}from"./geminiService-Ym5kw0UC.js";import{T as I}from"./TagIcon-CAUpDDxA.js";import{C as $}from"./ClipboardIcon-B6bd5_Du.js";import{D as P}from"./DownloadIcon-DqOncyMa.js";const p=[{id:"gemini-2.5-flash",name:"Gemini 2.5 Flash"},{id:"gemini-2.5-flash",name:"Gemini 2.5 Flash Lite Preview"},{id:"gemini-2.5-flash",name:"Gemini 2.0 Flash"},{id:"gemini-2.5-flash",name:"Gemini 2.0 Flash Lite"}],O=()=>{const[r,L]=d.useState({titleLength:100,keywordCount:40,descriptionLength:150,keywordFormat:"Mixed",includeKeywords:"technology, innovation, AI",excludeKeywords:"spam, clickbait, generic"}),[b,F]=d.useState(p[0].name),[a,j]=d.useState([]),[c,f]=d.useState([]),[m,w]=d.useState(!1),[u,g]=d.useState(null),[K,y]=d.useState(!1),k=d.useRef(null),h=(s,t)=>{L(l=>({...l,[s]:t}))},C=s=>{if(s){const t=Array.from(s);j(l=>[...l,...t])}},S=d.useCallback(async()=>{if(a.length===0){g("Silakan unggah setidaknya satu file gambar.");return}w(!0),g(null),f([]);const s=p.find(t=>t.name===b)||p[0];try{const t=a.map(n=>E(n,r,s)),l=await Promise.allSettled(t),x=[];l.forEach((n,i)=>{if(n.status==="fulfilled")x.push({file:a[i],data:n.value,id:`${a[i].name}-${Date.now()}`});else if(console.error(`Gagal menghasilkan metadata untuk ${a[i].name}:`,n.reason),!u){const v=n.reason instanceof Error?n.reason.message:"Terjadi kesalahan yang tidak diketahui.";g(`Gagal memproses ${a[i].name}: ${v}`)}}),f(x)}catch(t){const l=t instanceof Error?t.message:"Terjadi kesalahan yang tidak diketahui.";g(l)}finally{w(!1)}},[a,r,b,u]),D=s=>{navigator.clipboard.writeText(s)},M=()=>{if(c.length===0)return;const s=N=>{const o=String(N);return o.search(/("|,|\n)/g)>=0?`"${o.replace(/"/g,'""')}"`:o},t=["Filename","Title","Keywords","Description","Model"],l=c.map(({file:N,data:o})=>[s(N.name),s(o.title),s(o.keywords.join(", ")),s(o.description),s(o.modelName)].join(",")),x=[t.join(","),...l].join(`
`),n=new Blob([x],{type:"text/csv;charset=utf-8;"}),i=document.createElement("a"),v=URL.createObjectURL(n);i.setAttribute("href",v),i.setAttribute("download","metadata_export.csv"),i.style.visibility="hidden",document.body.appendChild(i),i.click(),document.body.removeChild(i)};return e.jsx("div",{className:"container mx-auto py-12 px-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 items-start",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsxs("div",{className:"bg-slate-800/50 p-6 rounded-xl border border-slate-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:"Unggah File"}),a.length>0&&e.jsx("button",{onClick:()=>{j([]),f([])},className:"text-sm font-semibold text-cyan-400 hover:text-cyan-300",children:"HAPUS SEMUA"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:`flex flex-col items-center justify-center p-6 border-2 border-dashed rounded-lg transition-colors ${K?"border-cyan-400 bg-slate-700/50":"border-slate-600"}`,onDragEnter:()=>y(!0),onDragLeave:()=>y(!1),onDragOver:s=>s.preventDefault(),onDrop:s=>{s.preventDefault(),y(!1),C(s.dataTransfer.files)},children:[e.jsx("input",{ref:k,type:"file",multiple:!0,accept:"image/*",className:"hidden",onChange:s=>C(s.target.files)}),e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-slate-500 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l-1.586-1.586a2 2 0 010-2.828L14 8"})}),e.jsx("p",{className:"text-slate-400 mb-2",children:"Letakkan atau Pilih File"}),e.jsx("button",{onClick:()=>k.current?.click(),className:"bg-cyan-500 text-white font-semibold py-2 px-4 rounded-md hover:bg-cyan-600 transition-colors",children:"Telusuri File"})]}),e.jsxs("div",{className:"border border-slate-700 rounded-lg p-4 bg-slate-900/50",children:[e.jsxs("h4",{className:"font-semibold text-white mb-2",children:["File yang Diunggah (",a.length,")"]}),a.length===0?e.jsx("div",{className:"flex items-center justify-center h-full text-slate-500",children:"Belum ada file yang diunggah"}):e.jsx("ul",{className:"space-y-2 max-h-48 overflow-y-auto pr-2",children:a.map((s,t)=>e.jsxs("li",{className:"text-sm text-slate-300 bg-slate-800 p-2 rounded flex justify-between items-center",children:[e.jsx("span",{className:"truncate",children:s.name}),e.jsx("button",{onClick:()=>j(l=>l.filter((x,n)=>n!==t)),className:"text-slate-500 hover:text-red-400 ml-2 flex-shrink-0",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]},`${s.name}-${t}`))})]})]})]}),e.jsxs("div",{className:"bg-slate-800/50 p-6 rounded-xl border border-slate-700",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Pengaturan Penting"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"titleLength",className:"flex justify-between text-sm font-medium text-slate-300",children:["Panjang Judul ",e.jsxs("span",{children:[r.titleLength," chars"]})]}),e.jsx("input",{id:"titleLength",type:"range",min:"30",max:"200",value:r.titleLength,onChange:s=>h("titleLength",parseInt(s.target.value)),className:"w-full h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-cyan-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"keywordCount",className:"flex justify-between text-sm font-medium text-slate-300",children:["Jumlah Kata Kunci ",e.jsx("span",{children:r.keywordCount})]}),e.jsx("input",{id:"keywordCount",type:"range",min:"10",max:"50",value:r.keywordCount,onChange:s=>h("keywordCount",parseInt(s.target.value)),className:"w-full h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-cyan-500"})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"descriptionLength",className:"flex justify-between text-sm font-medium text-slate-300",children:["Panjang Deskripsi ",e.jsxs("span",{children:[r.descriptionLength," chars"]})]}),e.jsx("input",{id:"descriptionLength",type:"range",min:"50",max:"300",value:r.descriptionLength,onChange:s=>h("descriptionLength",parseInt(s.target.value)),className:"w-full h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer accent-cyan-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Format Kata Kunci"}),e.jsx("div",{className:"flex gap-2",children:["Single Only","Double Only","Mixed"].map(s=>e.jsx("button",{onClick:()=>h("keywordFormat",s),className:`px-4 py-2 rounded-md text-sm font-semibold transition-colors ${r.keywordFormat===s?"bg-cyan-500 text-white":"bg-slate-700 hover:bg-slate-600"}`,children:s},s))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"includeKeywords",className:"text-sm font-medium text-slate-300",children:"Sertakan Kata Kunci"}),e.jsx("input",{id:"includeKeywords",type:"text",value:r.includeKeywords,onChange:s=>h("includeKeywords",s.target.value),placeholder:"teknologi, inovasi, AI",className:"mt-1 w-full p-2 bg-slate-900 border border-slate-600 rounded-md focus:ring-cyan-500"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"excludeKeywords",className:"text-sm font-medium text-slate-300",children:"Kecualikan Kata Kunci"}),e.jsx("input",{id:"excludeKeywords",type:"text",value:r.excludeKeywords,onChange:s=>h("excludeKeywords",s.target.value),placeholder:"spam, clickbait, generik",className:"mt-1 w-full p-2 bg-slate-900 border border-slate-600 rounded-md focus:ring-cyan-500"})]})]})]})]}),e.jsx("button",{onClick:S,disabled:m||a.length===0,className:"w-full flex items-center justify-center gap-3 bg-cyan-500 text-white font-semibold py-3 px-6 rounded-md hover:bg-cyan-600 transition-colors disabled:bg-slate-600 disabled:cursor-not-allowed text-lg",children:m?"Menghasilkan...":"Hasilkan Metadata"}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"text-2xl font-bold text-white mb-4",children:"Hasil"}),u&&!m&&e.jsx("div",{role:"alert",className:"bg-red-500/20 border border-red-500 text-red-300 p-4 rounded-md mb-4",children:u}),e.jsxs("div",{className:"space-y-4",children:[m&&c.length===0&&a.map((s,t)=>e.jsx("div",{className:"bg-slate-800/50 p-4 rounded-xl border border-slate-700 animate-pulse",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"w-24 h-24 bg-slate-700 rounded-md"}),e.jsxs("div",{className:"flex-1 space-y-3 py-2",children:[e.jsx("div",{className:"h-5 bg-slate-700 rounded w-3/4"}),e.jsx("div",{className:"h-3 bg-slate-700 rounded w-1/2"}),e.jsx("div",{className:"h-3 bg-slate-700 rounded w-full"}),e.jsx("div",{className:"h-3 bg-slate-700 rounded w-5/6"})]})]})},`loader-${t}`)),c.length>0&&c.map(({file:s,data:t,id:l})=>e.jsxs("div",{className:"bg-slate-800/50 p-4 rounded-xl border border-slate-700",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("img",{src:URL.createObjectURL(s),alt:s.name,className:"w-24 h-24 object-cover rounded-md flex-shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-bold text-white",children:t.title}),e.jsxs("div",{className:"mt-3",children:[e.jsx("h5",{className:"text-sm font-semibold text-slate-300 mb-2",children:"Kata kunci:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.keywords.map((x,n)=>e.jsx("span",{className:"text-xs bg-slate-700 text-slate-200 px-2 py-1 rounded-full",children:x},n))})]})]}),e.jsx("button",{onClick:()=>D(JSON.stringify(t,null,2)),className:"text-slate-400 hover:text-cyan-400 flex-shrink-0 self-start",children:e.jsx($,{className:"w-5 h-5"})})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("h5",{className:"text-sm font-semibold text-slate-300 mb-2",children:"Deskripsi:"}),e.jsx("p",{className:"text-sm text-slate-400",children:t.description})]}),e.jsxs("p",{className:"text-xs text-slate-500 mt-3 text-right",children:["Dihasilkan oleh: ",t.modelName]})]},l)),!m&&c.length===0&&e.jsxs("div",{className:"text-center text-slate-500 p-8 border-2 border-dashed border-slate-700 rounded-xl",children:[e.jsx(I,{className:"w-12 h-12 mx-auto mb-2"}),"Hasil yang dihasilkan akan muncul di sini."]})]})]})]}),e.jsxs("div",{className:"lg:col-span-1 sticky top-24 space-y-6",children:[e.jsxs("div",{className:"bg-slate-800/50 p-6 rounded-xl border border-slate-700",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Model Gemini"}),e.jsx("select",{value:b,onChange:s=>F(s.target.value),disabled:m,className:"w-full p-2 bg-slate-900 border border-slate-600 rounded-md text-slate-200 focus:ring-2 focus:ring-cyan-500 focus:border-cyan-500 transition-all duration-300",children:p.map(s=>e.jsx("option",{value:s.name,children:s.name},s.name))})]}),e.jsxs("div",{className:"bg-slate-800/50 p-6 rounded-xl border border-slate-700",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Opsi Ekspor"}),e.jsx("p",{className:"text-sm text-slate-400 mb-4",children:"Pilih platform untuk mengekspor metadata Anda."}),e.jsxs("button",{onClick:M,disabled:c.length===0||m,className:"w-full flex items-center justify-center gap-2 bg-green-600 text-white font-semibold py-3 px-4 rounded-md hover:bg-green-700 transition-colors duration-300 disabled:bg-slate-600 disabled:cursor-not-allowed",children:[e.jsx(P,{className:"w-5 h-5"}),e.jsx("span",{children:"Ekspor ke CSV"})]})]})]})]})})};export{O as default};
